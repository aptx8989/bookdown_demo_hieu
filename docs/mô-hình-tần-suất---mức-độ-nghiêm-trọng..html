<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chương 1 Mô hình tần suất - mức độ nghiêm trọng. | bookdown-demo.knit</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Chương 1 Mô hình tần suất - mức độ nghiêm trọng. | bookdown-demo.knit" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chương 1 Mô hình tần suất - mức độ nghiêm trọng. | bookdown-demo.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  


<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">KHDL KT&KD</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="10-mo-hinh-tuyen-tinh-tong-quat-mo-rong.html"><a href="#mô-hình-tần-suất---mức-độ-nghiêm-trọng."><i class="fa fa-check"></i><b>1</b> Mô hình tần suất - mức độ nghiêm trọng.</a>
<ul>
<li class="chapter" data-level="1.1" data-path="10-mo-hinh-tuyen-tinh-tong-quat-mo-rong.html"><a href="#tại-sao-tần-suất-lại-có-ảnh-hưởng-đến-mức-độ-nghiêm-trọng"><i class="fa fa-check"></i><b>1.1</b> Tại sao tần suất lại có ảnh hưởng đến mức độ nghiêm trọng?</a></li>
<li class="chapter" data-level="1.2" data-path="10-mo-hinh-tuyen-tinh-tong-quat-mo-rong.html"><a href="#các-nền-tảng-xây-dựng-mô-hình."><i class="fa fa-check"></i><b>1.2</b> Các nền tảng xây dựng mô hình.</a></li>
<li class="chapter" data-level="1.3" data-path="10-mo-hinh-tuyen-tinh-tong-quat-mo-rong.html"><a href="#mô-hình-tần-suất---mức-độ-nghiêm-trọng.-1"><i class="fa fa-check"></i><b>1.3</b> Mô hình tần suất - mức độ nghiêm trọng.</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="10-mo-hinh-tuyen-tinh-tong-quat-mo-rong.html"><a href="#mô-hình-hai-thành-phần"><i class="fa fa-check"></i><b>1.3.1</b> Mô hình hai thành phần</a></li>
<li class="chapter" data-level="1.3.2" data-path="10-mo-hinh-tuyen-tinh-tong-quat-mo-rong.html"><a href="#phân-phối-tweedie"><i class="fa fa-check"></i><b>1.3.2</b> Phân phối Tweedie</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!--bookdown:title:end-->
<!--bookdown:title:start-->
<div id="mô-hình-tần-suất---mức-độ-nghiêm-trọng." class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">Chương 1</span> Mô hình tần suất - mức độ nghiêm trọng.<a href="#mô-hình-tần-suất---mức-độ-nghiêm-trọng." class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Nhiều dữ liệu thu thập được trong lĩnh vực bảo hiểm có thông tin về tần suất, chẳng hạn như tần suất phát sinh yêu cầu bồi thường, cũng như mức độ nghiêm trọng của yêu cầu bồi thường. Phần này của cuốn sách giới thiệu các công cụ để xử lý phân phân phối xác suất đồng thời của tần suất và mức độ nghiêm trọng. Mô hình hóa tần suất rất quan trọng trong các ứng dụng bảo hiểm vì các đặc điểm của hợp đồng, hành vi của chủ hợp đồng, cơ sở dữ liệu mà các công ty bảo hiểm duy trì và cả các yêu cầu pháp lý. Việc lựa chọn mô hình tùy thuộc vào kiểu dữ liệu thu thập được.</p>
<p>Đối với một số dữ liệu, chúng tôi quan sát số tiền yêu cầu bồi thường và coi yêu cầu bồi thường bằng 0 có nghĩa là không có yêu cầu bồi thường nào trong khoảng thời gian dữ liệu được thu thập. Đối với các dữ liệu khác, dữ liệu quan sát được lại là số tiền yêu cầu bồi thường của từng cá nhân. Cũng như các phần trước, chúng tôi sẽ không quá đi sâu vào các kỹ thuật xây dựng hay ước lượng mô hình mà sẽ nhấn mạnh vào các ứng dụng thực tế. Chương này của cuốn sách sử dụng công cụ thường được áp dụng trong thực tế để so sánh các mô hình đó là xác nhận mô hình ngoài mẫu (out-of-sample validation)</p>
<div id="tại-sao-tần-suất-lại-có-ảnh-hưởng-đến-mức-độ-nghiêm-trọng" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> Tại sao tần suất lại có ảnh hưởng đến mức độ nghiêm trọng?<a href="#tại-sao-tần-suất-lại-có-ảnh-hưởng-đến-mức-độ-nghiêm-trọng" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Hiểu một cách đơn giản nhất, hoạt động cơ bản nhất trong bảo hiểm là các công ty bảo hiểm nhận phí bảo hiểm để đổi lấy lời hứa bồi thường cho chủ hợp đồng về sự cố không chắc chắn của người được bảo hiểm. Mỗi lần khách hàng gặp sự cố sẽ gửi một thông báo đến công ty để yêu cầu công ty thanh toán tổn thất, thông báo này được gọi là yêu cầu bồi thường. Số tiền được gọi là mức độ nghiêm trọng của yêu cầu bồi thường, là khoản chi quan trọng đối với công ty bảo hiểm. Chúng ta cũng có thể coi yêu cầu bồi thường bằng 0 tương đương với việc sự kiện được bảo hiểm không xảy ra. Bỏ qua chi phí, một công ty bảo hiểm nếu chỉ quan tâm đến số tiền đã thanh toán sẽ không quan tâm đến hai yêu cầu bồi thường, mỗi yêu cầu bằng 100 triệu, so sánh với một yêu cầu bồi thường 200 triệu, mặc dù số lượng yêu cầu bồi thường khác nhau.</p>
<p>Tuy nhiên, nghiên cứu tần suất phát sinh các yêu cầu bồi thường, hay còn gọi tắt là tần suất, cũng là một chủ đề đáng quan tâm của những người nghiên cứu về bảo hiểm. Dưới đây là các nguyên nhân mà chúng ta cần quan tâm đến tần suất của sự kiện bảo hiểm:</p>
<ul>
<li><p>Thứ nhất: thông thường thì các hợp đồng bảo hiểm sẽ áp đặt các khoản khấu trừ và giới hạn trên cho mỗi lần xảy ra sự cố. Ví dụ: nếu hợp đồng có mức khấu trừ là 100 triệu cho mỗi lần xảy ra, thì hai khoản lỗ 100 triệu sẽ dẫn đến khoản thanh toán (hoặc yêu cầu bồi thường) bằng 0 từ công ty bảo hiểm, trong khi một sự kiện ở mức tổn thất 200 triệu sẽ dẫn đến khoản thanh toán là 100 triệu. Tổng số tiền tổn thất được bảo hiểm cần phải tính đến các khoản khấu trừ và giới hạn chi trả cho từng sự kiện được bảo hiểm.</p></li>
<li><p>Thứ hai là do hành vi của các bên liên quan đến hợp đồng bảo hiểm. Các mô hình tổn thất bảo hiểm giải thích rõ ràng hoặc ngầm định các hành vi dẫn đến quyết định của người dân và doanh nghiệp có thể ảnh hưởng đến cả tần suất và mức độ nghiêm trọng của tổn thất. Những người liên quan đến hợp đồng có thể không chỉ bao gồm chủ hợp đồng mà còn có cả người bảo hiểm, chuyên gia sửa chữa (oto, nhà), nhà cung cấp dịch vụ y tế, v.v. Các biến giải thích hành vi có thể có những tác động khác nhau lên tần suất xảy ra một sự kiện. Ví dụ, trong bảo hiểm nhà, khi xem xét một người mua bảo hiểm rất cẩn thận và sống trong một khu nhà đắt đỏ. Chúng ta có thể xem xét các đặc điểm của chủ nhà như một dấu hiệu cho thấy việc áp dụng các biện pháp ngăn ngừa tổn thất như những yếu tố quyết định cho thấy tần suất thấp. Đồng thời, chúng ta có thể xem xét mức thu nhập chung của khu vực địa lý nơi có ngôi nhà làm đại diện cho mức chi phí sửa chữa trong trường hợp xảy ra tai nạn, cho thấy mức độ nghiêm trọng cao. Trong bảo hiểm ô tô, chúng ta có thể nghĩ mật độ dân số có mối tương quan dương với tần suất tai nạn và có mối tương quan nghịch với mức độ nghiêm trọng. Ví dụ, ở một khu đô thị đông dân cư, tình trạng tắc nghẽn giao thông cao, có nghĩa là người lái xe có thể gặp tai nạn thường xuyên nhưng chi phí tương đối thấp. Điều này trái ngược với một khu vực nông thôn dân cư thưa thớt hơn, nơi có đường rộng, ít tắc nghẽn và lái xe có thể chạy với tốc độ cao, có nghĩa là tai nạn ít xảy ra hơn, nhưng tốc độ cao hơn có nghĩa là mức độ nghiêm trọng hơn. Lịch sử yêu cầu bồi thường trước đây là một biến số khác cung cấp thông tin về mức độ chấp nhận rủi ro của chủ hợp đồng. Đặc biệt trong bảo hiểm cá nhân, người ta thường sử dụng dấu hiệu cho biết liệu yêu cầu bồi thường có xảy ra hay không, chẳng hạn như trong ba năm qua, thay vì số tiền yêu cầu bồi thường. Ở nhiều quốc gia, phí bảo hiểm ô tô được điều chỉnh bằng hệ thống được gọi là hệ thống thưởng-phạt, trong đó tần suất yêu cầu trước được sử dụng để điều chỉnh linh hoạt phí bảo hiểm.</p></li>
<li><p>Thứ ba: là các cơ sở dữ liệu trong bảo hiểm. Đa số các công ty bảo hiểm lưu trữ dữ liệu theo hướng làm cơ sở để phát triển các mô hình tần suất và mức độ nghiêm trọng một cách riêng biệt. Ví dụ: các công ty bảo hiểm duy trì hồ sơ chủ hợp đồng được thiết lập khi soạn thảo hợp đồng. Hồ sơ này ghi lại thông tin phát hành và lịch sử hợp đồng, bao gồm có thông tin người được bảo hiểm, chẳng hạn như tuổi tác, giới tính và kinh nghiệm yêu cầu bồi thường trước đó; thông tin về phạm vi bảo hiểm, khoản khấu trừ và giới hạn; và thông tin về sự kiện yêu cầu bồi thường bảo hiểm. Một hồ sơ riêng biệt khác, thường được gọi là hồ sơ yêu cầu bồi thường, ghi lại chi tiết về yêu cầu bồi thường đối với công ty bảo hiểm. Cách lưu trữ dữ liệu như vậy giúp các công ty bảo hiểm mô hình hóa tần suất và mức độ nghiêm trọng thành các quy trình riêng biệt một cách hoàn toàn tự nhiên.</p></li>
<li><p>Thứ tư là do quy định pháp luật. Bảo hiểm là một ngành dịch vụ được giám sát chặt chẽ. Các cơ quan quản lý thường xuyên yêu cầu công ty báo cáo cả số lượng và số tiền yêu cầu bồi thường. Các công ty bảo hiểm cần các hệ thống quản lý khác nhau để xử lý các tổn thất nhỏ, xảy ra thường xuyên như bảo hiểm sức khỏa, và các sự kiện hiếm xảy ra, có tác động lớn, chẳng hạn như bảo hiểm cháy nổ hay hàng hải. Mỗi yêu cầu bồi thường bảo hiểm có nghĩa là công ty phải chịu thêm chi phí, cho thấy tần suất yêu cầu bồi thường là yếu tố quan trọng quyết định chi phí của công ty.</p></li>
</ul>
</div>
<div id="các-nền-tảng-xây-dựng-mô-hình." class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Các nền tảng xây dựng mô hình.<a href="#các-nền-tảng-xây-dựng-mô-hình." class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Hãy bắt đầu xây dựng mô hình bằng cách suy nghĩ về cơ sở dữ liệu của công ty bảo hiểm duy trì, bao gồm dữ liệu chủ hợp đồng và dữ liệu về yêu cầu bồi thường. Công ty bảo hiểm ký hợp đồng với người được bảo hiểm, quản lý dữ liệu hợp đồng và dữ liệu về yêu cầu bồi thường một cách liên tục theo thời gian. Đối với các mục đích, chẳng hạn như xác định số dự phòng tổn thất, sẽ rất hữu ích khi xem xét dữ liệu một cách liên tục theo thời gian. Phần này của cuốn sách chỉ tập trung vào xây dựng mô hình trong một khoảng thời gian cụ thể, chẳng hạn như 1 năm, và chỉ xem xét đến các yêu cầu bồi thường đã hoàn thành, nghĩa là đã được thanh toán đầy đủ hoặc không đủ điều kiện để bồi thường. Đây là cách xem xét dữ liệu gắn liền với các nghiệp vụ tính toán như xác định mức phí bảo hiểm (rate making) cho hợp đồng mới và tái bảo hiểm (reinsurance).</p>
<p>Giả sử rằng có <span class="math inline">\(n\)</span> hợp đồng trong danh mục nghiệp vụ bảo hiểm của công ty, các hợp đồng được ký hiệu là <span class="math inline">\(1, 2, \cdots, n\)</span> với</p>
<ul>
<li><p><span class="math inline">\(N_i\)</span> là số lượng yêu cầu bồi thường được chấp thuận của hợp đồng <span class="math inline">\(i\)</span> trong thời gian quan sát.</p></li>
<li><p>Khi <span class="math inline">\(N_i &gt; 0\)</span>, ký hiệu <span class="math inline">\(y_{i,j}\)</span>, với <span class="math inline">\(j = 1, 2, \cdots, N_i\)</span> lần lượt là số tiền yêu cầu bồi thường của lần yêu cầu thứ <span class="math inline">\(j\)</span>.</p></li>
<li><p>Tổng số tiền bồi thường cho hợp đồng <span class="math inline">\(i\)</span> trong thời gian quan sát là
<span class="math display">\[\begin{align}
S_i = \begin{cases}
0 &amp; \text{ nếu } N_i = 0 \\
\sum\limits_{j=1}^{N_i} y_{i,j} &amp; \text{ nếu } N_i &gt; 0
\end{cases}
\end{align}\]</span></p></li>
</ul>
<p>Trong cơ sở dữ liệu của các công ty bảo hiểm, tổn thất có thể được lưu trữ dưới các dạng như sau</p>
<ul>
<li><ol style="list-style-type: decimal">
<li>Chỉ có <span class="math inline">\(S_i\)</span> được lưu lại, chẳng hạn như các hợp đồng bảo hiểm thương mại.</li>
</ol></li>
<li><ol start="2" style="list-style-type: decimal">
<li>Cả <span class="math inline">\(N_i\)</span> và <span class="math inline">\(S_i\)</span> đều được lưu lại.</li>
</ol></li>
<li><ol start="3" style="list-style-type: decimal">
<li>Tất cả các thông tin liên quan đến yêu cầu bồi thường đều được lưu lại, nghĩa là dữ liệu có đầy đủ thông tin về <span class="math inline">\(y_{i,j}\)</span>, với <span class="math inline">\(j = 1, 2, \cdots, N_i\)</span> với mọi hợp đồng <span class="math inline">\(i\)</span>.</li>
</ol></li>
</ul>
<p>Chúng ta có thể sử dụng quy tắc xác suất có điều kiện để xây dựng phân phối đồng thời cho các thành phần tần suất và mức độ nghiêm trọng. Để cụ thể, giả sử dữ liệu được quan sát một cách đầy đủ. Chúng ta có hàm phân phối đồng thời cho hai biến <span class="math inline">\(N\)</span> - tần suất và <span class="math inline">\(Y\)</span> mức độ nghiêm trọng như sau
<span class="math display" id="eq:FS1">\[\begin{align}
f(N,Y) = p(N) \cdot f(Y|N)
\tag{1.1}
\end{align}\]</span>
trong đó <span class="math inline">\(f(N,Y)\)</span> là hàm phân phối xác suất đồng thời của hai biến <span class="math inline">\(N\)</span> và <span class="math inline">\(Y\)</span>, <span class="math inline">\(p(N)\)</span> là phân phối xác suất của biến <span class="math inline">\(N\)</span> và <span class="math inline">\(f(Y|N)\)</span> là phân phối xác suất của mức độ nghiêm trọng <span class="math inline">\(Y\)</span> với điều kiện <span class="math inline">\(N\)</span>.</p>
<p>Khi dữ liệu thu thập được ở dạng thứ hai, chúng ta cũng có thể mô tả mối liên hệ giữa tần suất và mức độ nghiêm trọng một cách tương tự, thay thế véc-tơ tổn thất riêng <span class="math inline">\(y\)</span> bằng tổng tổn thất <span class="math inline">\(S\)</span>. Đối với dữ liệu thu thập được ở dạng thứ nhất, chúng ta có thể phân tách dữ liệu bằng cách tách sự kiện <span class="math inline">\(N = 0\)</span> thông qua ký hiệu chỉ báo <span class="math inline">\(R_i = \mathbb{I}_{S_i &gt; 0}\)</span> cho thành phần tần suất và chỉ sử dụng phần dữ liệu có <span class="math inline">\(R_i = 1\)</span> cho thành phần mức độ nghiêm trọng.</p>
<p>Thông qua việc phân tách <span class="math inline">\(S_i\)</span> thành hai thành phần có phân phối như <a href="#eq:FS1">(1.1)</a>, chúng ta không yêu cầu giả thiết độc lập của các thành phần như truyền thống. Có nhiều cách để mô hình hóa sự phụ thuộc khi xét <span class="math inline">\(f(N,Y)\)</span>. Ví dụ: chúng ta có thể sử dụng một biến ngẫu nhiên ẩn ảnh hưởng đồng thời đến cả tần số <span class="math inline">\(N\)</span> và lượng tổn thất <span class="math inline">\(Y\)</span> để mô tả mối liên hệ cùng chiều, hoặc ngược chiều. Kỹ thuật copula là một công cụ hữu ích được sử dụng thường xuyên để mô hình hóa các mối liên hệ giữa <span class="math inline">\(N\)</span> và <span class="math inline">\(Y\)</span>. Nhìn chung, xuất phát từ công thức xác suất có điều kiện là một tiếp cận hợp lý cho phép mô tả mối liên hệ giữa các thành phần và cung cấp nền tảng khởi đầu cho các tính toán thực nghiệm.</p>
<p>Nền tảng thứ hai cho mô hình tần suất - mức độ nghiêm trọng là mô hình tuyến tính tổng quát. Khả năng tùy biến linh hoạt của GLM cho phép chúng ta xây dựng được mối liên hệ của tần suất và mức độ nghiêm trọng với các biến độc lập một cách đồng thời. Giả sử biến <span class="math inline">\(Y_i\)</span> là biến mục tiêu, có thể là tần suất hoặc mức độ nghiêm trọng, chúng ta luôn có thể xây dựng mô hình tuyến tính tổng quát mà giá trị trung bình của biến phụ thuộc được giải thích thông qua các biến phụ thuộc. Do giá trị trung bình của tần suất và mức độ nghiêm trọng là số dương nên trong đa số các trường hợp chúng ta sử dụng hàm liên kết là hàm <span class="math inline">\(log(\cdot)\)</span>. Ta có <span class="math inline">\(\mathbb{E}(Y_i) = exp(\textbf{x}_i^{&#39;} \beta)\)</span>.</p>
<p>Trong một số trường hợp, giá trị trung bình của biến phụ thuộc được biết là thay đổi tỷ lệ thuận với một biến mà chúng ta gắn nhãn là <span class="math inline">\(E_i\)</span>, trong đó <span class="math inline">\(E\)</span> là viết tắt của “Exposure” - một đại lượng mà chúng ta sẽ thảo luận ở phần dưới. Mối liên hệ giữa giá trị trung bình của biến phụ thuộc và exposure được mô tả như sau</p>
<p><span class="math display">\[\begin{align}
\mathbb{E}(Y_i) = E_i \cdot \exp(\textbf{x} \beta)
\end{align}\]</span></p>
<p>Lấy <span class="math inline">\(log\)</span> của hai vế, chúng ta có phương trình tuyến tính mà một trong các biến độc lập là <span class="math inline">\(log(E_i)\)</span> với hệ số là 1.
<span class="math display">\[\begin{align}
\log(\mu_i) = \log(E_i) + \textbf{x}_i^{&#39;} \beta
\end{align}\]</span></p>
<p>Khi xây dựng các mô hình trong bảo hiểm, các chuyên gia tính toán thường sử dụng khái niệm “exposure” để hiệu chỉnh quy mô của một rủi ro. Tùy theo loại hình bảo hiểm mà exposure được định nghĩa khác nhau. Ví dụ như trong bảo hiểm vật chất xe oto, exposure thường được sử dụng là 1 năm mà một xe ô tô được bảo hiểm. Trong bảo hiểm trách nhiệm lái xe ô tô, exposure lại có thể là tổng quãng đường lái xe tính theo km, chẳng hạn như mỗi 10,000 km. Khi xây dựng mô hình tần suất - mức độ nghiêm trọng, cần xác định được mối liên hệ giữa tần suất hoặc mức độ nghiêm trọng với exposure. Đối với bảo hiểm vật chất xe ô tô, tần suất có mối liên hệ trực tiếp đến exposure bởi vì thời gian bảo hiểm hoặc quãng đường lái xe càng dài thì tần suất cũng tăng theo tương ứng nhưng mức độ nghiêm trọng lại không có mối liên hệ. Trái lại, trong bảo hiểm thất nghiệp, exposure là tháng lương của người lao động nên sẽ được điều chỉnh theo lạm phát, nghĩa là exposure có tác động đến mức độ nghiêm trọng nhưng lại không có tác động lên tần suất.</p>
<p>Để minh họa cách hiệu chỉnh mô hình khi sử dụng exposure, giả sử trong bảo hiểm xe ô tô, <span class="math inline">\(E_i\)</span> là một phần của năm mà chủ hợp đồng được bảo hiểm. Logic đằng sau là số vụ tai nạn dự kiến tỷ lệ thuận với độ dài của thời gian bảo hiểm.</p>
<ul>
<li><p>Trong trường hợp tần suất xảy ra tai nạn có phân phối Poisson, xây dựng mô hình tuyến tính tổng quát là đơn giản vì nếu 1 đơn vị exposure có phân phối Poisson với tham số <span class="math inline">\(\mu_i\)</span> thì <span class="math inline">\(E_i\)</span> đơn vị exposure sẽ có phân phối Poisson với tham số <span class="math inline">\(\lambda_i = E_i \cdot \mu_i\)</span>. Mô hình tuyến tính tổng quát sẽ có dạng như sau
<span class="math display" id="eq:pois1">\[\begin{align}
&amp; Y_i \sim \mathcal{P}(\lambda_i) \\
&amp; \log(\lambda_i) = \log(E_i) + \textbf{x}_i^{&#39;} \beta
\tag{1.2}
\end{align}\]</span></p></li>
<li><p>Trong trường hợp biến phụ thuộc có giá trị nhị phân và hàm liên kết có dạng logit. Với một đơn vị exposure, xác suất xảy ra tai nạn là <span class="math inline">\(p_i = \cfrac{\exp{\left(\textbf{x}_i^{&#39;} \beta\right)}}{1 + \exp{\left(\textbf{x}_i^{&#39;} \beta\right)}}\)</span>. Giả sử <span class="math inline">\(Y_i\)</span> là biến phụ thuộc cho trường hợp có <span class="math inline">\(E_i\)</span> đơn vị exposure. Có một số tiếp cận khác nhau để xây dựng mô hình tuyến tính tổng quát cho <span class="math inline">\(Y_i\)</span> như sau
<span class="math display">\[\begin{align}
\text{Cách 1: } &amp; P(Y_i = 1) = \pi_i = E_i \cdot p_i = E_i \cfrac{\exp{\left(\textbf{x}_i^{&#39;} \beta\right)}}{1 + \exp{\left(\textbf{x}_i^{&#39;} \beta\right)}}\\
\text{Cách 2: } &amp; P(Y_i = 1) = \pi_i = 1 - (1 - p_i)^{E_i} = 1 - \left(1 - \cfrac{\exp{\left(\textbf{x}_i^{&#39;} \beta\right)}}{1 + \exp{\left(\textbf{x}_i^{&#39;} \beta\right)}} \right)^{E_i}\\
\text{Cách 3: } &amp; P(Y_i = 1) = \pi_i = \cfrac{E_i \cdot p_i}{1 - (1 - E_i) \cdot p_i} = \cfrac{E_i \cdot \cfrac{\exp{\left(\textbf{x}_i^{&#39;} \beta\right)}}{1 + \exp{\left(\textbf{x}_i^{&#39;} \beta\right)}}} {1 - (1 - E_i) \cdot \cfrac{\exp{\left(\textbf{x}_i^{&#39;} \beta\right)}}{1 + \exp{\left(\textbf{x}_i^{&#39;} \beta\right)}}}
\end{align}\]</span></p></li>
</ul>
<p>Đối với phân bố Poisson, phương sai bằng giá trị trung bình, do đó cả giá trị trung bình và phương sai đều tăng tỷ lệ với giá trị <span class="math inline">\(E_i\)</span>. Do đó, khi sử dụng phân phối Poisson với hàm liên kết <span class="math inline">\(log(\cdot)\)</span>, chúng ta chỉ cần sử dụng <span class="math inline">\(log(E_i)\)</span> để tự động tính đến phương sai ngày càng tăng. Tuy nhiên, điều này lại không đúng đối với các phân phối khác thuộc nhóm phân phối mũ.</p>
<p>Ví dụ, hãy xem xét phân phối <span class="math inline">\(gamma\)</span> với tham số <span class="math inline">\(\alpha\)</span> và <span class="math inline">\(beta\)</span> khi viết dưới dạng phân phối kiểu mũ có tham số chính tắc <span class="math inline">\(\theta\)</span> và tham số phân tán <span class="math inline">\(\phi\)</span>. Nếu có <span class="math inline">\(E_i\)</span> biến ngẫu nhiên <span class="math inline">\(gamma\)</span> độc lập trong cùng nhóm <span class="math inline">\(i\)</span>, mỗi biến có trung bình <span class="math inline">\(\alpha/\beta\)</span> và phương sai <span class="math inline">\(\alpha/\beta^2\)</span>, thì phân phối tổng của <span class="math inline">\(E_i\)</span> expusure cũng sẽ là phân phối gamma với trung bình <span class="math inline">\(E_i \cdot \alpha/\beta\)</span> và phương sai <span class="math inline">\(E_i \cdot \alpha/\beta^2\)</span>. Khi sử dụng phân phối <span class="math inline">\(gamma\)</span> cho biến phụ thuộc và hàm liên kết <span class="math inline">\(log(\cdot)\)</span>, giá trị trung bình của tổng sẽ tăng tỷ lệ thuận với <span class="math inline">\(E_i\)</span>, nhưng phương sai sẽ tăng tỷ lệ thuận với <span class="math inline">\(E^2_i\)</span> chứ không phải <span class="math inline">\(E_i\)</span>.</p>
<p>Giả sử dữ liệu quan sát được bao gồm <span class="math inline">\(n\)</span> nhóm; với nhóm thứ <span class="math inline">\(i\)</span>, <span class="math inline">\(1 \leq i \leq n\)</span>, chúng ta có <span class="math inline">\(E_i\)</span> quan sát độc lập với cùng phân phối thuộc họ các phân phối kiểu mũ hàm mũ. Phân phối của nhóm <span class="math inline">\(i\)</span> có tham số chính tắc <span class="math inline">\(\theta_i\)</span>, trung bình <span class="math inline">\(\mu_i\)</span> và tham số phân tán <span class="math inline">\(\phi\)</span> (có thể phụ thuộc hoặc không phụ thuộc vào <span class="math inline">\(i\)</span>). Có hai hướng tiếp cận để xây dựng mô hình trong trường hợp này. Thứ nhất đó là tiến hành phân tích với tập dữ liệu dựa trên từng quan sát riêng lẻ <span class="math inline">\(j = 1, 2, \cdots, E_i\)</span> với mỗi <span class="math inline">\(i = 1, 2, \cdots, n\)</span>. Mặt khác, với những giả định này, thì trung bình của nhóm thứ <span class="math inline">\(i\)</span> cũng sẽ có phân phối kiểu mũ với cùng giá trị trung bình <span class="math inline">\(\mu_i\)</span>, cùng tham số chính tắc <span class="math inline">\(\theta_i\)</span> nhưng có tham số phân tán <span class="math inline">\(\phi_i/E_i\)</span>. Do đó hướng tiếp cận thứ hai là sử dụng mẫu dữ liệu theo nhóm bao gồm <span class="math inline">\(n\)</span> quan sát và sử dụng nghịch đảo của <span class="math inline">\(E_i\)</span> làm trọng số. Với quan sát riêng lẻ thứ <span class="math inline">\(j\)</span> thuộc nhóm <span class="math inline">\(i\)</span>, các biến phụ thuộc bao gồm <span class="math inline">\((N_{i,j}, Y_{i_j})\)</span>. Nếu các biến giải thích có sẵn cho từng quan sát riêng lẻ thì việc tổng hợp thông tin cho nhóm <span class="math inline">\(i\)</span> sẽ gặp khó khăn vì chúng ta sẽ đi thông tin. Thay vào đó, nếu các biến giải thích chỉ có sẵn theo nhóm và chúng ta muốn xây dựng mô hình các biến tần suất và mức độ nghiêm trọng tổng: <span class="math inline">\(N_i = \sum\limits_{i=1}^{E_i} N_{i,j}\)</span>, và <span class="math inline">\(S_i = \sum\limits_{i=1}^{E_i} Y_{i,j}\)</span> thì</p>
<ul>
<li><p>Đối với biến tần suất chúng ta sử dụng phân phối Poisson với biến phụ thuộc <span class="math inline">\(N_i\)</span> được điều chỉnh bởi <span class="math inline">\(log(E_i)\)</span>, hoặc sử dụng biến ngẫu nhiên dạng đếm thuộc họ phân phối kiểu mũ cho biến phụ thuộc là <span class="math inline">\(N_i/E_i\)</span> và tham số phân tán <span class="math inline">\(\phi/E_i\)</span>.</p></li>
<li><p>Đối với biến mức độ nghiêm trọng, chúng ta sử dụng biến phụ thuộc là <span class="math inline">\(S_i/N_i\)</span> thuộc nhóm các phân phối kiểu mũ có tham số phân tán là <span class="math inline">\(\phi/N_i\)</span>.</p></li>
</ul>
</div>
<div id="mô-hình-tần-suất---mức-độ-nghiêm-trọng.-1" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> Mô hình tần suất - mức độ nghiêm trọng.<a href="#mô-hình-tần-suất---mức-độ-nghiêm-trọng.-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Như chúng ta đã nói ở trên, có ba kiểu dữ liệu được thu thập, đó là i) chỉ có tổng tổn thất theo hợp đồng <span class="math inline">\(S_i\)</span>; ii) có thông tin tần suất và tổng giá trị tổn thất <span class="math inline">\((N_i, S_i)\)</span>; và iii) có đầy đủ thông tin về <span class="math inline">\(N_i\)</span> và các tổn thất riêng lẻ <span class="math inline">\(y_{i,j}\)</span> với <span class="math inline">\(j = 1, 2, \cdots, N_i\)</span>. Tùy theo kiểu dữ liệu của công ty bảo hiểm mà mô hình tần suất mức độ nghiêm trọng được xây dựng theo các trình tự khác nhau.</p>
<div id="mô-hình-hai-thành-phần" class="section level3 hasAnchor" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Mô hình hai thành phần<a href="#mô-hình-hai-thành-phần" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Mô hình hai thành phần thường được sử dụng để xây dựng mô hình trong trường hợp chúng ta chỉ có thông tin về tổng giá trị tổn thất của hợp đồng <span class="math inline">\(S_i\)</span> với <span class="math inline">\(i = 1, 2, \cdots, n\)</span>. Đây là một trường hợp đặc biệt của mô hình tần suất - mức độ nghiêm trọng. Thành phần thứ nhất của mô hình là biến ngẫu nhiên <span class="math inline">\(B_i\)</span> có phân phối nhị phân chỉ nhận hai giá trị là 0 hoặc 1, trong đó 0 tương ứng với hợp đồng không có yêu cầu bổi thường và 1 tương ứng với hợp đồng có yêu cầu bối thường. Thành phần thứ hai của mô hình là biến ngẫu nhiên <span class="math inline">\(S_i\)</span> cho biết tổn thất đó có độ lớn như thế nào với điều kiện <span class="math inline">\(B_i = 1\)</span>.</p>
<p>Quá trình ước lượng mô hình hai thành phần bao gồm hai mô hình tuyến tính tổng quát:</p>
<ul>
<li><p>Mô hình thứ nhất có biến phụ thuộc là <span class="math inline">\(B_i\)</span> với véc-tơ các biến giải thích <span class="math inline">\(\textbf{x}_{i,B}\)</span> và các hệ số tương ứng của các biến độc lập là <span class="math inline">\(\boldsymbol{\beta}_B\)</span>. Hàm liên kết được chọn thường là hàm logit.</p></li>
<li><p>Mô hình thứ hai có biến phụ thuộc là <span class="math inline">\(S_i\)</span> với véc-tơ các biến giải thích <span class="math inline">\(\textbf{x}_{i,S}\)</span> và các hệ số tương ứng của các biến độc lập là <span class="math inline">\(\boldsymbol{\beta}_S\)</span>. Dữ liệu để ước lượng mô hình là dữ liệu chỉ tính đến các hợp đồng có <span class="math inline">\(S_i &gt; 0\)</span>. Lựa chọn phổ biến cho phân phối của biến độc lập là phân phối gamma và hàm liên kết là hàm log.</p></li>
</ul>
<p>Thông thường sẽ luôn luôn có các biến giải thích vừa nằm trong véc-tơ <span class="math inline">\(\textbf{x}_{i,B}\)</span> và véc-tơ <span class="math inline">\(\textbf{x}_{i,S}\)</span>. Một giả thiết khác trong mô hình hai thành phần nói riêng và mô hình tổn thất - mức độ nghiêm trọng nói riêng là các véc-tơ hệ số <span class="math inline">\(\boldsymbol{\beta}_B\)</span> và <span class="math inline">\(\boldsymbol{\beta}_S\)</span> độc lập với nhau. Giả thiết này đảm bảo việc ước lượng các hệ số của mỗi thành phần hoàn toàn riêng biệt.</p>
<p>Trong trường hợp dữ liệu xây dựng mô hình ở dạng thứ hai, nghĩa là chúng ta có quan sát đồng thời cho tần suất và tổng tổn thất của mỗi hợp đồng <span class="math inline">\((N_i, S_i)\)</span>, hai bước ước lượng mô hình tần suất - mức độ nghiêm trọng cụ thể như sau</p>
<ul>
<li><p>Sử dụng một biến ngẫu nhiên dạng đếm để mô tả tần suất <span class="math inline">\(N_i\)</span> với tập hợp các biến độc lập là <span class="math inline">\(\textbf{x}_{i,N}\)</span>. Hệ số của các biến độc lập được ước lượng là <span class="math inline">\(\boldsymbol{\beta}_N\)</span>. Phân phối thường được lựa chọn là phân phối Poisson hoặc phân phối nhị thức âm.</p></li>
<li><p>Với điều kiện <span class="math inline">\(N_i &gt; 0\)</span>, sử dụng mô hình tuyến tính tổng quát với <span class="math inline">\(S_i/N_i\)</span> là biến phụ thuộc và <span class="math inline">\(\textbf{x}_{i,S}\)</span> là các biến độc lập. Hệ số của các biến độc lập được ước lượng là <span class="math inline">\(\boldsymbol{\beta}_S\)</span>. Phân phối của biến phụ thuộc thường được lựa chọn là phân phối <span class="math inline">\(gamma\)</span> sao cho tham số phân tán của quan sát thứ <span class="math inline">\(i\)</span> là <span class="math inline">\(\phi/N_i\)</span>.</p></li>
</ul>
<p>Nếu dữ liệu xây dựng mô hình ở dạng thứ ba, nghĩa là chúng ta có thông tin chính xác về từng khoảng tổn thất riêng biệt, bước xây dựng mô hình cho tần suất hoàn toàn tương tự như khi dữ liệu ở dạng thứ hai. Trong bước xây dựng mô hình cho mức độ nghiêm trọng, chúng ta sử dụng <span class="math inline">\(y_{i,j}\)</span> là các biến phụ thuộc thay vì sử dụng giá trị trung bình của nhóm <span class="math inline">\(i\)</span>. Phân phối được lựa chọn cho biến <span class="math inline">\(y_{i,j}\)</span> thường là phân phối gamma, hoặc phân phối chuẩn với hàm liên kết là hàm log.</p>
</div>
<div id="phân-phối-tweedie" class="section level3 hasAnchor" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Phân phối Tweedie<a href="#phân-phối-tweedie" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Họ các phân phối kiểu mũ bao gồm các phân phối liên tục, chẳng hạn như phân phối chuẩn và phân phối gamma, cũng như các phân bố rời rạc, chẳng hạn như phân phối nhị thức và Poisson. Ngoài ra, các phân phối kiểu mũ cũng bao gồm cả các phân phối hỗn hợp, nghĩa là các phân phối vừa có thành phần rời rạc và vừa có thành phần liên tục. Trong mô hình hóa dữ liệu trong bảo hiểm, một phân phối hỗn hợp được sử dụng rộng rãi là phân phối Tweedie (1984). Phân phối này có mật độ xác suất dương tại điểm 0 (rời rạc) biểu thị rằng không có yêu cầu bồi thường nào, và phân phối này có thành phần liên tục tại mọi giá trị dương, biểu thị tổng số tiền cho một hoặc nhiều yêu cầu bồi thường.</p>
<p>Phân phối Tweedie được định nghĩa là tổng Poisson của các biến ngẫu nhiên Gamma. Cụ thể, giả sử rằng <span class="math inline">\(N\)</span> có phân phối Poisson với giá trị trung bình <span class="math inline">\(\lambda\)</span>, mô tả tần suất yêu cầu bồi thường. Giả sử <span class="math inline">\(Y_j\)</span>, với <span class="math inline">\(j = 1, 2, \cdots, N_i\)</span>, là các biến ngẫu nhiên độc lập có cùng phân phối và độc lập với <span class="math inline">\(N\)</span>. Hơn nữa, mỗi <span class="math inline">\(Y_j\)</span> có phân phối gamma với các tham số <span class="math inline">\(\alpha\)</span> và <span class="math inline">\(\gamma\)</span>, mô tả số tiền yêu cầu bồi thường thứ <span class="math inline">\(j\)</span>. Khi đó</p>
<p><span class="math display">\[\begin{align}
S_N = \begin{cases}
0 &amp; \text{ nếu } N = 0 \\
\sum\limits_{j=1}^{N} y_{j} &amp; \text{ nếu } N &gt; 0
\end{cases}
\end{align}\]</span>
là tổng Poisson của các phân phối gamma. Chúng ta nói rằng <span class="math inline">\(S_N\)</span> có phân phối Tweedie với các tham số <span class="math inline">\((\lambda, \alpha, \gamma)\)</span>.</p>
<p>Hàm phân phối của biến ngẫu nhiên phân phối Tweedie được xác định như sau:
<span class="math display">\[\begin{align}
\mathbb{P}(S_N = 0) = \mathbb{P}(N = 0) = exp(-\lambda)
\end{align}\]</span>
với <span class="math inline">\(s \geq 0\)</span> thì
<span class="math display">\[\begin{align}
\mathbb{P}(S_N \leq y) = exp(-\lambda) + \sum\limits_{k = 1}^{\infty} \mathbb{P}(N = k) \cdot \mathbb{P}(S_k \leq y)
\end{align}\]</span></p>
<p>Do <span class="math inline">\(S_k\)</span> là tổng của <span class="math inline">\(k\)</span> biến ngẫu nhiên phân phối gamma độc lập với tham số <span class="math inline">\(\alpha\)</span>, <span class="math inline">\(\gamma\)</span> do đó <span class="math inline">\(S_k\)</span> cũng có phân phối gamma với tham số <span class="math inline">\((k \cdot \alpha)\)</span>, <span class="math inline">\(\gamma\)</span>. Ta có hàm mật độ xác suất của biến <span class="math inline">\(S_k\)</span>
<span class="math display">\[\begin{align}
f_{S_k}(y) = \cfrac{\gamma^{k \cdot \alpha}}{\Gamma(k \cdot \alpha)} \cdot y^{(k \cdot \alpha - 1)} \cdot e^{-\gamma \cdot y}
\end{align}\]</span></p>
<p>Vậy hàm mật độ của phân phối Tweedie tại <span class="math inline">\(y &gt; 0\)</span> được viết như sau
<span class="math display">\[\begin{align}
f_{S_N}(y) = \sum\limits_{k = 1}^{\infty} e^{-\lambda} \cdot \cfrac{\lambda^k}{k!} \cdot \cfrac{\gamma^{k \cdot \alpha}}{\Gamma(k \cdot \alpha)} \cdot y^{(k \cdot \alpha - 1)} \cdot e^{-\gamma \cdot y}
\end{align}\]</span></p>
<p>Phân phối Tweedie nằm trong họ các phân phối kiểu mũ. Tuy nhiên sẽ không dễ dàng để viết phân phối ở trên dưới dạng phân phối kiểu mũ nếu chúng ta không định nghĩa lại các tham số. Trước hết, ta có giá trị trung bình và phương sai của <span class="math inline">\(S_N\)</span> được tính toán thông qua các tham số của phân phối Poisson và phân phối gamma như sau
<span class="math display">\[\begin{align}
&amp; \mathbb{E}(S_N) = \mathbb{E}(N) \cdot \mathbb{E}(S) = \lambda \cdot \cfrac{\alpha}{\gamma} \\
&amp; \mathbb{V}(S_N) = \cfrac{\lambda \alpha}{\gamma^2} \cdot (1 + \alpha)
\end{align}\]</span></p>
<p>Với các tham số <span class="math inline">\(\mu\)</span>, <span class="math inline">\(\phi\)</span>, <span class="math inline">\(p\)</span> được định nghĩa từ các tham số ban đầu
<span class="math display">\[\begin{align}
&amp; \mu = \lambda \cdot \cfrac{\alpha}{\gamma} \\
&amp; p = \cfrac{\alpha + 2}{\alpha + 1} \\
&amp; \phi = \cfrac{1}{\mu^p} \cdot \cfrac{\lambda \alpha}{\gamma^2} \cdot (1 + \alpha)
\end{align}\]</span>
chúng ta có thể viết hàm phân phối của biến ngẫu nhiên phân phối Tweedie dưới dạng phân phối kiểu mũ như sau</p>
<p><span class="math display">\[\begin{align}
f_{S_N}(y) &amp; = \exp\left( \cfrac{1}{\phi(1-p)} \cdot \left( y \cdot \mu^{1-p} - \cfrac{1-p}{2-p} \mu^{2-p} \right) + H(y,p,\phi) \right)
\end{align}\]</span>
với hàm <span class="math inline">\(H(y,p,\phi)\)</span> chỉ phụ thuộc vào các tham số <span class="math inline">\(\phi\)</span> và <span class="math inline">\(p\)</span>
<span class="math display">\[\begin{align}
H(y,p,\phi) = \log\left( \cfrac{1}{y} \sum\limits_{k=1}^{\infty} \cfrac{1}{k! \Gamma(k \alpha)} \cdot \left( \cfrac{y^\alpha}{\phi^{1/(1-p)}(2-p)(1-p)^\alpha} \right)^n  \right)
\end{align}\]</span></p>
<p>Với tham số chính chắc <span class="math inline">\(\theta = \mu^{1-p}\)</span>, ta có <span class="math inline">\(\cfrac{1-p}{2-p} \mu^{2-p} = \cfrac{1-p}{2-p} \theta^{(2-p)/(1-p)}\)</span> hay nói cách khác <span class="math inline">\(b(\theta) = - \cfrac{\theta^{-\alpha}}{\alpha}\)</span>. Giá trị trung bình và phương sai của <span class="math inline">\(S_N\)</span> tính toán theo hàm mật độ xác suất của phân phối kiểu mũ là
<span class="math display">\[\begin{align}
\mathbb{E}(S_N) = b^{&#39;}(\theta) = \partial \cfrac{-\theta^{-\alpha}}{\alpha}/ \partial \theta = \theta^{-(\alpha+1)} = \theta^{1/(1-p)} = \mu \\
\mathbb{V}(S_N) = a(\phi) b^{&#39;&#39;}(\theta) = \phi (1-p) \cdot \cfrac{1}{1-p} \theta^{p/(1-p)} = \phi \cdot \mu^p
\end{align}\]</span></p>
<p>Khi sử dụng phân phối Tweedie cho biến phụ thuộc trong mô hình tuyến tính tổng quát, chúng ta ước lượng một mô hình GLM thay vì ước lượng hai thành phần tần suất và mức độ nghiêm trọng. Giả sử các biến <span class="math inline">\(\textbf{x}_{i,T}\)</span> là các biến độc lập trong mô hình Tweedie với hàm liên kết là hàm log và hệ số <span class="math inline">\(\boldsymbol{\beta_T}\)</span> là các hệ số tương ứng của các biến độc lập, ta có mô hình tuyến tính tổng quát như sau
<span class="math display">\[\begin{align}
Y_i \sim Tweedie(\mu_i , p , \phi) \\
\mu_i = \exp(\textbf{x}_{i,T}^{&#39;} \cdot \boldsymbol{\beta_T})
\end{align}\]</span></p>
<p>Chúng ta sẽ so sánh giữa giữa sử dụng mô hình tần suất - mức độ nghiêm trọng với sử dụng phân phối Tweedie trên dữ liệu “exposure.csv”. Chỉ tiêu để so sánh hai mô hình là giá trị trung bình của tổng tổn thất theo mỗi hợp đồng trên dữ liệu ngoài mẫu. Giá trị trung bình của tổng tổn thất còn được gọi bằng thuật ngữ là phí bảo hiểm thuần. Dữ liệu sử dụng để xây dựng mô hình được lấy ngẫu nhiên 70% từ dữ liệu ban đầu và chúng ta sẽ so sánh giá trị của phí bảo hiểm thuần được tính toán từ mô hình tần suất mức độ nghiêm trọng với mô hình Tweedie.</p>
<p>Để sử dụng phân phối Tweedie trong hàm <code>glm()</code>, chúng ta cần cài đặt thêm thư viện <span class="math inline">\(statmod\)</span>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">library</span>(statmod)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>dat<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;C:/Users/AD/Desktop/Tex file/Thu latex/Book demo/bookdown_demo_hieu/exposure.csv&quot;</span>)</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>n<span class="ot">&lt;-</span><span class="fu">nrow</span>(dat); p<span class="ot">&lt;-</span><span class="fu">ncol</span>(dat)</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>dat<span class="sc">$</span>Gender<span class="ot">&lt;-</span><span class="fu">as.factor</span>(dat<span class="sc">$</span>Gender)</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>train.index<span class="ot">&lt;-</span><span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span>n,<span class="at">size =</span> <span class="fu">round</span>(n<span class="sc">*</span><span class="fl">0.7</span>),<span class="at">replace=</span><span class="cn">FALSE</span>)</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>train<span class="ot">&lt;-</span>dat[train.index,]</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>test<span class="ot">&lt;-</span>dat[<span class="sc">-</span>train.index,]</span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>glm.ser<span class="ot">&lt;-</span><span class="fu">glm</span>(Ave_Claim<span class="sc">~</span>Age<span class="sc">+</span>Gender,<span class="at">family =</span> <span class="fu">Gamma</span>(<span class="at">link =</span> <span class="st">&quot;log&quot;</span>),<span class="at">data=</span>train, <span class="at">weight =</span> Claim_Count)</span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a>glm.fre<span class="ot">&lt;-</span><span class="fu">glm</span>(Claim_Count<span class="sc">~</span>Age<span class="sc">+</span>Gender,<span class="at">family =</span> <span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">&quot;log&quot;</span>), <span class="at">data =</span> train)</span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a>glm.twe<span class="ot">&lt;-</span><span class="fu">glm</span>(Total_Claim<span class="sc">~</span>Age<span class="sc">+</span>Gender,<span class="at">family=</span><span class="fu">tweedie</span>(<span class="at">var.power=</span><span class="fl">1.5</span>,<span class="at">link.power=</span><span class="dv">0</span>),<span class="at">data=</span>train)</span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a></span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a>glm.fre</span></code></pre></div>
<pre><code>## 
## Call:  glm(formula = Claim_Count ~ Age + Gender, family = poisson(link = &quot;log&quot;), 
##     data = train)
## 
## Coefficients:
## (Intercept)          Age      Gender1  
##    -0.54133     -0.02187      0.11533  
## 
## Degrees of Freedom: 6999 Total (i.e. Null);  6997 Residual
## Null Deviance:       5952 
## Residual Deviance: 5785  AIC: 8934</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>glm.ser</span></code></pre></div>
<pre><code>## 
## Call:  glm(formula = Ave_Claim ~ Age + Gender, family = Gamma(link = &quot;log&quot;), 
##     data = train, weights = Claim_Count)
## 
## Coefficients:
## (Intercept)          Age      Gender1  
##    -0.08272      0.07992     -0.51748  
## 
## Degrees of Freedom: 1469 Total (i.e. Null);  1467 Residual
##   (5530 observations deleted due to missingness)
## Null Deviance:       3833 
## Residual Deviance: 1713  AIC: 13250</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>glm.twe</span></code></pre></div>
<pre><code>## 
## Call:  glm(formula = Total_Claim ~ Age + Gender, family = tweedie(var.power = 1.5, 
##     link.power = 0), data = train)
## 
## Coefficients:
## (Intercept)          Age      Gender1  
##    -0.50403      0.05485     -0.37003  
## 
## Degrees of Freedom: 6999 Total (i.e. Null);  6997 Residual
## Null Deviance:       91600 
## Residual Deviance: 82290     AIC: NA</code></pre>
<p>Hệ số của các biến độc lập của các mô hình ở trong bảng dưới đây</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>df<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">a =</span> <span class="fu">c</span>(<span class="st">&quot;Tần suất&quot;</span>, <span class="st">&quot;Mức độ nghiêm trọng&quot;</span>, <span class="st">&quot;Tweedie&quot;</span>),</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>               <span class="at">b =</span> <span class="fu">c</span>(<span class="st">&quot;glm.fre&quot;</span>, <span class="st">&quot;glm.ser&quot;</span>, <span class="st">&quot;glm.twe&quot;</span>),</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>               <span class="at">d =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.541</span>,<span class="sc">-</span><span class="fl">0.082</span>,<span class="sc">-</span><span class="fl">0.504</span>),</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>               <span class="at">e =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.021</span>,<span class="fl">0.079</span>,<span class="fl">0.055</span>),</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>               <span class="at">f =</span> <span class="fu">c</span>(<span class="fl">0.115</span>,<span class="sc">-</span><span class="fl">0.517</span>,<span class="sc">-</span><span class="fl">0.370</span>))</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(df, <span class="at">booktabs =</span> T,</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">&quot;Hệ số tuyến tính của biến độc lập&quot;</span>,</span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">&quot;Mô hình&quot;</span>, <span class="st">&quot;Tên mô hình trên R&quot;</span>,<span class="st">&quot;Hệ số chặn&quot;</span>, <span class="st">&quot;Hệ số của Age&quot;</span>, <span class="st">&quot;Hệ số của Gender&quot;</span>),</span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a>      <span class="at">escape=</span>F, <span class="at">align =</span> <span class="st">&#39;l&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a>  <span class="co">#column_spec(c(1,4,5,6,7),border_left = T) %&gt;% column_spec(7,border_right = T) %&gt;% </span></span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">latex_options =</span> <span class="st">&quot;scale_down&quot;</span>,<span class="at">full_width =</span> F)</span></code></pre></div>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-4">Table 1.1: </span>Hệ số tuyến tính của biến độc lập
</caption>
<thead>
<tr>
<th style="text-align:left;">
Mô hình
</th>
<th style="text-align:left;">
Tên mô hình trên R
</th>
<th style="text-align:left;">
Hệ số chặn
</th>
<th style="text-align:left;">
Hệ số của Age
</th>
<th style="text-align:left;">
Hệ số của Gender
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Tần suất
</td>
<td style="text-align:left;">
glm.fre
</td>
<td style="text-align:left;">
-0.541
</td>
<td style="text-align:left;">
-0.021
</td>
<td style="text-align:left;">
0.115
</td>
</tr>
<tr>
<td style="text-align:left;">
Mức độ nghiêm trọng
</td>
<td style="text-align:left;">
glm.ser
</td>
<td style="text-align:left;">
-0.082
</td>
<td style="text-align:left;">
0.079
</td>
<td style="text-align:left;">
-0.517
</td>
</tr>
<tr>
<td style="text-align:left;">
Tweedie
</td>
<td style="text-align:left;">
glm.twe
</td>
<td style="text-align:left;">
-0.504
</td>
<td style="text-align:left;">
0.055
</td>
<td style="text-align:left;">
-0.370
</td>
</tr>
</tbody>
</table>
<p>Có thể thấy rằng hệ số của các biến độc lập trong mô hình Tweedie khá gần với tổng của hệ số của biến độc lập trong mô hình tần suất và hệ số của biến độc lập trong mô hình mức độ nghiêm trọng. Điều này có thể được giải thích bởi hàm liên kết được sử dụng trong cả ba mô hình đều là hàm <span class="math inline">\(log(\cdot)\)</span>. Giá trị trung bình của tổng tổn thất được tính toán từ các mô hình như sau:
<span class="math display">\[\begin{align}
\mathbb{E}(S_N|\text{x}_i) &amp;= \mathbb{E}(N|\text{x}_i) \cdot \mathbb{E}(Y|\text{x}_i) \\
&amp;= exp(\beta^F_{0,i} +  \beta^F_{1,i} \cdot Age_i + \beta^F_{2,i} \cdot Gender_i) \cdot

\end{align}\]</span></p>
<!-- # REFERENCE -->
<!-- ### Source from thesis -->
<!-- **1.** Chen, Chun-houh, Wolfgang Karl Härdle, and Antony Unwin, eds (2007). *Handbook of data visualization.* \ -->
<!-- **2.** Aparicio, Manuela, and Carlos J. Costa. (2015). *Data visualization - Communication design quarterly review.* \ -->
<!-- **3.** Hadley Wickham. (2010). *A Layered Grammar of Graphics.* \ -->
<!-- ### Souce from website -->
<!-- **4.** [https://www.tableau.com/learn/articles/data-visualization](https://www.tableau.com/learn/articles/data-visualization) \ -->
<!-- **5.** [https://www.r-graph-gallery.com/ggplot2-package.html](https://www.r-graph-gallery.com/ggplot2-package.html) \ -->
<!-- **6.** [http://r-statistics.co/ggplot2-Tutorial-With-R.html](http://r-statistics.co/ggplot2-Tutorial-With-R.html) \ -->
<!-- **7.** [https://www.maths.usyd.edu.au/u/UG/SM/STAT3022/r/current/Misc/data-visualization-2.1.pdf](https://www.maths.usyd.edu.au/u/UG/SM/STAT3022/r/current/Misc/data-visualization-2.1.pdf) \ -->
<!-- **8.** [https://www.kaggle.com/](https://www.kaggle.com/) \ -->

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>


    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
