<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chương 3 Biến trong R | bookdown-demo.knit</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="Chương 3 Biến trong R | bookdown-demo.knit" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chương 3 Biến trong R | bookdown-demo.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="kiến-thức-r-cơ-bản.html"/>
<link rel="next" href="phân-tích-dữ-liệu-bằng-r.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">KHDL KT&KD</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="giới-thiệu-chung.html"><a href="giới-thiệu-chung.html"><i class="fa fa-check"></i><b>1</b> Giới thiệu chung</a>
<ul>
<li class="chapter" data-level="1.1" data-path="giới-thiệu-chung.html"><a href="giới-thiệu-chung.html#các-khái-niệm-cơ-bản-trong-khoa-học-dữ-liệu"><i class="fa fa-check"></i><b>1.1</b> Các khái niệm cơ bản trong khoa học dữ liệu</a></li>
<li class="chapter" data-level="1.2" data-path="giới-thiệu-chung.html"><a href="giới-thiệu-chung.html#r-là-gì-và-tại-sao-lại-sử-dụng-r"><i class="fa fa-check"></i><b>1.2</b> R là gì và tại sao lại sử dụng R</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="kiến-thức-r-cơ-bản.html"><a href="kiến-thức-r-cơ-bản.html"><i class="fa fa-check"></i><b>2</b> Kiến thức R cơ bản</a>
<ul>
<li class="chapter" data-level="2.1" data-path="kiến-thức-r-cơ-bản.html"><a href="kiến-thức-r-cơ-bản.html#các-dòng-lệnh-cơ-bản"><i class="fa fa-check"></i><b>2.1</b> Các dòng lệnh cơ bản</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="kiến-thức-r-cơ-bản.html"><a href="kiến-thức-r-cơ-bản.html#sử-dụng-r-như-một-máy-tính-cầm-tay"><i class="fa fa-check"></i><b>2.1.1</b> Sử dụng R như một máy tính cầm tay</a></li>
<li class="chapter" data-level="2.1.2" data-path="kiến-thức-r-cơ-bản.html"><a href="kiến-thức-r-cơ-bản.html#sử-dụng-cửa-sổ-script-để-viết-câu-lệnh-r"><i class="fa fa-check"></i><b>2.1.2</b> Sử dụng cửa sổ script để viết câu lệnh R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="biến-trong-r.html"><a href="biến-trong-r.html"><i class="fa fa-check"></i><b>3</b> Biến trong R</a>
<ul>
<li class="chapter" data-level="3.0.1" data-path="biến-trong-r.html"><a href="biến-trong-r.html#biến-kiểu-số"><i class="fa fa-check"></i><b>3.0.1</b> Biến kiểu số</a></li>
<li class="chapter" data-level="3.0.2" data-path="biến-trong-r.html"><a href="biến-trong-r.html#biến-kiểu-logic"><i class="fa fa-check"></i><b>3.0.2</b> Biến kiểu logic</a></li>
<li class="chapter" data-level="3.0.3" data-path="biến-trong-r.html"><a href="biến-trong-r.html#biến-kiểu-ký-tự"><i class="fa fa-check"></i><b>3.0.3</b> Biến kiểu ký tự</a></li>
<li class="chapter" data-level="3.0.4" data-path="biến-trong-r.html"><a href="biến-trong-r.html#biến-kiểu-thời-gian"><i class="fa fa-check"></i><b>3.0.4</b> Biến kiểu thời gian</a></li>
<li class="chapter" data-level="3.1" data-path="biến-trong-r.html"><a href="biến-trong-r.html#vec-tơ-trong-r"><i class="fa fa-check"></i><b>3.1</b> Vec-tơ trong R</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="biến-trong-r.html"><a href="biến-trong-r.html#tại-sao-xử-lý-véc-tơ-là-thế-mạnh-của-r"><i class="fa fa-check"></i><b>3.1.1</b> Tại sao xử lý véc-tơ là thế mạnh của R?</a></li>
<li class="chapter" data-level="3.1.2" data-path="biến-trong-r.html"><a href="biến-trong-r.html#khởi-tạo-véc-tơ-và-các-phép-toán-trên-véc-tơ"><i class="fa fa-check"></i><b>3.1.2</b> Khởi tạo véc-tơ và các phép toán trên véc-tơ</a></li>
<li class="chapter" data-level="3.1.3" data-path="biến-trong-r.html"><a href="biến-trong-r.html#lấy-véc-tơ-con-từ-một-véc-tơ"><i class="fa fa-check"></i><b>3.1.3</b> Lấy véc-tơ con từ một véc-tơ</a></li>
<li class="chapter" data-level="3.1.4" data-path="biến-trong-r.html"><a href="biến-trong-r.html#các-hàm-chỉ-số-trong-véc-tơ"><i class="fa fa-check"></i><b>3.1.4</b> Các hàm chỉ số trong véc-tơ</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="biến-trong-r.html"><a href="biến-trong-r.html#lập-trình-r"><i class="fa fa-check"></i><b>3.2</b> Lập trình R</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="biến-trong-r.html"><a href="biến-trong-r.html#câu-lệnh-điều-kiện"><i class="fa fa-check"></i><b>3.2.1</b> Câu lệnh điều kiện</a></li>
<li class="chapter" data-level="3.2.2" data-path="biến-trong-r.html"><a href="biến-trong-r.html#vòng-lặp"><i class="fa fa-check"></i><b>3.2.2</b> Vòng lặp</a></li>
<li class="chapter" data-level="3.2.3" data-path="biến-trong-r.html"><a href="biến-trong-r.html#viết-hàm-số"><i class="fa fa-check"></i><b>3.2.3</b> Viết hàm số</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="biến-trong-r.html"><a href="biến-trong-r.html#ma-trận-mảng-nhiều-chiều-và-list"><i class="fa fa-check"></i><b>3.3</b> Ma trận, mảng nhiều chiều và <span class="math inline">\(list\)</span></a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="biến-trong-r.html"><a href="biến-trong-r.html#ma-trận"><i class="fa fa-check"></i><b>3.3.1</b> Ma trận</a></li>
<li class="chapter" data-level="3.3.2" data-path="biến-trong-r.html"><a href="biến-trong-r.html#mảng-nhiều-chiều"><i class="fa fa-check"></i><b>3.3.2</b> Mảng nhiều chiều</a></li>
<li class="chapter" data-level="3.3.3" data-path="biến-trong-r.html"><a href="biến-trong-r.html#list"><i class="fa fa-check"></i><b>3.3.3</b> <span class="math inline">\(List\)</span></a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="biến-trong-r.html"><a href="biến-trong-r.html#các-hàm-họ-apply"><i class="fa fa-check"></i><b>3.4</b> Các hàm họ <span class="math inline">\(apply()\)</span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="phân-tích-dữ-liệu-bằng-r.html"><a href="phân-tích-dữ-liệu-bằng-r.html"><i class="fa fa-check"></i><b>4</b> Phân tích dữ liệu bằng R</a>
<ul>
<li class="chapter" data-level="4.1" data-path="phân-tích-dữ-liệu-bằng-r.html"><a href="phân-tích-dữ-liệu-bằng-r.html#nhập-dữ-liệu-từ-các-nguồn-khác-nhau-vào-r"><i class="fa fa-check"></i><b>4.1</b> Nhập dữ liệu từ các nguồn khác nhau vào R</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="phân-tích-dữ-liệu-bằng-r.html"><a href="phân-tích-dữ-liệu-bằng-r.html#data-frame-và-tibble"><i class="fa fa-check"></i><b>4.1.1</b> Data frame và Tibble</a></li>
<li class="chapter" data-level="4.1.2" data-path="phân-tích-dữ-liệu-bằng-r.html"><a href="phân-tích-dữ-liệu-bằng-r.html#nhập-dữ-liệu-vào-r-bằng-hàm-sẵn-có"><i class="fa fa-check"></i><b>4.1.2</b> Nhập dữ liệu vào R bằng hàm sẵn có</a></li>
<li class="chapter" data-level="4.1.3" data-path="phân-tích-dữ-liệu-bằng-r.html"><a href="phân-tích-dữ-liệu-bằng-r.html#nhập-dữ-liệu-vào-r-sử-dụng-gói-lệnh-readr."><i class="fa fa-check"></i><b>4.1.3</b> Nhập dữ liệu vào R sử dụng gói lệnh <span class="math inline">\(readr\)</span>.</a></li>
<li class="chapter" data-level="4.1.4" data-path="phân-tích-dữ-liệu-bằng-r.html"><a href="phân-tích-dữ-liệu-bằng-r.html#tương-tác-giữa-r-và-microsoft-excel"><i class="fa fa-check"></i><b>4.1.4</b> Tương tác giữa R và Microsoft Excel</a></li>
<li class="chapter" data-level="4.1.5" data-path="phân-tích-dữ-liệu-bằng-r.html"><a href="phân-tích-dữ-liệu-bằng-r.html#lấy-dữ-liệu-từ-một-hệ-cơ-sở-dữ-liệu"><i class="fa fa-check"></i><b>4.1.5</b> Lấy dữ liệu từ một hệ cơ sở dữ liệu</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="phân-tích-dữ-liệu-bằng-r.html"><a href="phân-tích-dữ-liệu-bằng-r.html#tiền-xử-lý-dữ-liệu"><i class="fa fa-check"></i><b>4.2</b> Tiền xử lý dữ liệu</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="phân-tích-dữ-liệu-bằng-r.html"><a href="phân-tích-dữ-liệu-bằng-r.html#tiền-xử-lý-dữ-liệu-là-gì"><i class="fa fa-check"></i><b>4.2.1</b> Tiền xử lý dữ liệu là gì?</a></li>
<li class="chapter" data-level="4.2.2" data-path="phân-tích-dữ-liệu-bằng-r.html"><a href="phân-tích-dữ-liệu-bằng-r.html#định-dạng-lại-các-cột-dữ-liệu-bằng-thư-viện-readr"><i class="fa fa-check"></i><b>4.2.2</b> Định dạng lại các cột dữ liệu bằng thư viện <span class="math inline">\(readr\)</span></a></li>
<li class="chapter" data-level="4.2.3" data-path="phân-tích-dữ-liệu-bằng-r.html"><a href="phân-tích-dữ-liệu-bằng-r.html#dữ-liệu-không-quan-sát-được"><i class="fa fa-check"></i><b>4.2.3</b> Dữ liệu không quan sát được</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="phân-tích-dữ-liệu-bằng-r.html"><a href="phân-tích-dữ-liệu-bằng-r.html#biến-đổi-dữ-liệu-bằng-thư-viện-dplyr"><i class="fa fa-check"></i><b>4.3</b> Biến đổi dữ liệu bằng thư viện <span class="math inline">\(dplyr()\)</span></a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="phân-tích-dữ-liệu-bằng-r.html"><a href="phân-tích-dữ-liệu-bằng-r.html#thêm-biến-bằng-hàm-mutate"><i class="fa fa-check"></i><b>4.3.1</b> Thêm biến bằng hàm <span class="math inline">\(mutate()\)</span></a></li>
<li class="chapter" data-level="4.3.2" data-path="phân-tích-dữ-liệu-bằng-r.html"><a href="phân-tích-dữ-liệu-bằng-r.html#lựa-chọn-cột-bằng-hàm-select"><i class="fa fa-check"></i><b>4.3.2</b> Lựa chọn cột bằng hàm <span class="math inline">\(select()\)</span></a></li>
<li class="chapter" data-level="4.3.3" data-path="phân-tích-dữ-liệu-bằng-r.html"><a href="phân-tích-dữ-liệu-bằng-r.html#lọc-quan-sát-bằng-hàm-filter"><i class="fa fa-check"></i><b>4.3.3</b> Lọc quan sát bằng hàm <span class="math inline">\(filter()\)</span></a></li>
<li class="chapter" data-level="4.3.4" data-path="phân-tích-dữ-liệu-bằng-r.html"><a href="phân-tích-dữ-liệu-bằng-r.html#sắp-xếp-dữ-liệu-bằng-hàm-arrange"><i class="fa fa-check"></i><b>4.3.4</b> Sắp xếp dữ liệu bằng hàm <span class="math inline">\(arrange()\)</span></a></li>
<li class="chapter" data-level="4.3.5" data-path="phân-tích-dữ-liệu-bằng-r.html"><a href="phân-tích-dữ-liệu-bằng-r.html#kết-hợp-các-hàm-bằng-toán-tử-pipe"><i class="fa fa-check"></i><b>4.3.5</b> Kết hợp các hàm bằng toán tử pipe (<span class="math inline">\(\%&gt;\%\)</span>)</a></li>
<li class="chapter" data-level="4.3.6" data-path="phân-tích-dữ-liệu-bằng-r.html"><a href="phân-tích-dữ-liệu-bằng-r.html#tổng-hợp-dữ-liệu-bằng-group_by-và-summarise"><i class="fa fa-check"></i><b>4.3.6</b> Tổng hợp dữ liệu bằng <span class="math inline">\(group\_by()\)</span> và <span class="math inline">\(summarise()\)</span></a></li>
<li class="chapter" data-level="4.3.7" data-path="phân-tích-dữ-liệu-bằng-r.html"><a href="phân-tích-dữ-liệu-bằng-r.html#section"><i class="fa fa-check"></i><b>4.3.7</b> </a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="phân-tích-dữ-liệu-bằng-r.html"><a href="phân-tích-dữ-liệu-bằng-r.html#trực-quan-hóa-dữ-liệu"><i class="fa fa-check"></i><b>4.4</b> Trực quan hóa dữ liệu</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="học-máy-không-có-giám-sát.html"><a href="học-máy-không-có-giám-sát.html"><i class="fa fa-check"></i><b>5</b> Học máy không có giám sát</a>
<ul>
<li class="chapter" data-level="5.1" data-path="học-máy-không-có-giám-sát.html"><a href="học-máy-không-có-giám-sát.html#phương-pháp-phân-tích-thành-phần-chính"><i class="fa fa-check"></i><b>5.1</b> Phương pháp phân tích thành phần chính</a></li>
<li class="chapter" data-level="5.2" data-path="học-máy-không-có-giám-sát.html"><a href="học-máy-không-có-giám-sát.html#các-phương-pháp-phân-cụm"><i class="fa fa-check"></i><b>5.2</b> Các phương pháp phân cụm</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="học-máy-không-có-giám-sát.html"><a href="học-máy-không-có-giám-sát.html#k-mean"><i class="fa fa-check"></i><b>5.2.1</b> K-mean</a></li>
<li class="chapter" data-level="5.2.2" data-path="học-máy-không-có-giám-sát.html"><a href="học-máy-không-có-giám-sát.html#hierarchical-clustering"><i class="fa fa-check"></i><b>5.2.2</b> Hierarchical Clustering</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="học-máy-không-có-giám-sát.html"><a href="học-máy-không-có-giám-sát.html#thực-hành"><i class="fa fa-check"></i><b>5.3</b> Thực hành:</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="mô-hình-hồi-quy-tuyến-tính.html"><a href="mô-hình-hồi-quy-tuyến-tính.html"><i class="fa fa-check"></i><b>6</b> Mô hình hồi quy tuyến tính</a>
<ul>
<li class="chapter" data-level="6.1" data-path="mô-hình-hồi-quy-tuyến-tính.html"><a href="mô-hình-hồi-quy-tuyến-tính.html#mô-hình-hổi-quy-tuyến-tính-đơn"><i class="fa fa-check"></i><b>6.1</b> Mô hình hổi quy tuyến tính đơn</a></li>
<li class="chapter" data-level="6.2" data-path="mô-hình-hồi-quy-tuyến-tính.html"><a href="mô-hình-hồi-quy-tuyến-tính.html#mô-hình-hồi-quy-tuyến-tính-đa-biến"><i class="fa fa-check"></i><b>6.2</b> Mô hình hồi quy tuyến tính đa biến</a></li>
<li class="chapter" data-level="6.3" data-path="mô-hình-hồi-quy-tuyến-tính.html"><a href="mô-hình-hồi-quy-tuyến-tính.html#những-cân-nhắc-khi-xây-dựng-mô-hình-hồi-quy-tuyến-tính"><i class="fa fa-check"></i><b>6.3</b> Những cân nhắc khi xây dựng mô hình hồi quy tuyến tính</a></li>
<li class="chapter" data-level="6.4" data-path="mô-hình-hồi-quy-tuyến-tính.html"><a href="mô-hình-hồi-quy-tuyến-tính.html#mở-rộng-mô-hình-hồi-quy-tuyến-tính"><i class="fa fa-check"></i><b>6.4</b> Mở rộng mô hình hồi quy tuyến tính</a></li>
<li class="chapter" data-level="6.5" data-path="mô-hình-hồi-quy-tuyến-tính.html"><a href="mô-hình-hồi-quy-tuyến-tính.html#thực-hành-xây-dựng-mô-hình-hổi-quy-tuyến-tính-cho-dữ-liệu-sales"><i class="fa fa-check"></i><b>6.5</b> Thực hành: Xây dựng mô hình hổi quy tuyến tính cho dữ liệu Sales</a></li>
<li class="chapter" data-level="6.6" data-path="mô-hình-hồi-quy-tuyến-tính.html"><a href="mô-hình-hồi-quy-tuyến-tính.html#thực-hành-mô-hình-hổi-quy-tuyến-tính-mở-rộng"><i class="fa fa-check"></i><b>6.6</b> Thực hành: Mô hình hổi quy tuyến tính mở rộng</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="mô-hình-hồi-quy-tuyến-tính-tổng-quát.html"><a href="mô-hình-hồi-quy-tuyến-tính-tổng-quát.html"><i class="fa fa-check"></i><b>7</b> Mô hình hồi quy tuyến tính tổng quát</a>
<ul>
<li class="chapter" data-level="7.1" data-path="mô-hình-hồi-quy-tuyến-tính-tổng-quát.html"><a href="mô-hình-hồi-quy-tuyến-tính-tổng-quát.html#biến-ngẫu-nhiên-có-hàm-mật-độ-dạng-hàm-số-mũ"><i class="fa fa-check"></i><b>7.1</b> Biến ngẫu nhiên có hàm mật độ dạng hàm số mũ</a></li>
<li class="chapter" data-level="7.2" data-path="mô-hình-hồi-quy-tuyến-tính-tổng-quát.html"><a href="mô-hình-hồi-quy-tuyến-tính-tổng-quát.html#tổng-quát-hóa-mô-hình-tuyến-tính"><i class="fa fa-check"></i><b>7.2</b> Tổng quát hóa mô hình tuyến tính</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="mô-hình-hồi-quy-tuyến-tính-tổng-quát.html"><a href="mô-hình-hồi-quy-tuyến-tính-tổng-quát.html#vấn-đề-gặp-phải-khi-sử-dụng-mô-hình-hồi-quy-tuyến-tính-với-dữ-liệu-thực-tế"><i class="fa fa-check"></i><b>7.2.1</b> Vấn đề gặp phải khi sử dụng mô hình hồi quy tuyến tính với dữ liệu thực tế</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="mô-hình-hồi-quy-tuyến-tính-tổng-quát.html"><a href="mô-hình-hồi-quy-tuyến-tính-tổng-quát.html#biến-độc-lập-rời-rạc"><i class="fa fa-check"></i><b>7.3</b> Biến độc lập rời rạc</a></li>
<li class="chapter" data-level="7.4" data-path="mô-hình-hồi-quy-tuyến-tính-tổng-quát.html"><a href="mô-hình-hồi-quy-tuyến-tính-tổng-quát.html#biến-độc-lập-là-biến-liên-tục"><i class="fa fa-check"></i><b>7.4</b> Biến độc lập là biến liên tục</a></li>
<li class="chapter" data-level="7.5" data-path="mô-hình-hồi-quy-tuyến-tính-tổng-quát.html"><a href="mô-hình-hồi-quy-tuyến-tính-tổng-quát.html#thực-hành-1"><i class="fa fa-check"></i><b>7.5</b> Thực hành</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="mô-hình-hồi-quy-tuyến-tính-tổng-quát.html"><a href="mô-hình-hồi-quy-tuyến-tính-tổng-quát.html#chấm-điểm-tín-dụng-khách-hàng-bằng-hồi-quy-logistic"><i class="fa fa-check"></i><b>7.5.1</b> Chấm điểm tín dụng khách hàng bằng hồi quy Logistic</a></li>
<li class="chapter" data-level="7.5.2" data-path="mô-hình-hồi-quy-tuyến-tính-tổng-quát.html"><a href="mô-hình-hồi-quy-tuyến-tính-tổng-quát.html#nghiên-cứu-kinh-nghiệm-dữ-liệu-bồi-thường-bảo-hiểm-y-tế"><i class="fa fa-check"></i><b>7.5.2</b> Nghiên cứu kinh nghiệm dữ liệu bồi thường bảo hiểm y tế</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="mô-hình-dạng-cây.html"><a href="mô-hình-dạng-cây.html"><i class="fa fa-check"></i><b>8</b> Mô hình dạng cây</a>
<ul>
<li class="chapter" data-level="8.1" data-path="mô-hình-dạng-cây.html"><a href="mô-hình-dạng-cây.html#cây-quyết-định-và-bài-toán-hồi-quy"><i class="fa fa-check"></i><b>8.1</b> Cây quyết định và bài toán hồi quy</a></li>
<li class="chapter" data-level="8.2" data-path="mô-hình-dạng-cây.html"><a href="mô-hình-dạng-cây.html#cây-quyết-định-trong-bài-toán-phân-loại"><i class="fa fa-check"></i><b>8.2</b> Cây quyết định trong bài toán phân loại</a></li>
<li class="chapter" data-level="8.3" data-path="mô-hình-dạng-cây.html"><a href="mô-hình-dạng-cây.html#các-kỹ-thuật-kết-hợp-nhiều-cây-quyết-định"><i class="fa fa-check"></i><b>8.3</b> Các kỹ thuật kết hợp nhiều cây quyết định</a></li>
<li class="chapter" data-level="8.4" data-path="mô-hình-dạng-cây.html"><a href="mô-hình-dạng-cây.html#thực-hành-2"><i class="fa fa-check"></i><b>8.4</b> Thực hành:</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="mô-hình-dạng-cây.html"><a href="mô-hình-dạng-cây.html#so-sánh-random-forest-boosting-và-mô-hình-tuyến-tính-trên-dữ-liệu-sales."><i class="fa fa-check"></i><b>8.4.1</b> So sánh random forest, boosting, và mô hình tuyến tính trên dữ liệu Sales.</a></li>
<li class="chapter" data-level="8.4.2" data-path="mô-hình-dạng-cây.html"><a href="mô-hình-dạng-cây.html#so-sánh-random-forest-boosting-và-logistic-regression-trên-dữ-liệu-tín-dụng-khách-hàng."><i class="fa fa-check"></i><b>8.4.2</b> So sánh random forest, boosting, và logistic regression trên dữ liệu tín dụng khách hàng.</a></li>
<li class="chapter" data-level="8.4.3" data-path="mô-hình-dạng-cây.html"><a href="mô-hình-dạng-cây.html#so-sánh-random-forest-boosting-và-poisson-regression-trên-dữ-liệu-bồi-thường-bảo-hiểm."><i class="fa fa-check"></i><b>8.4.3</b> So sánh random forest, boosting, và Poisson regression trên dữ liệu bồi thường bảo hiểm.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="mô-hình-mạng-neural-network.html"><a href="mô-hình-mạng-neural-network.html"><i class="fa fa-check"></i><b>9</b> Mô hình mạng neural network</a>
<ul>
<li class="chapter" data-level="9.1" data-path="mô-hình-mạng-neural-network.html"><a href="mô-hình-mạng-neural-network.html#mạng-neural-với-một-layer-duy-nhất"><i class="fa fa-check"></i><b>9.1</b> Mạng neural với một layer duy nhất</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="mô-hình-mạng-neural-network.html"><a href="mô-hình-mạng-neural-network.html#hồi-quy-logistic-là-một-mạng-nơ-ron-không-có-layer-ẩn"><i class="fa fa-check"></i><b>9.1.1</b> Hồi quy logistic là một mạng nơ-ron không có layer ẩn</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="mô-hình-mạng-neural-network.html"><a href="mô-hình-mạng-neural-network.html#mạng-neural-với-nhiều-layer-ẩn."><i class="fa fa-check"></i><b>9.2</b> Mạng neural với nhiều layer ẩn.</a></li>
<li class="chapter" data-level="9.3" data-path="mô-hình-mạng-neural-network.html"><a href="mô-hình-mạng-neural-network.html#ước-lượng-tham-số-cho-mạng-neural-network"><i class="fa fa-check"></i><b>9.3</b> Ước lượng tham số cho mạng neural network</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="mô-hình-mạng-neural-network.html"><a href="mô-hình-mạng-neural-network.html#backpropagation"><i class="fa fa-check"></i><b>9.3.1</b> Backpropagation</a></li>
<li class="chapter" data-level="9.3.2" data-path="mô-hình-mạng-neural-network.html"><a href="mô-hình-mạng-neural-network.html#regularization-and-stochastic-gradient-descent"><i class="fa fa-check"></i><b>9.3.2</b> Regularization and Stochastic Gradient Descent</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="mô-hình-mạng-neural-network.html"><a href="mô-hình-mạng-neural-network.html#thực-hành-3"><i class="fa fa-check"></i><b>9.4</b> Thực hành:</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="mô-hình-mạng-neural-network.html"><a href="mô-hình-mạng-neural-network.html#sử-dụng-mạng-neural-network-trong-phân-loại-văn-bản."><i class="fa fa-check"></i><b>9.4.1</b> Sử dụng mạng neural network trong phân loại văn bản.</a></li>
<li class="chapter" data-level="9.4.2" data-path="mô-hình-mạng-neural-network.html"><a href="mô-hình-mạng-neural-network.html#sử-dụng-mạng-neural-network-tích-chập-với-dữ-liệu-mnist."><i class="fa fa-check"></i><b>9.4.2</b> Sử dụng mạng neural network tích chập với dữ liệu <span class="math inline">\(mnist()\)</span>.</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="biến-trong-r" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chương 3</span> Biến trong R<a href="biến-trong-r.html#biến-trong-r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Biến là khái niệm cơ bản nhất trong mọi ngôn ngữ lập trình. Có bốn loại biến cơ bản trong R bao gồm có biến kiểu số, biến kiểu ký tự, biến kiểu logic, và biến kiểu thời gian. Mỗi kiểu biến sẽ được thảo luận cụ thể trong phần tiếp theo của cuốn sách.</p>
<p>Để tạo một biến trong R bạn đọc sử dụng một trong ba cách như sau</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="biến-trong-r.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cách thứ nhất</span></span>
<span id="cb15-2"><a href="biến-trong-r.html#cb15-2" aria-hidden="true" tabindex="-1"></a>variable_name <span class="ot">&lt;-</span> variable_value <span class="co"># dấu &quot;&lt;-&quot; là dấu gán giá trị</span></span>
<span id="cb15-3"><a href="biến-trong-r.html#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Cách thứ hai</span></span>
<span id="cb15-4"><a href="biến-trong-r.html#cb15-4" aria-hidden="true" tabindex="-1"></a>variable_value <span class="ot">-&gt;</span> variable_name</span>
<span id="cb15-5"><a href="biến-trong-r.html#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Cách thứ ba</span></span>
<span id="cb15-6"><a href="biến-trong-r.html#cb15-6" aria-hidden="true" tabindex="-1"></a>variable_name <span class="ot">=</span> variable_value <span class="co"># dấu &quot;=&quot; cũng được sử dụng để gán giá trị</span></span></code></pre></div>
<p>Trong đó “variable_name” là tên biến mà bạn muốn đặt, variable_value là giá trị mà bạn muốn gán cho biến. Ký tự gán giá trị “&lt;-” được sử dụng trong các phiên bản R đầu tiên. Từ năm 2001 trở đi, dấu “=” cũng có thể được sử dụng.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="biến-trong-r.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cách thứ nhất</span></span>
<span id="cb16-2"><a href="biến-trong-r.html#cb16-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">3</span>  <span class="co"># tạo một biến tên là x có giá trị bằng 3</span></span>
<span id="cb16-3"><a href="biến-trong-r.html#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Cách thứ hai</span></span>
<span id="cb16-4"><a href="biến-trong-r.html#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;MFE&quot;</span> <span class="ot">-&gt;</span> y <span class="co"># tao một biến tên là y có giá trị bằng đoạn ký tự &quot;MFE&quot;</span></span>
<span id="cb16-5"><a href="biến-trong-r.html#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Cách thứ ba</span></span>
<span id="cb16-6"><a href="biến-trong-r.html#cb16-6" aria-hidden="true" tabindex="-1"></a>z <span class="ot">=</span> <span class="dv">1</span> <span class="sc">+</span> <span class="dv">2</span> <span class="co"># tạo một biến tên là z và nhận giá trị bằng kết quả của phép cộng</span></span></code></pre></div>
<p>Trong R, tên biến có thể là tổ hợp của tất cả các chữ cái viết hoa, chữ cái viết thường và các chữ số. Trong tên biến có thể chứa hai ký tự đặc biệt là “.” và “<em>" tuy nhiên tên biến không được phép bắt đầu bằng số hoặc ký tự "</em>”. Bạn đọc có thử chạy các câu lệnh tạo biến dưới đây và kiểm tra xem dòng lệnh nào báo lỗi và dòng lệnh nào không báo lỗi</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="biến-trong-r.html#cb17-1" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="co"># biến tên x1 sẽ được tạo với giá trị bằng 3</span></span>
<span id="cb17-2"><a href="biến-trong-r.html#cb17-2" aria-hidden="true" tabindex="-1"></a>1x <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="co"># sẽ báo lỗi vì tên biến không được phép bắt đầu bằng số</span></span>
<span id="cb17-3"><a href="biến-trong-r.html#cb17-3" aria-hidden="true" tabindex="-1"></a>.x <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="co"># biến tên .x sẽ được tạo với giá trị bằng 3</span></span>
<span id="cb17-4"><a href="biến-trong-r.html#cb17-4" aria-hidden="true" tabindex="-1"></a>_x <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="co"># sẽ báo lỗi vì tên biến không được phép bắt đầu bằng số</span></span></code></pre></div>
<p>Lưu ý rằng R phân biệt chữ hoa với chữ thường trong tên biến</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="biến-trong-r.html#cb18-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="dv">3</span> <span class="co"># tạo một biến tên x nhận giá trị bằng 3</span></span>
<span id="cb18-2"><a href="biến-trong-r.html#cb18-2" aria-hidden="true" tabindex="-1"></a>X<span class="ot">&lt;-</span><span class="dv">5</span> <span class="co"># tạo một biến tên X nhận giá trị bằng 5</span></span>
<span id="cb18-3"><a href="biến-trong-r.html#cb18-3" aria-hidden="true" tabindex="-1"></a>X<span class="sc">-</span>x <span class="co"># hiệu số nhận giá trị bằng 2 do x và X là khác nhau</span></span></code></pre></div>
<p>Để xem biến nhận giá trị nào, bạn đọc có thể kiểm tra trên cửa sổ Environment ở góc phía trên bên phải của Rstudio hoặc gõ trực tiếp tên biến lên một dòng lệnh mới trên cửa sổ Console sau đó cho dòng lệnh chạy. Để xóa một biến, bạn đọc sử dụng lệnh <span class="math display">\[rm()\]</span></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="biến-trong-r.html#cb19-1" aria-hidden="true" tabindex="-1"></a>x <span class="co"># R Console sẽ cho biết giá trị bằng 3</span></span>
<span id="cb19-2"><a href="biến-trong-r.html#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(x) <span class="co"># xóa biến x khỏi ứng dụng Rstudio đang chạy</span></span>
<span id="cb19-3"><a href="biến-trong-r.html#cb19-3" aria-hidden="true" tabindex="-1"></a>x <span class="co"># sau khi xóa biến x sẽ không còn tồn tại nên R sẽ báo lỗi</span></span></code></pre></div>
<p>Một điều cũng cần lưu ý khi đặt tên biến, hay tên bất kỳ một đối tượng nào khác trong R như vector, ma trận, data.frame()… đó là tên biến không được phép trùng với các từ khóa thông dụng hay dùng trong ngôn ngữ R. Danh sách các từ khóa nằm trong bảng dưới đây</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-5">Table 3.1: </span>Danh sách các từ khóa không được dùng để đặt tên
</caption>
<thead>
<tr>
<th style="text-align:left;">
Từ khóa
</th>
<th style="text-align:left;">
Sử dụng trong ngữ cảnh
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
If, else
</td>
<td style="text-align:left;">
Câu lệnh điều kiện
</td>
</tr>
<tr>
<td style="text-align:left;">
for, while, in , repeat
</td>
<td style="text-align:left;">
Vòng lặp
</td>
</tr>
<tr>
<td style="text-align:left;">
function
</td>
<td style="text-align:left;">
Khai báo hàm số
</td>
</tr>
<tr>
<td style="text-align:left;">
break, next
</td>
<td style="text-align:left;">
Điều khiển vòng lặp
</td>
</tr>
<tr>
<td style="text-align:left;">
TRUE, FALSE
</td>
<td style="text-align:left;">
Tên các biến logic
</td>
</tr>
<tr>
<td style="text-align:left;">
Inf, -Inf, NaN, NA
</td>
<td style="text-align:left;">
Các biến kiểu số dạng đặc biệt
</td>
</tr>
</tbody>
</table>
<div id="biến-kiểu-số" class="section level3 hasAnchor" number="3.0.1">
<h3><span class="header-section-number">3.0.1</span> Biến kiểu số<a href="biến-trong-r.html#biến-kiểu-số" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Biến kiếu số, được gọi là , nhận giá trị kiểu số thập phân. Để tạo một biến kiểu số, hoặc bất kì một kiểu biến nào khác, bạn đọc hãy khởi tạo biến bằng một giá trị bất kỳ có kiểu như bạn mong muốn.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="biến-trong-r.html#cb20-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span> <span class="co"># do 5 là giá trị kiểu số nên R sẽ hiểu x là biến kiểu số</span></span></code></pre></div>
<p>Để kiểm tra xem  có phải là biến kiểu số không, bạn đọc sử dụng hàm . Nhìn chung, để biết một biến bất kỳ là kiểu biến nào, bạn đọc sử dụng hàm </p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="biến-trong-r.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(x) <span class="co"># do 5 là giá trị kiểu số nên R trả lời TRUE</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="biến-trong-r.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x) <span class="co"># do 5 là giá trị kiểu số nên R sẽ hiểu x là biến kiểu số (numeric)</span></span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p>Biến kiểu số tự nhiên (integer) là kiểu biến dạng số nguyên. Trong phép gán cho giá trị của biến  ở trên, mặc dù giá trị khởi tạo (5) là số nguyên nhưng R vẫn mặc định cho rằng  là số thập phân. Để tạo một biến kiểu số nguyên trong R, bạn đọc sử dụng chữ “L” phía sau số nguyên để báo cho R biết biến muốn khởi tạo là số tự nhiên. Chữ L là viết tắt cho “Long” nghĩa là số nguyên dạng  trong các ngôn ngữ lập trình cơ bản như . Số nguyên dạng  cần 32 bytes để lưu và nhận giá trị từ −2,147,483,648 (<span class="math inline">\(-2^31\)</span>) đến 2,147,483,647 (<span class="math inline">\(2^31-1\)</span>).</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="biến-trong-r.html#cb25-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span>5L <span class="co"># 5L nghĩa là số nguyên 5, L là viết tắt của Long</span></span>
<span id="cb25-2"><a href="biến-trong-r.html#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x) <span class="co"># sẽ trả lại giá trị là số tự nhiên</span></span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="biến-trong-r.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(x) <span class="co"># x sẽ không còn là số thập phân nữa nên R sẽ trả lại FALSE</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Việc phân biệt số nguyên và số thập phân trong các ngôn ngữ lập trình có ý nghĩa khi bạn đọc cần tiết kiệm bộ nhớ cho chương trình. Nhìn chung, việc sử dụng số thập phân thay cho số nguyên sẽ khiến cho chương trình của bạn đọc cần dung lượng bộ nhớ tăng gấp 2 lần. Hình vẽ dưới đây mô tả dung lượng bộ nhớ cần sử dụng cho các vector dạng số nguyên và số thập phân với độ dài từ 1 đến 100. Không có sự khác biệt về bộ nhớ cho vector có độ dài dưới 10 nhưng khi vector có độ dài từ 10 trở lên, vector dạng số thập phân cần trung bình khoảng 2 lần bộ nhớ so với vector dạng số nguyên.</p>
<p><img src="bookdown-demo_files/figure-html/code%20I.2.8-1.png" width="672" /></p>
<p>Các phép tính toán thông thường được sử dụng với biến dạng số được mô tả trong bảng phía dưới</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-6">Table 3.2: </span>Các phép toán cơ bản với biến kiểu số
</caption>
<thead>
<tr>
<th style="text-align:left;">
Ký hiệu
</th>
<th style="text-align:left;">
Phép tính
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
‘+’
</td>
<td style="text-align:left;">
Phép tính cộng
</td>
</tr>
<tr>
<td style="text-align:left;">
‘-’
</td>
<td style="text-align:left;">
Phép tính trừ
</td>
</tr>
<tr>
<td style="text-align:left;">
’*’
</td>
<td style="text-align:left;">
Phép tính nhân
</td>
</tr>
<tr>
<td style="text-align:left;">
‘/’
</td>
<td style="text-align:left;">
Phép tính chia
</td>
</tr>
<tr>
<td style="text-align:left;">
‘^’
</td>
<td style="text-align:left;">
Phép tính lũy thừa
</td>
</tr>
<tr>
<td style="text-align:left;">
‘log()’
</td>
<td style="text-align:left;">
Phép lấy loga cơ số tự nhiên
</td>
</tr>
<tr>
<td style="text-align:left;">
‘log(.,a)’
</td>
<td style="text-align:left;">
Phép lấy loga cơ số a
</td>
</tr>
<tr>
<td style="text-align:left;">
‘%%’
</td>
<td style="text-align:left;">
Phép lấy phần dư trong phép chia
</td>
</tr>
<tr>
<td style="text-align:left;">
‘%/%’
</td>
<td style="text-align:left;">
Phép lấy phần nguyên của kết quả trong phép chia
</td>
</tr>
</tbody>
</table>
<p>Trong R, các phép toán <span class="math inline">\(%%\)</span> và <span class="math inline">\(%\%\)</span> có thể thực hiện được với cả số dạng thập phân</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="biến-trong-r.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fl">6.5</span> <span class="sc">%%</span> <span class="dv">2</span> <span class="co"># phần dư của phép chia 6.5 cho 2, R sẽ trả kết quả là 1.5</span></span></code></pre></div>
<pre><code>## [1] 0.5</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="biến-trong-r.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fl">6.5</span> <span class="sc">%/%</span> <span class="dv">2</span> <span class="co"># phần nguyên của kết quả của phép chia 6.5 cho 2</span></span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Ngoài việc gán cho biến các giá trị số thập phân thông thường, bạn đọc có thể sử dụng các giá trị kiểu số đặc biệt trong R. Các giá trị đặc biệt này bao gồm có</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-7">Table 3.3: </span>Các giá trị số đặc biệt
</caption>
<thead>
<tr>
<th style="text-align:left;">
Loại số
</th>
<th style="text-align:left;">
Ý nghĩa
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1.2e+10
</td>
<td style="text-align:left;">
nghĩa là nhân số ở phía trước với
</td>
</tr>
<tr>
<td style="text-align:left;">
1.2e-5
</td>
<td style="text-align:left;">
nghĩa là nhân số ở phía trước với
</td>
</tr>
<tr>
<td style="text-align:left;">
Inf
</td>
<td style="text-align:left;">
Số dương vô cùng
</td>
</tr>
<tr>
<td style="text-align:left;">
-Inf
</td>
<td style="text-align:left;">
Số âm vô cùng
</td>
</tr>
<tr>
<td style="text-align:left;">
NaN
</td>
<td style="text-align:left;">
NaN là viết tắt của Not a Number, là kết quả của các phép tính không có nghĩa
</td>
</tr>
</tbody>
</table>
<p>Bạn đọc có thể thử tính toán trên các giá trị đặc biệt và kiểm tra kết quả</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="biến-trong-r.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">/</span><span class="dv">0</span> <span class="co"># kêt quả của 1/0 là dương vô cùng (Inf)</span></span>
<span id="cb33-2"><a href="biến-trong-r.html#cb33-2" aria-hidden="true" tabindex="-1"></a>(<span class="sc">-</span><span class="dv">1</span>)<span class="sc">/</span><span class="dv">0</span> <span class="co"># kêt quả của 1/0 là âm vô cùng (-Inf)</span></span>
<span id="cb33-3"><a href="biến-trong-r.html#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="cn">Inf</span> <span class="sc">-</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">10</span> <span class="co"># Trong các phép tính có Inf sẽ dẫn đến kết quả là Inf</span></span>
<span id="cb33-4"><a href="biến-trong-r.html#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">/</span><span class="dv">0</span> <span class="sc">+</span> (<span class="sc">-</span><span class="dv">1</span>)<span class="sc">/</span><span class="dv">0</span> <span class="co"># Inf + (-Inf) là không thể xác định được (NaN)</span></span>
<span id="cb33-5"><a href="biến-trong-r.html#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="sc">-</span><span class="dv">2</span>) <span class="co"># Kết quả của các phép tính không có nghĩa là NaN</span></span></code></pre></div>
</div>
<div id="biến-kiểu-logic" class="section level3 hasAnchor" number="3.0.2">
<h3><span class="header-section-number">3.0.2</span> Biến kiểu logic<a href="biến-trong-r.html#biến-kiểu-logic" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Biến kiểu logic là biến đơn giản nhất, nhưng lại là kiểu biến quan trọng nhất trong mọi ngôn ngữ lập trình. Biến kiểu logic chỉ nhận một trong hai giá trị là <span class="math inline">\(TRUE\)</span> hoặc <span class="math inline">\(FALSE\)</span>. Do R phân biệt chữ viết hoa và chữ viết thường nên bạn đọc lưu ý khi viết giá trị cho biến dạng logic. Để tạo một biến dạng logic, bạn đọc tạo tên biến và gán giá trị logic cho biến đó giống như đối với biến dạng số</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="biến-trong-r.html#cb34-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="cn">TRUE</span></span></code></pre></div>
<p>Biến dạng logic có thể đặt trong các phép tính toán giống như biến dạng số. Khi gặp một công thức có bao gồm biến dạng số và biến dạng logic, R sẽ đổi biến logic nhận giá trị <span class="math inline">\(TRUE\)</span> sang số 1 và biến logic có giá trị <span class="math inline">\(FALSE\)</span> sang số 0 sau đó thực hiện phép tính toán như thường.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="biến-trong-r.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">+</span> <span class="cn">TRUE</span> <span class="sc">*</span> <span class="dv">10</span> <span class="co"># Sẽ cho kết quả giống như 0 + 1 * 10</span></span></code></pre></div>
<p>Trong thực tế, hiếm khi chúng ta cần phải khởi tạo giá trị cho biến logic như trên, mà biến logic thường nhận được từ kết quả các phép so sánh trong R. Các phép toán so sánh trong R bao gồm có</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-8">Table 3.4: </span>Các phép so sánh cơ bản
</caption>
<thead>
<tr>
<th style="text-align:left;">
Phép so sánh
</th>
<th style="text-align:left;">
Ý nghĩa
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
&lt;
</td>
<td style="text-align:left;">
Có nhỏ hơn không?
</td>
</tr>
<tr>
<td style="text-align:left;">
&gt;
</td>
<td style="text-align:left;">
Có lớn hơn không?
</td>
</tr>
<tr>
<td style="text-align:left;">
&lt;=
</td>
<td style="text-align:left;">
Có nhỏ hơn hoặc bằng không?
</td>
</tr>
<tr>
<td style="text-align:left;">
&gt;=
</td>
<td style="text-align:left;">
Có lớn hơn hoặc bằng không?
</td>
</tr>
<tr>
<td style="text-align:left;">
==
</td>
<td style="text-align:left;">
Có bằng nhau không?
</td>
</tr>
<tr>
<td style="text-align:left;">
!=
</td>
<td style="text-align:left;">
Có khác nhau không?
</td>
</tr>
</tbody>
</table>
<p>Ngoài ra, các biến logic còn là kết quả của việc kết hợp nhiều biến logic khác bằng các toán tử logic và, hoặc và phủ định</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-9">Table 3.5: </span>Các toán tử logic
</caption>
<thead>
<tr>
<th style="text-align:left;">
Toán tử logic
</th>
<th style="text-align:left;">
Ý nghĩa
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
&amp;
</td>
<td style="text-align:left;">
Toán tử Và; A&amp;B đọc là mệnh đề A và mệnh đề B
</td>
</tr>
<tr>
<td style="text-align:left;">
|
</td>
<td style="text-align:left;">
Toán tử Hoặc; A|B đọc là mệnh đề A hoặc mệnh đề B
</td>
</tr>
<tr>
<td style="text-align:left;">
!
</td>
<td style="text-align:left;">
Toán tử Phủ định; Toán tử này lại biến logic đứng sau
</td>
</tr>
</tbody>
</table>
<p>Bạn đọc nên ghi nhớ quy tắc kết hợp các biến logic với các toán tử logic như bảng dưới đây</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-10">Table 3.6: </span>Kết hợp biến logic với các toán tử logic
</caption>
<thead>
<tr>
<th style="text-align:left;">
Kết hợp
</th>
<th style="text-align:left;">
Kết quả
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
!TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
!FASLE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
TRUE &amp; TRUE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
TRUE &amp; FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE &amp; TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
TRUE | TRUE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
TRUE | FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE | TRUE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
</tbody>
</table>
<p>Như đã đề cập ở phần trước, các biến dạng logic khi đặt trong các biểu thức tính toán kiểu số sẽ tự động chuyển đổi sang biến kiểu số trước khi thực hiện phép tính. Ngược lại, khi biến kiểu số xuất hiện trong các biểu thức có toán tử logic, biến kiểu số cũng sẽ được chuyển sang kiểu logic. Tuy nhiên, bạn đọc lưu ý rằng “số 0 đặt trong biểu thức có toán tử logic sẽ chuyển sang thành <span class="math inline">\(FALSE\)</span> và mọi số khác 0 khi đổi sang dạng logic đều chuyển thành <span class="math inline">\(TRUE\)</span>”</p>
<p>Bạn đọc có thể thực hành việc tính toán trên các toán tử logic như dưới đây. Thay vì chỉ yêu cầu R trả lại kết quả, hãy thử suy nghĩ trước xem các biểu thức sau đây cho kết quả như thế nào.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="biến-trong-r.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1.</span></span>
<span id="cb36-2"><a href="biến-trong-r.html#cb36-2" aria-hidden="true" tabindex="-1"></a>(<span class="dv">1</span><span class="sc">&lt;=</span><span class="dv">2</span>) <span class="sc">|</span> (<span class="dv">2</span><span class="sc">&lt;=</span><span class="dv">3</span>)</span>
<span id="cb36-3"><a href="biến-trong-r.html#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 2.</span></span>
<span id="cb36-4"><a href="biến-trong-r.html#cb36-4" aria-hidden="true" tabindex="-1"></a>(<span class="dv">1</span><span class="sc">&lt;=</span><span class="dv">2</span>) <span class="sc">+</span> (<span class="dv">2</span><span class="sc">&lt;=</span><span class="dv">3</span>)</span>
<span id="cb36-5"><a href="biến-trong-r.html#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 3.</span></span>
<span id="cb36-6"><a href="biến-trong-r.html#cb36-6" aria-hidden="true" tabindex="-1"></a>((<span class="dv">1</span><span class="sc">&lt;=</span><span class="dv">2</span>) <span class="sc">*</span> (<span class="dv">2</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">==</span> <span class="dv">4</span>)) <span class="sc">|</span> (<span class="dv">2</span><span class="sc">!=</span><span class="dv">3</span>) <span class="co"># </span></span>
<span id="cb36-7"><a href="biến-trong-r.html#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 4.</span></span>
<span id="cb36-8"><a href="biến-trong-r.html#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span>((<span class="dv">1</span><span class="sc">&lt;=</span><span class="dv">2</span>) <span class="sc">*</span> (<span class="dv">2</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">==</span> <span class="dv">4</span>)) <span class="sc">&amp;</span> <span class="sc">!</span>(<span class="dv">2</span><span class="sc">!=</span><span class="dv">3</span>) <span class="co"># </span></span>
<span id="cb36-9"><a href="biến-trong-r.html#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 5.</span></span>
<span id="cb36-10"><a href="biến-trong-r.html#cb36-10" aria-hidden="true" tabindex="-1"></a>((<span class="dv">2</span> <span class="sc">+</span> <span class="dv">2</span>) <span class="sc">|</span> (<span class="dv">2</span> <span class="sc">-</span> <span class="dv">2</span>)) <span class="sc">&amp;</span> <span class="sc">!</span>(<span class="dv">2</span> <span class="sc">^</span> <span class="dv">2</span>) <span class="co">#</span></span></code></pre></div>
</div>
<div id="biến-kiểu-ký-tự" class="section level3 hasAnchor" number="3.0.3">
<h3><span class="header-section-number">3.0.3</span> Biến kiểu ký tự<a href="biến-trong-r.html#biến-kiểu-ký-tự" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Biến kiểu ký tự trong R cũng giống như biến kiểu xâu ký tự (string) trong các ngôn ngữ lập trình khác. Trong R, biến kiểu ký tự được gọi là kiểu character. Biến kiểu ký tự trong R có thể chỉ ngắn gọn là một chữ cái, và đôi khi có thể là cả một câu hoặc cả một đoạn văn dài. Khi làm việc với biến kiểu ký tự, cần ghi nhớ rằng R phân biệt chữ viết hoa và chữ viết thường.</p>
<p>Để tạo một biến có kiểu ký tự trong R, bạn đọc chỉ cần khởi tạo cho biến bằng giá trị kiểu ký tự. R sẽ hiểu một giá trị khi giá trị đó nằm trong dấu ngoặc kép hoặc cũng có thể trong dấu ngoặc đơn (’).</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="biến-trong-r.html#cb37-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="st">&quot;Ice cream&quot;</span> <span class="co"># &quot;Ice cream&quot; với chữ I viết hoa sẽ khác &quot;ice cream&quot; khi i là chữ thường</span></span>
<span id="cb37-2"><a href="biến-trong-r.html#cb37-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">==</span> <span class="st">&quot;ice cream&quot;</span> <span class="co"># sẽ trả ra giá trị là FALSE</span></span></code></pre></div>
<p>Để kiểm tra một biến có phải dạng biến character không, bạn đọc có thể dùng hàm <span style="color: orange;">is.character()</span></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="biến-trong-r.html#cb38-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="st">&quot;Ice cream&quot;</span>; <span class="fu">is.character</span>(x)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Khi xử lý biến kiểu ký tự, bạn đọc nên sử dụng các hàm số đã được xây dựng sẵn trong R. Bảng dưới đây liệt kê danh sách các hàm thường sử dụng</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-11">Table 3.7: </span>Các hàm thường sử dụng khi làm việc với chuỗi ký tự
</caption>
<thead>
<tr>
<th style="text-align:left;">
Hàm số
</th>
<th style="text-align:left;">
Ý nghĩa
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
nchar(x)
</td>
<td style="text-align:left;">
Cho biêt biến x dạng chuỗi ký tự có bao nhiêu ký tự
</td>
</tr>
<tr>
<td style="text-align:left;">
paste(x1,x2,sep = a)
</td>
<td style="text-align:left;">
Ghép hai chuỗi ký tự x1 và x2 thành một chuỗi ký tự cách nhau chuỗi ký tự a
</td>
</tr>
<tr>
<td style="text-align:left;">
toupper(x)
</td>
<td style="text-align:left;">
Chuyển tất cả các chữ viêt thường trong x thành chữ viết hoa
</td>
</tr>
<tr>
<td style="text-align:left;">
tolower(x)
</td>
<td style="text-align:left;">
Chuyển tất cả các chữ viết hoa trong x thành chữ viết thường
</td>
</tr>
<tr>
<td style="text-align:left;">
chartr(a,b,x)
</td>
<td style="text-align:left;">
Thay thế từng ký tự của a tương ứng bằng ký tụ của b trong x, a và b phải có độ dài bằng nhau
</td>
</tr>
<tr>
<td style="text-align:left;">
substr(x,n1,n2)
</td>
<td style="text-align:left;">
Lấy ra chuỗi ký tự con từ x, lấy từ ký tự thứ n1 đến ký tự thứ n2
</td>
</tr>
<tr>
<td style="text-align:left;">
sub(a, b, x)
</td>
<td style="text-align:left;">
Đoạn ký tự a đầu tiên trong x sẽ được thay thế bằng đoạn ký tự b
</td>
</tr>
<tr>
<td style="text-align:left;">
gsub(a, b, x)
</td>
<td style="text-align:left;">
Tất cả các đoạn ký tự giống a trong x sẽ được thay thế bằng b
</td>
</tr>
<tr>
<td style="text-align:left;">
grepl(a,x)
</td>
<td style="text-align:left;">
Trả lại giá trị là biến TRUE nếu đoạn ký tự a nằm trong biến x
</td>
</tr>
</tbody>
</table>
<p>Bạn đọc hãy thử chạy các hàm như phía dưới và quan sát giá trị trả ra của các hàm để hiểu cách áp dụng</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="biến-trong-r.html#cb40-1" aria-hidden="true" tabindex="-1"></a>x1<span class="ot">&lt;-</span><span class="st">&quot;I am an Actuary&quot;</span>; x2<span class="ot">&lt;-</span><span class="st">&quot;I am Vietnamese&quot;</span></span>
<span id="cb40-2"><a href="biến-trong-r.html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(x1) <span class="co"># cho biết x1 có bao nhiêu ký tự, tính cả các khoảng trống</span></span>
<span id="cb40-3"><a href="biến-trong-r.html#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(x1, x2, <span class="at">sep =</span> <span class="st">&quot; and &quot;</span>) <span class="co"># ghép x1 và x2 lại với nhau và thêm &quot; and &quot; vào giữa</span></span>
<span id="cb40-4"><a href="biến-trong-r.html#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="fu">toupper</span>(x1); <span class="fu">tolower</span>(x1) <span class="co"># chuyển tất cả các ký tụ sang viết hoa/viết thường</span></span>
<span id="cb40-5"><a href="biến-trong-r.html#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="fu">chartr</span>(<span class="st">&quot;an&quot;</span>,<span class="st">&quot;bm&quot;</span>,x1) <span class="co"># thay tất cả các chữ &quot;a&quot; trong x1 bằng &quot;b&quot; và &quot;n&quot; bằng &quot;m&quot;</span></span>
<span id="cb40-6"><a href="biến-trong-r.html#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="fu">substr</span>(x1, <span class="dv">9</span>, <span class="dv">15</span>) <span class="co"># lấy ra đoạn ký tự từ ký tự thứ 9 (chữ A) đến ký tự thứ 15 (chữ &quot;y&quot;)</span></span>
<span id="cb40-7"><a href="biến-trong-r.html#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sub</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;XYZ&quot;</span>, x1) <span class="co"># thay chữ &quot;a&quot; đầu tiên trong x1 bằng đoạn &quot;XYZ&quot;</span></span>
<span id="cb40-8"><a href="biến-trong-r.html#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;XYZ&quot;</span>, x1) <span class="co"># thay tất cả chữ &quot;a&quot; trong x1 bằng đoạn &quot;XYZ&quot;</span></span>
<span id="cb40-9"><a href="biến-trong-r.html#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;Vietnam&quot;</span>, x2) <span class="co"># cho biết đoạn ký tự &quot;Vietnam&quot; có nằm trong x2 hay không </span></span></code></pre></div>
<p>Nhìn chung xử lý dữ liệu dạng chuỗi ký tự sẽ khó khăn hơn so với xử lý biến dạng số. Để thực hiện được các yêu cầu phức tạp hơn, bạn đọc có thể kết hợp các hàm số ở trên để có hiệu quả tốt hơn, hoặc sử dụng các package được phát triển cho biến dạng ký tự. Chúng tôi thường sử dụng package “stringr” khi xử lý biến kiểu ký tự.</p>
<p>Một kiểu biến bạn đọc cũng có thể thường gặp trong R là kiểu factor. Biến kiểu factor cũng có thể được hiểu là biến kiểu chuỗi ký tự nhưng được R lưu trữ dưới dạng tiết kiệm bộ nhớ. Chúng ta sẽ thảo luận kỹ hơn về biến kiểu factor khi làm việc với vector chuỗi ký tự và khi làm việc với data.frame() trong R.</p>
</div>
<div id="biến-kiểu-thời-gian" class="section level3 hasAnchor" number="3.0.4">
<h3><span class="header-section-number">3.0.4</span> Biến kiểu thời gian<a href="biến-trong-r.html#biến-kiểu-thời-gian" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Trong R có hai kiểu biến thời gian là biến dạng ngày tháng (Date) và biến dạng thời gian chi tiết (POSIXct). Thời gian POSIX hay còn được biết đến với tên gọi là thời gian Unix là một cách quy ước về thời gian của một thời điểm cụ thể được tính bằng số giây từ cột mốc thời gian Unix đến thời điểm đó. Cột mốc thời gian Unix là được các kỹ sư xây dựng hệ điều hành Unix lựa chọn là thời điểm 0 giờ, 0 phút, 0 giây, ngày 01 tháng 01 năm 1970 theo giờ phối hợp quốc tế (giờ UTC). Chữ “ct” là viết tắt của canlendar time. Bạn đọc cũng có thể gặp biến dạng thời gian chi tiết trong R dưới dạng POSIXlt trong đó “lt” là chữ viết tắt của local time. Sự khác biệt của biến kiểu POSIXct và POSIXlt chỉ là cách R lưu trữ các biến này dưới dạng số nguyên hay dưới dạng vector.</p>
<p>Để tạo một biến kiểu thời gian trong R, bạn đọc sử dụng hàm “as.Date()” cho ngày tháng và “as.POSIXct()” cho kiểu thời gian chi tiết.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="biến-trong-r.html#cb41-1" aria-hidden="true" tabindex="-1"></a>date1<span class="ot">&lt;-</span><span class="fu">as.Date</span>(<span class="st">&quot;2023-08-31&quot;</span>) <span class="co"># biến date1 nhận giá trị là ngày 31 tháng 08 năm 2023</span></span>
<span id="cb41-2"><a href="biến-trong-r.html#cb41-2" aria-hidden="true" tabindex="-1"></a>time1<span class="ot">&lt;-</span><span class="fu">as.POSIXct</span>(<span class="st">&quot;2023-08-31 16:41:30&quot;</span>) <span class="co"># 16 giờ, 41 phút, 30 giây ngày 31 tháng 08 năm 2023</span></span></code></pre></div>
<p>Khi xử lý biến kiểu thời gian, bạn đọc nên đổi biến thời gian sang dạng số hoặc dưới dạng vector số. Hàm as.numeric() sẽ đổi các biến kiểu ngày tháng hoặc thời gian chi tiết ra thành số ngày/số giây tính từ mốc thời gian Unix.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="biến-trong-r.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(date1) <span class="co"># cho biết số ngày tính từ 01/01/1970 đến date1</span></span></code></pre></div>
<pre><code>## [1] 19600</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="biến-trong-r.html#cb44-1" aria-hidden="true" tabindex="-1"></a>time2<span class="ot">&lt;-</span><span class="fu">as.POSIXct</span>(<span class="st">&quot;1970-01-01 07:00:30&quot;</span>)</span>
<span id="cb44-2"><a href="biến-trong-r.html#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(time2) <span class="co"># cho biết số giây tính từ 7 giờ, 0 phút, 0 giây ngày 01/01/1970 đến time2</span></span></code></pre></div>
<pre><code>## [1] 30</code></pre>
<p>Do múi giờ UTC của Việt Nam là (UTC + 7) nên thời điểm tính làm mốc sẽ là 7 giờ, 0 phút, 0 giây ngày 01 tháng 01 năm 1970. Điều này giải thích tại sao khi đổi biến time2 thành dạng số ta sẽ thu được kết quả là 30. Khi sử dụng các hàm <span style="color: red;">as.Date()</span> hoặc <span style="color: red;">as.POSIXct()</span> giá trị được đưa vào phải là biến dạng chuỗi ký tự được viết theo đúng quy tắc “YYYY-MM-DD” và “YYYY-MM-DD hh:mm:ss”. Trong trường hợp chuỗi ký tự được đưa vào không đúng định dạng, bạn đọc cần phải thông báo cho R biết định dạng của biến chuỗi ký tự đó. Bạn đọc có thể tham khảo cách khai báo định dạng của biến chuỗi ký tự trong các hàm <span style="color: red;">as.Date()</span> hoặc <span style="color: red;">as.POSIXct()</span> như sau</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="biến-trong-r.html#cb46-1" aria-hidden="true" tabindex="-1"></a>date1<span class="ot">&lt;-</span><span class="fu">as.Date</span>(<span class="st">&quot;02/27/92&quot;</span>, <span class="at">format =</span> <span class="st">&quot;%m/%d/%y&quot;</span>) <span class="co"># date1 sẽ nhận giá trị là ngày 27 tháng 02 năm 1992</span></span>
<span id="cb46-2"><a href="biến-trong-r.html#cb46-2" aria-hidden="true" tabindex="-1"></a>date2<span class="ot">&lt;-</span><span class="fu">as.Date</span>(<span class="st">&quot;02 Jan 2010&quot;</span>, <span class="at">format =</span> <span class="st">&quot;%d %b %Y&quot;</span>) <span class="co"># ngày 02 tháng 01 năm 2010</span></span></code></pre></div>
<p>Biến dạng thời gian sẽ được lấy từ các nguồn khác nhau vào R sẽ được hiểu dưới dạng số tự nhiên. Điển hình là khi lấy dữ liệu từ các file lưu từ Microsoft Excel. Hàm <span style="color: red;">as.Date()</span> hoặc <span style="color: red;">as.POSIXct()</span> cũng có thể chạy khi giá trị được đưa vào là biến dạng số tự nhiên. Bạn đọc cần biết được nguyên tắc đổi từ biến thời gian sang kiểu số của nguồn dữ liệu đó để có thể chuyển đổi thành biến thời gian trong R một cách chính xác. Chẳng hạn như biến dạng thời gian từ Microsoft Excel khi đọc vào R có giá trị là 39768. Nếu không sử dụng mốc thời gian chính xác để chuyển đổi, giá trị thời gian nhận được sẽ không đúng.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="biến-trong-r.html#cb47-1" aria-hidden="true" tabindex="-1"></a>date1<span class="ot">&lt;-</span><span class="fu">as.Date</span>(<span class="dv">39786</span>, <span class="at">origin =</span> <span class="st">&quot;1970-01-01&quot;</span>)</span>
<span id="cb47-2"><a href="biến-trong-r.html#cb47-2" aria-hidden="true" tabindex="-1"></a>date1 <span class="co"># date1 sẽ nhận giá trị SAI khi nhận định mốc thời gian là ngày 01 tháng 01 năm 1970</span></span></code></pre></div>
<pre><code>## [1] &quot;2078-12-06&quot;</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="biến-trong-r.html#cb49-1" aria-hidden="true" tabindex="-1"></a>date2<span class="ot">&lt;-</span><span class="fu">as.Date</span>(<span class="dv">39786</span>, <span class="at">origin =</span> <span class="st">&quot;1899-12-30&quot;</span>)</span>
<span id="cb49-2"><a href="biến-trong-r.html#cb49-2" aria-hidden="true" tabindex="-1"></a>date2 <span class="co"># date2 sẽ nhận giá trị ĐÚNG do khi chuyển đổi đã dùng đúng mốc thời gian của Excel</span></span></code></pre></div>
<pre><code>## [1] &quot;2008-12-04&quot;</code></pre>
<p>Nguyên tắc cơ bản khi xử lý và tính toán với biến dạng thời gian trong R là luôn luôn đổi biến sang dạng số nguyên hoặc đổi một biến dạng thời gian thành ba biến ngày, tháng, năm ở dạng số. Để tách biến dạng thời gian ra thành ngày, tháng, năm bạn đọc có thể sử dụng hàm <span style="color: red;">sub.str()</span> để lấy ra các đoạn ký tự chứa giá trị ngày, tháng, và năm rồi sau đó sử dụng ham <span style="color: red;">as.numeric()</span> để đổi các biến thành kiểu số.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="biến-trong-r.html#cb51-1" aria-hidden="true" tabindex="-1"></a>year<span class="ot">&lt;-</span><span class="fu">as.numeric</span>(<span class="fu">substr</span>(date2,<span class="dv">1</span>,<span class="dv">4</span>)) <span class="co"># sẽ lấy ra đoạn ký tự từ 1-4 trong date2 sau đó đổi đoạn ký tự thành số</span></span>
<span id="cb51-2"><a href="biến-trong-r.html#cb51-2" aria-hidden="true" tabindex="-1"></a>month<span class="ot">&lt;-</span><span class="fu">as.numeric</span>(<span class="fu">substr</span>(date2,<span class="dv">6</span>,<span class="dv">7</span>)) <span class="co"># sẽ lấy ra đoạn ký tự từ 6-7 trong date2 sau đó đổi đoạn ký tự thành số</span></span>
<span id="cb51-3"><a href="biến-trong-r.html#cb51-3" aria-hidden="true" tabindex="-1"></a>day<span class="ot">&lt;-</span><span class="fu">as.numeric</span>(<span class="fu">substr</span>(date2,<span class="dv">9</span>,<span class="dv">10</span>)) <span class="co"># sẽ lấy ra đoạn ký tự từ 9-10 trong date2 sau đó đổi đoạn ký tự thành số</span></span></code></pre></div>
<p>Gói lệnh thường được sử dụng khi làm việc với biến dạng thời gian là gói lệnh <span class="math inline">\(lubridate\)</span>. Bạn đọc sẽ thực hành với biến thời gian chi tiết hơn ở phần xử lý dữ liệu dạng data.frame.</p>
</div>
<div id="vec-tơ-trong-r" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Vec-tơ trong R<a href="biến-trong-r.html#vec-tơ-trong-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Trong phần này của cuốn sách chúng tôi sẽ giới thiệu các khái niệm cơ bản về véc-tơ để bạn đọc có hiểu biết cơ bản nhất. Trong các phần tiếp theo trong cuốn sách đều có liên quan ít nhiều đến đối tượng véc-tơ do đó việc đi quá sâu vào vec-tơ trong phần này là không thực sự cần thiết.</p>
<div id="tại-sao-xử-lý-véc-tơ-là-thế-mạnh-của-r" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Tại sao xử lý véc-tơ là thế mạnh của R?<a href="biến-trong-r.html#tại-sao-xử-lý-véc-tơ-là-thế-mạnh-của-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Véc-tơ là một tập hợp các phần tử có cùng kiểu được sắp xếp theo một thứ tự nhất định. Thứ tự của một phần tử trong véc-tơ thường được gọi là chỉ số. Phần tử đầu tiên trong một véc-tơ của R có chỉ số là 1. Bạn đọc hãy lưu ý điều này bởi trong một vài ngôn ngữ khác chỉ số của phần tử đầu tiên trong véc-tơ sẽ là 0. Vec-tơ là đối tượng quan trọng nhất trong R và xử lý vec-tơ chính là một thế mạnh của R mà đa số các ngôn ngữ cơ bản khác không đáp ứng được.</p>
<p>Khi bạn đọc làm việc với dữ liệu, các thao tác biến đổi dữ liệu thường sẽ là biến đổi đồng thời các giá trị trên cùng một hàng hoặc một cột dữ liệu. Hiếm khi các thao tác này được thực hiện với một giá trị riêng lẻ. Đối tượng véc-tơ là một công cụ hiệu quả để thực hiện các công việc này. Hiệu quả ở đây không chỉ bao gồm sự tiện lợi khi viết các câu lệnh, mà còn hiệu quả ở cả thời gian thực hiện tính toán. Trong phần Lập trình với R chúng tôi sẽ thảo luận kỹ hơn về hiệu quả về thời gian tính toán. Hãy nói về sự tiện lợi khi sử dụng véc-tơ trước. Bạn đọc hãy thử thực hiện một phân tích trên dữ liệu <span class="math inline">\(trump\_tweets\)</span> bằng cách chạy một đoạn câu lệnh sau</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="biến-trong-r.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dslabs) <span class="co"># cần gọi thư viện dslabs chứa dữ liệu trump_tweets</span></span>
<span id="cb52-2"><a href="biến-trong-r.html#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(<span class="fu">as.factor</span>(<span class="fu">as.numeric</span>(<span class="fu">substr</span>(trump_tweets<span class="sc">$</span>created_at,<span class="dv">12</span>,<span class="dv">13</span>)))),</span>
<span id="cb52-3"><a href="biến-trong-r.html#cb52-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Tổng thống Trump viết tweet vào thời gian nào trong ngày&quot;</span>, <span class="at">col =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>Đoạn câu lệnh trên cho kết quả là cựu tổng thống Donald Trump thường viết tweet vào thời gian nào trong ngày. Kết quả này thu được bằng việc thực hiện 1 loạt các phép tính toán, biến đổi cột dữ liệu có tên là <span class="math inline">\(created\_at\)</span>:</p>
<ol style="list-style-type: decimal">
<li>Lấy ra đoạn ký tự chứa giá trị là giờ của cột <span class="math inline">\(created\_at\)</span> (dùng hàm <span class="math inline">\(substr\)</span>).</li>
<li>Chuyển đổi dữ liệu kiểu chuỗi ký sang kiểu số (dùng hàm <span class="math inline">\(as.numeric\)</span>).</li>
<li>Chuyển đổi dữ liệu kiểu số sang kiểu factor (dùng hàm <span class="math inline">\(as.factor\)</span>)</li>
<li>Tổng hợp lại dữ liệu kiểu factor theo các nhóm (dùng hàm <span class="math inline">\(table\)</span>)</li>
<li>Vẽ đồ thị kiểu <span class="math inline">\(barplot\)</span> để người đọc hiểu về dữ liệu một cách nhanh chóng và trực quan hơn.</li>
</ol>
<p>Đi từ cột dữ liệu kiểu <span class="math inline">\(POSIXct\)</span> đến kết quả là đồ thị dạng <span class="math inline">\(barplot\)</span> mà chỉ cần một dòng lệnh là việc gần như không thể đối với đa số các ngôn ngữ lập trình. Các ngôn ngữ lập trình cơ bản chỉ cho phép người sử dụng tác động đển từng phần tử của véc-tơ một cách lần lượt và riêng lẻ. Trái lại, khi bạn đọc thực hiện một phép biến đổi hay tính toán trên đối tượng là vec-tơ trong R, các phép tính toán hay biến đổi này sẽ được thực hiện một cách đồng thời cho tất cả các phần tử trong véc-tơ. Ngoài việc giúp cho các câu lệnh trở nên đơn giản, dể hiểu, R cũng được phát triển để những tính toán trên véc-tơ được thực hiện theo cơ chế song song. Hiểu một cách đơn giản là việc thực hiện các phép toán trên các phần tử của một véc-tơ sẽ diễn ra cùng một lúc chứ không thực hiện một cách lần lượt.</p>
<p>Hầu hết các hàm số trên R đều được phát triển theo cơ chế lập trình vec-tơ. Nghĩa là các hàm số được dùng cho một biến kiểu số đều có thể áp dụng được cho một véc-tơ kiểu số hay các hàm số được dùng cho một biến kiểu chuỗi ký tự đều có thể áp dụng được cho một véc-tơ kiểu chuỗi ký tự. Trong ví dụ với cột (véc-tơ) <span class="math inline">\(created\_at\)</span> của dữ liệu <span class="math inline">\(trump\_tweets\)</span> ở trên, các hàm số được sử dụng như <span class="math inline">\(substr\)</span>, <span class="math inline">\(as.numeric\)</span>, … đều có đầu vào là một véc-tơ. Bạn đọc hãy lưu ý điều này khi tự xây dựng hàm số trên R.</p>
<p>Ngoài việc thực hiện tính toán trên các véc-tơ riêng lẻ, cơ chế hoạt động của R cũng cho phép thực hiện tính toán tương tác giữa các véc-tơ với nhau. Tương tác giữa hai hay nhiều véc-tơ với nhau luôn được thực hiện trên nguyên tắc các phần tử có cùng chỉ số của các véc-tơ sẽ tương tác với nhau. Thậm chí các véc-tơ tương tác với nhau có thể không có cùng kích thước vẫn cho kết quả. Chi tiết sẽ được thảo luận trong các phần tiếp theo.</p>
</div>
<div id="khởi-tạo-véc-tơ-và-các-phép-toán-trên-véc-tơ" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Khởi tạo véc-tơ và các phép toán trên véc-tơ<a href="biến-trong-r.html#khởi-tạo-véc-tơ-và-các-phép-toán-trên-véc-tơ" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="khởi-tạo-véc-tơ" class="section level4 hasAnchor" number="3.1.2.1">
<h4><span class="header-section-number">3.1.2.1</span> Khởi tạo véc-tơ<a href="biến-trong-r.html#khởi-tạo-véc-tơ" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Để tạo một vec-tơ trong R bạn đọc có thể sử dụng bất kỳ một hàm số sẵn có với đầu ra là một vec-tơ. Hàm số thông dụng nhất được dùng để tạo vec-tơ trong R là hàm <span class="math inline">\(c()\)</span>; <span class="math inline">\(c\)</span> là viết tắt của concatenate, hoặc một vài tài liệu cho rằng <span class="math inline">\(c\)</span> là viết tắt của combine. Về mặt ý nghĩa, hàm <span class="math inline">\(c()\)</span> tập hợp các đối tượng được liệt kê trong dấu <span class="math inline">\(()\)</span> lại để tạo thành một đối tượng duy nhất. Nếu các phần tử được liệt kê ra có cùng kiểu dữ liệu, đối tượng tượng tạo thành sẽ là một véc-tơ</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="biến-trong-r.html#cb53-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">13</span>,<span class="dv">21</span>) <span class="co"># Kết quả là một vec-tơ kiểu số</span></span>
<span id="cb53-2"><a href="biến-trong-r.html#cb53-2" aria-hidden="true" tabindex="-1"></a>qua <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;chuối&quot;</span>, <span class="st">&quot;táo&quot;</span>, <span class="st">&quot;cam&quot;</span>, <span class="st">&quot;chanh&quot;</span>) <span class="co"># qua là vec-tơ chứa tên các loại quả</span></span></code></pre></div>
<p>Khi các biến được liệt kê bên trong hàm <span class="math inline">\(c()\)</span> không cùng kiểu, R sẽ cố gắng phân tích các giá trị đó để đưa ra kết quả phù hợp. Nguyên tắc chung là nếu các giá trị được liệt kê bên trong hàm <span class="math inline">\(c()\)</span> là kiểu số, kiểu logic, hoặc kiểu thời gian thì véc-tơ được tạo thành sẽ là véc-tơ kiểu số. Trong trường hợp có 1 biến được liệt kê ra là kiểu chuỗi ký tự, véc-tơ được tạo thành sẽ là véc-tơ kiểu chuỗi ký tự. Bạn đọc có thể kiểm tra giá trị của các véc-tơ sau:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="biến-trong-r.html#cb54-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="cn">TRUE</span>, <span class="cn">FALSE</span>) <span class="co"># Kết quả là một vec-tơ kiểu số</span></span>
<span id="cb54-2"><a href="biến-trong-r.html#cb54-2" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="fu">as.Date</span>(<span class="st">&quot;2023-12-31&quot;</span>)) <span class="co"># Kết quả là một vec-tơ kiểu số</span></span>
<span id="cb54-3"><a href="biến-trong-r.html#cb54-3" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">TRUE</span>, <span class="fu">as.Date</span>(<span class="st">&quot;2023-12-31&quot;</span>),<span class="st">&quot;MFE&quot;</span>) <span class="co"># Kết quả là một vec-tơ kiểu chuỗi ký tự</span></span></code></pre></div>
<p>Các giá trị bên trong hàm <span class="math inline">\(c()\)</span> cũng có thể là một véc-tơ khác, thậm chí có thể là một ma trận (matrix), hoặc là kiểu mảng (array) thì giá trị đầu ra vẫn sẽ là một véc-tơ. Đối với ma trận hàm <span class="math inline">\(c()\)</span> sẽ “duỗi” các phần tử ra thành 1 véc-tơ theo thứ tự các cột bắt đầu từ cột có chỉ số <span class="math inline">\(1\)</span>. Chúng ta sẽ quay lại vấn đề này trong phần ma trận và mảng.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="biến-trong-r.html#cb55-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">TRUE</span>, <span class="fu">as.Date</span>(<span class="st">&quot;2023-12-31&quot;</span>),<span class="st">&quot;MFE&quot;</span>) <span class="co"># Kết quả là một vec-tơ kiểu chuỗi ký tự</span></span>
<span id="cb55-2"><a href="biến-trong-r.html#cb55-2" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span><span class="fu">c</span>(x,<span class="st">&quot;Actuary&quot;</span>,x) <span class="co"># Combine các véc-tơ lại thành 1 véc-tơ duy nhất </span></span></code></pre></div>
<p>Bất kỳ hàm số sẵn có nào có đầu ra là véc-tơ đều có thể dùng để tạo thành véc-tơ. Các hàm mà chúng tôi hay sử dụng để khởi tạo véc-tơ trong R là hàm <span class="math inline">\(rep()\)</span> và hàm <span class="math inline">\(seq()\)</span>. Hàm <span class="math inline">\(rep(x,n)\)</span> có ý nghĩa là lặp lại giá trị (1 biến <span class="math inline">\(x\)</span> hoặc 1 véc-tơ <span class="math inline">\(x\)</span>) <span class="math inline">\(n\)</span> lần, trong khi hàm số <span class="math inline">\(seq(from = a, to = b,length = n)\)</span> tạo thành một dãy số tăng dần (hoặc giảm dần) bắt đầu từ <span class="math inline">\(a\)</span> kết thúc tại <span class="math inline">\(b\)</span> có độ dài véc-tơ là <span class="math inline">\(n\)</span></p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="biến-trong-r.html#cb56-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">10</span><span class="sc">^</span><span class="dv">3</span>) <span class="co"># Véc-tơ có các giá trị đều là 1, độ dài 1.000</span></span>
<span id="cb56-2"><a href="biến-trong-r.html#cb56-2" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>),<span class="dv">10</span><span class="sc">^</span><span class="dv">3</span>) <span class="co"># Lặp lại véc-tơ (&quot;a&quot;,&quot;b&quot;) 1.000 lần</span></span>
<span id="cb56-3"><a href="biến-trong-r.html#cb56-3" aria-hidden="true" tabindex="-1"></a>z<span class="ot">&lt;-</span><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>,<span class="at">to =</span> <span class="dv">1</span>,<span class="at">length =</span> <span class="dv">101</span>) <span class="co"># Dãy số tăng dần từ 0 đến 1, độ dài là 101</span></span></code></pre></div>
</div>
<div id="các-hàm-số-thường-sử-dụng-trên-véc-tơ" class="section level4 hasAnchor" number="3.1.2.2">
<h4><span class="header-section-number">3.1.2.2</span> Các hàm số thường sử dụng trên véc-tơ<a href="biến-trong-r.html#các-hàm-số-thường-sử-dụng-trên-véc-tơ" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-18">Table 3.8: </span>Các hàm thường sử dụng trên véc-tơ
</caption>
<thead>
<tr>
<th style="text-align:left;">
Hàm số
</th>
<th style="text-align:left;">
Ý nghĩa
</th>
<th style="text-align:left;">
Áp dụng trên
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
length(x)
</td>
<td style="text-align:left;">
Số lượng phần tử trong véc-tơ <span class="math inline">\(x\)</span>
</td>
<td style="text-align:left;">
Mọi kiểu véc-tơ
</td>
</tr>
<tr>
<td style="text-align:left;">
sum(x)
</td>
<td style="text-align:left;">
Tổng các số trong véc-tơ <span class="math inline">\(x\)</span>
</td>
<td style="text-align:left;">
Kiểu số, logic, thời gian
</td>
</tr>
<tr>
<td style="text-align:left;">
prod(x)
</td>
<td style="text-align:left;">
Tích các số trong véc-tơ <span class="math inline">\(x\)</span>
</td>
<td style="text-align:left;">
Kiểu số, logic, thời gian
</td>
</tr>
<tr>
<td style="text-align:left;">
mean()
</td>
<td style="text-align:left;">
Giá trị trung bình của các số trong véc-tơ <span class="math inline">\(x\)</span>
</td>
<td style="text-align:left;">
Kiểu số, logic, thời gian
</td>
</tr>
<tr>
<td style="text-align:left;">
var(x)
</td>
<td style="text-align:left;">
Phương sai của các giá trị trong véc-tơ <span class="math inline">\(x\)</span>
</td>
<td style="text-align:left;">
Kiểu số, logic, thời gian
</td>
</tr>
<tr>
<td style="text-align:left;">
sd(x)
</td>
<td style="text-align:left;">
Độ lệch chuẩn của các giá trị trong véc-tơ <span class="math inline">\(x\)</span>
</td>
<td style="text-align:left;">
Kiểu số, logic, thời gian
</td>
</tr>
<tr>
<td style="text-align:left;">
min(x)
</td>
<td style="text-align:left;">
Giá trị nhỏ nhất trong <span class="math inline">\(x\)</span>
</td>
<td style="text-align:left;">
Mọi kiểu véc-tơ
</td>
</tr>
<tr>
<td style="text-align:left;">
max(x)
</td>
<td style="text-align:left;">
Giá trị lớn nhất trong <span class="math inline">\(x\)</span>
</td>
<td style="text-align:left;">
Mọi kiểu véc-tơ
</td>
</tr>
<tr>
<td style="text-align:left;">
quantile(x,p)
</td>
<td style="text-align:left;">
Giá trị tại mức xác suất <span class="math inline">\(p\)</span> của véc-tơ <span class="math inline">\(x\)</span>
</td>
<td style="text-align:left;">
Kiểu số, logic, thời gian
</td>
</tr>
<tr>
<td style="text-align:left;">
sort(x)
</td>
<td style="text-align:left;">
Sắp xếp các phần tử của <span class="math inline">\(x\)</span> theo thứ tự TĂNG dần
</td>
<td style="text-align:left;">
Mọi kiểu véc-tơ
</td>
</tr>
<tr>
<td style="text-align:left;">
table(x)
</td>
<td style="text-align:left;">
Cho biết tần suất xuất hiện của mỗi phần tử
</td>
<td style="text-align:left;">
Mọi kiểu véc-tơ
</td>
</tr>
</tbody>
</table>
<p>Bạn đọc lưu ý rằng còn nhiều hàm số hữu ích khác được xây dựng sẵn khi tính toán với véc-tơ mà chúng tôi không liệt kê ở đây. Đồng thời, mỗi hàm số còn có các tùy biến đề sử dụng trong các hoàn cảnh khác nhau. Chẳng hạn khi trong véc-tơ <span class="math inline">\(x\)</span> có giá trị <span class="math inline">\(NaN\)</span> hoặc <span class="math inline">\(NA\)</span> thì các hàm như <span class="math inline">\(sum(x)\)</span>, <span class="math inline">\(mean(x)\)</span>, … sẽ trả lại giá trị là <span class="math inline">\(NA\)</span>. Trong trường hợp này, bạn đọc cần sử dụng thêm tùy biến <span class="math inline">\(na.rm=TRUE\)</span> để R hiểu rằng các phép tính toán chỉ thực hiện trên các giá trị có ý nghĩa.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="biến-trong-r.html#cb57-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">10</span>),<span class="dv">2</span>,<span class="dv">3</span>,<span class="cn">NA</span>)</span>
<span id="cb57-2"><a href="biến-trong-r.html#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x) <span class="co"># sẽ trả lại giá trị là $NA$ vì trong $x$ có giá trị $NA$</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="biến-trong-r.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x,<span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="co"># sẽ trả lại giá trị là $NA$ vì trong $x$ có giá trị $NA$</span></span></code></pre></div>
<pre><code>## [1] 15</code></pre>
<p>Cách tốt nhất để hiểu và sử dụng hiệu quả và đúng mục đích các hàm số liệt kê ở trên là đọc hướng dẫn của hàm số đó. Trong cuốn sách này chúng tôi chỉ nhấn mạnh những ứng dụng mà chúng tôi cho rằng quan trọng khi ứng dụng các hàm số trong thực tế.</p>
<p>Các hàm số sử dụng trên các véc-tơ kiểu số như <span class="math inline">\(sum()\)</span>, <span class="math inline">\(mean()\)</span>, hay thậm chí cả <span class="math inline">\(var()\)</span>, <span class="math inline">\(sd()\)</span> có thể hoạt động trên cả véc-tơ kiểu thời gian hoặc kiểu logic. Nếu phép toán thực hiện không thể giữ nguyên kiểu dữ liệu của véc-tơ thì R sẽ đổi véc-tơ kiểu thời gian hoặc logic sang kiểu số để thực hiện tính toán.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="biến-trong-r.html#cb61-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="fu">as.Date</span>(<span class="st">&quot;2023-01-01&quot;</span>),<span class="fu">as.Date</span>(<span class="st">&quot;2023-12-31&quot;</span>))</span>
<span id="cb61-2"><a href="biến-trong-r.html#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x) <span class="co"># trả lại giá trị là kiểu thời gian</span></span></code></pre></div>
<pre><code>## [1] &quot;2023-07-02&quot;</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="biến-trong-r.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(x) <span class="co"># kiểu thời gian ko có ý nghĩa nên R sẽ đổi x sang kiểu số để tính toán</span></span></code></pre></div>
<pre><code>## [1] 257.3869</code></pre>
<p>Ngoài các nguyên tắc tính toán thông thường, bạn đọc còn có thể thấy R có thể sắp xếp các phần tử trong một véc-tơ bất kỳ bằng hàm <span class="math inline">\(sort()\)</span> hoặc lấy ra giá trị “lớn nhất” hoặc “nhỏ nhất” của một véc-tơ bất kỳ. Điều này là khá hiển nhiên với các véc-tơ kiểu số. Trong trường hợp véc-tơ kiểu logic hay kiểu ngày tháng, có lẽ bạn đọc cũng sẽ đoán được rằng R sẽ đổi giá trị của véc-tơ đó sang kiểu số để tiến hành sắp xếp. Chắc hẳn bạn đọc sẽ đặt câu hỏi về cách sắp xếp các phần tử trong véc-tơ kiểu chuỗi ký tự. Bản thân các tác giả của cuốn sách cũng không có nhiều kinh nghiệm về vấn đề này, tuy nhiên có các nguyên tắc khi sắp xếp véc-tơ kiểu chuỗi ký tự trong R mà chúng tôi cho rằng sẽ hữu ích với bạn đọc:</p>
<ol style="list-style-type: decimal">
<li><p>Nếu véc-tơ kiểu chuỗi ký tự được biến đổi thành kiểu factor thì thứ tự sắp xếp tăng dần sẽ phụ thuộc vào cách định nghĩa các level của factor.</p></li>
<li><p>Khi so sánh hai chuỗi ký tự, phép so sánh sẽ được thực hiện ở ký tự thứ nhất trước, nếu hai ký tự đầu tiên giống nhau thì sẽ so sánh ở ký tự tiếp theo, và tiếp tục như thế đến khi có sự khác biệt</p></li>
<li><p>Các ký tự đặc biệt luôn được xếp trước (nhỏ hơn), sau đó đến các ký tự là các số, rồi đến chữ cái. Thứ tự sắp xếp của các ký tự số theo đúng thứ tự tăng dần từ 0 đến 9 trong khi thứ tự sắp xếp của các chữ cái là tăng dần theo bảng chữ cái, chữ viết thường được viết trước chữ viết hoa tuy nhiên chữ viết hoa của chữ cái đứng trước lại “nhỏ hơn” chữ viết thường của chữ đứng sau trong bảng chữ cái.</p></li>
</ol>
<p>Trước khi sử dụng R để in ra kết quả, bạn đọc hãy thử “đoán” xem R sẽ trả lại kết quả như thế nào khi chạy các câu sắp xếp các véc-tơ sau theo thứ tự TĂNG dần:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="biến-trong-r.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;az&quot;</span>,<span class="st">&quot;z&quot;</span>)) <span class="co"># luôn sử dụng chữ cái đầu tiên để so sánh</span></span></code></pre></div>
<pre><code>## [1] &quot;a&quot;  &quot;az&quot; &quot;z&quot;</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="biến-trong-r.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;az&quot;</span>,<span class="st">&quot;z&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;Z&quot;</span>)) <span class="co"># chữ cái đứng trước trong bảng chữ cái xếp trước</span></span></code></pre></div>
<pre><code>## [1] &quot;a&quot;  &quot;A&quot;  &quot;az&quot; &quot;z&quot;  &quot;Z&quot;</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="biến-trong-r.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;az&quot;</span>,<span class="st">&quot;z&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;Z&quot;</span>,<span class="st">&quot;1a&quot;</span>)) <span class="co"># số luôn đứng trước chữ cái</span></span></code></pre></div>
<pre><code>## [1] &quot;1a&quot; &quot;a&quot;  &quot;A&quot;  &quot;az&quot; &quot;z&quot;  &quot;Z&quot;</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="biến-trong-r.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;az&quot;</span>,<span class="st">&quot;z&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;Z&quot;</span>,<span class="st">&quot;1a&quot;</span>,<span class="st">&quot;@a&quot;</span>)) <span class="co"># ký tự đặc biệt luôn đứng trước</span></span></code></pre></div>
<pre><code>## [1] &quot;@a&quot; &quot;1a&quot; &quot;a&quot;  &quot;A&quot;  &quot;az&quot; &quot;z&quot;  &quot;Z&quot;</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="biến-trong-r.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;az&quot;</span>,<span class="st">&quot;z&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;Z&quot;</span>,<span class="st">&quot;1a&quot;</span>,<span class="st">&quot;@a&quot;</span>, <span class="st">&quot;0123&quot;</span>)) <span class="co"># ký tự đặc biệt &lt; số &lt; chữ cái</span></span></code></pre></div>
<pre><code>## [1] &quot;@a&quot;   &quot;0123&quot; &quot;1a&quot;   &quot;a&quot;    &quot;A&quot;    &quot;az&quot;   &quot;z&quot;    &quot;Z&quot;</code></pre>
<p>Hàm <span class="math inline">\(sort()\)</span> nếu không sử dụng thêm tham số sẽ luôn sắp xếp véc-tơ theo thứ tự tăng dần. Để sắp xếp véc-tơ theo thứ tự giảm dần, bạn đọc có thể sử dụng thêm tùy biến <span class="math inline">\(decreasing = TRUE\)</span> hoặc ngắn gọn hơn là <span class="math inline">\(decreasing = T\)</span>.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="biến-trong-r.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">13</span>,<span class="dv">21</span>), <span class="at">decreasing =</span> <span class="cn">TRUE</span>) <span class="co"># sắp xếp theo thứ tự giảm dần</span></span></code></pre></div>
<pre><code>## [1] 21 13  8  5  3  2  1  1</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="biến-trong-r.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;az&quot;</span>,<span class="st">&quot;z&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;Z&quot;</span>,<span class="st">&quot;1a&quot;</span>,<span class="st">&quot;@a&quot;</span>, <span class="st">&quot;0123&quot;</span>),<span class="at">decreasing =</span> T) <span class="co"># có thể thay TRUE bằng T</span></span></code></pre></div>
<pre><code>## [1] &quot;Z&quot;    &quot;z&quot;    &quot;az&quot;   &quot;A&quot;    &quot;a&quot;    &quot;1a&quot;   &quot;0123&quot; &quot;@a&quot;</code></pre>
</div>
<div id="tính-toán-trên-véc-tơ" class="section level4 hasAnchor" number="3.1.2.3">
<h4><span class="header-section-number">3.1.2.3</span> Tính toán trên véc-tơ<a href="biến-trong-r.html#tính-toán-trên-véc-tơ" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Như đã đề cập ở phần trước, R là ngôn ngữ lập trình véc-tơ. Bạn đọc có thể sử dụng véc-tơ như một đối tượng trong các phép tính toán hoặc so sánh mà không cần phải tác động đến từng phần tử riêng lẻ của véc-tơ đó. Điều này là không thể thực hiện được với các ngôn ngữ lập trình cơ bản.</p>
<p>Trước hết, chúng ta có thể đưa một véc-tơ <span class="math inline">\(x\)</span> vào trong các phép tính toán thông thường như cộng, trừ, nhân, chia, lũy thừa, … với các số thực. Kết quả thu được sẽ là một véc-tơ có độ dài bằng với véc-tơ ban đầu:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="biến-trong-r.html#cb79-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">5</span> <span class="co"># tạo thành véc-tơ dãy số tự nhiên từ 1 đến 5</span></span>
<span id="cb79-2"><a href="biến-trong-r.html#cb79-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">*</span> <span class="dv">2</span> <span class="co"># nhân véc-tơ với một số</span></span></code></pre></div>
<pre><code>## [1]  2  4  6  8 10</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="biến-trong-r.html#cb81-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">^</span> <span class="dv">2</span> <span class="co"># phép lũy thừa, đối tượng là</span></span></code></pre></div>
<pre><code>## [1]  1  4  9 16 25</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="biến-trong-r.html#cb83-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%%</span> <span class="dv">2</span> <span class="co"># lấy phần dư trong phép chia cho 2</span></span></code></pre></div>
<pre><code>## [1] 1 0 1 0 1</code></pre>
<p>Quan sát kết quả được in ra, bạn đọc có thể dễ dàng nhận thấy rằng nguyên tắc thực hiện phép tính véc-tơ <span class="math inline">\(x\)</span> nhân với số 2, hay bất kỳ phép tính nào khác, là lấy các phần tử riêng lẻ trong véc-tơ <span class="math inline">\(x\)</span> nhân lên 2 và lưu lại trong một véc-tơ mới. Tương tự như phép tính toán, phép so sánh cũng có thể thực hiện giữa một véc-tơ với biến riêng lẻ để nhận được kết quả là một véc-tơ của các biến logic.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="biến-trong-r.html#cb85-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">13</span>,<span class="dv">21</span>) <span class="co"># véc-tơ x kiểu số</span></span>
<span id="cb85-2"><a href="biến-trong-r.html#cb85-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">==</span> <span class="dv">1</span> <span class="co"># Trả lại giá trị TRUE tại các vị trí bằng 1.</span></span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="biến-trong-r.html#cb87-1" aria-hidden="true" tabindex="-1"></a>(x <span class="sc">&gt;</span> <span class="dv">10</span>) <span class="sc">|</span> (x <span class="sc">&lt;</span> <span class="dv">3</span>) <span class="co"># # Trả lại giá trị TRUE tại các vị trí lớn hơn 10 hoặc nhỏ hơn 3</span></span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE  TRUE FALSE FALSE FALSE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="biến-trong-r.html#cb89-1" aria-hidden="true" tabindex="-1"></a>s<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;az&quot;</span>,<span class="st">&quot;z&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;Z&quot;</span>,<span class="st">&quot;1a&quot;</span>,<span class="st">&quot;@a&quot;</span>, <span class="st">&quot;0123&quot;</span>)</span>
<span id="cb89-2"><a href="biến-trong-r.html#cb89-2" aria-hidden="true" tabindex="-1"></a>s <span class="sc">==</span> <span class="st">&quot;a&quot;</span> <span class="co"># Trả lại giá trị TRUE tại các vị trí bằng &quot;a&quot;</span></span></code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<p>Hầu hết các hàm số sẵn có trong R, hoặc các hàm số được phát triển trong các thư viện của R đều có thể áp dụng trên đối tượng là véc-tơ và nguyên tắc áp dụng hàm số trên véc-tơ cũng tương tự như nguyên tắc tính toán giữa véc-tơ với một số. Việc thực hiện tính toán sẽ được thực hiện trên các phần tử riêng lẻ của véc-tơ và sau đó lưu lại trong một véc-tơ mới có chiều dài bằng với véc-tơ ban đầu. Ví dụ như hàm <span class="math inline">\(nchar()\)</span> khi sử dụng với một véc-tơ kiểu chuỗi ký tự sẽ trả lại giá trị là một véc-tơ kiểu số mà mỗi phần tử là số ký tự của phần tử tương ứng trong véc-tơ kiểu chuỗi ký tự</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="biến-trong-r.html#cb91-1" aria-hidden="true" tabindex="-1"></a>s<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;az&quot;</span>,<span class="st">&quot;z&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;Z&quot;</span>,<span class="st">&quot;1a&quot;</span>,<span class="st">&quot;@a&quot;</span>, <span class="st">&quot;0123&quot;</span>)</span>
<span id="cb91-2"><a href="biến-trong-r.html#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(s) <span class="co"># trả lại giá trị là một véc-tơ kiểu số</span></span></code></pre></div>
<pre><code>## [1] 1 2 1 1 1 2 2 4</code></pre>
<p>Bằng cách kết hợp các hàm số trên véc-tơ và tương tác giữa véc-tơ với một biến, bạn đọc có thể tự tạo ra các hàm số, các phương pháp của riêng mình để giải quyết các vấn đề phức tạp hơn. Chẳng hạn như chúng ta muốn biết có bao nhiêu phần tử trong véc-tơ thỏa mãn một điều kiện nào đó, chúng ta có thể kết hợp hàm <span class="math inline">\(sum()\)</span> với một biểu thức so sánh:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="biến-trong-r.html#cb93-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">13</span>,<span class="dv">21</span>) <span class="co"># véc-tơ x kiểu số</span></span>
<span id="cb93-2"><a href="biến-trong-r.html#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x<span class="sc">&gt;</span><span class="dv">10</span>) <span class="co"># cho biết có bao nhiêu phần tử trong x lớn hơn 10</span></span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Khi thực hiện phép so sánh <span class="math inline">\(x &gt; 10\)</span>, do <span class="math inline">\(x\)</span> là một véc-tơ kiểu số nên phép so sánh sẽ trả lại giá trị là <span class="math inline">\(TRUE\)</span> tại các vị trí mà kết quả so sánh là đúng và <span class="math inline">\(FALSE\)</span> tại các vị trí còn lại. Khi kết hợp với hàm <span class="math inline">\(sum()\)</span>, các giá trị <span class="math inline">\(TRUE\)</span> sẽ được đổi thành số 1 và <span class="math inline">\(FALSE\)</span> được đổi thành 0. Kết quả thu được sẽ là số lượng các giá trị <span class="math inline">\(TRUE\)</span> trong phép so sánh, hay nói một cách khác, là số các phần tử trong <span class="math inline">\(x\)</span> thỏa mãn điều kiện lớn hơn <span class="math inline">\(10\)</span>. Tất nhiên với véc-tơ <span class="math inline">\(x\)</span> có độ dài 10 như ở trên, bạn đọc có thể thực hiện tính toán mà không cần hỗ trợ của R. Nhưng thực tế thì hầu như các véc-tơ mà chúng ta thực hiện tính toán sẽ có độ dài lớn hơn rất nhiều và bạn đọc không thể không dùng phần mềm hỗ trợ. Chẳng hạn như bạn đọc muốn biết có bao nhiêu câu tweet của cựu tổng thống Donald Trump có nhiều hơn 10.000 like, hãy thử kết hợp <span class="math inline">\(sum\)</span> với biểu thức so sánh</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="biến-trong-r.html#cb95-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span>trump_tweets<span class="sc">$</span>favorite_count <span class="co"># véc-tơ kiểu số cho biết mỗi câu được like bao nhiêu lần</span></span>
<span id="cb95-2"><a href="biến-trong-r.html#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x<span class="sc">&gt;</span><span class="dv">10</span><span class="sc">^</span><span class="dv">4</span>) <span class="co"># cho biết có bao nhiêu phần tử trong x lớn hơn 10^4</span></span></code></pre></div>
<pre><code>## [1] 4958</code></pre>
<p>Để hình dung cụ thể hơn tỷ lệ số câu tweet được like nhiều hơn 10.000 lần, có thể kết hợp thêm hàm <span class="math inline">\(length()\)</span></p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="biến-trong-r.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x<span class="sc">&gt;</span><span class="dv">10</span><span class="sc">^</span><span class="dv">4</span>)<span class="sc">/</span><span class="fu">length</span>(x) <span class="co"># cho biết có tỷ lệ phần tử trong x lớn hơn 10^4</span></span></code></pre></div>
<pre><code>## [1] 0.2388132</code></pre>
<p>Có rất nhiều cách kết hợp các hàm số lại để đạt được kết quả mong muốn. Một kết quả phân tích có thể đạt được bằng các cách kết hợp khác nhau. Để sử dụng thành thạo chỉ có một cách duy nhất là bạn đọc hãy thực hành nhiều trên R và tự đúc kết kinh nghiệm của mình</p>
</div>
</div>
<div id="lấy-véc-tơ-con-từ-một-véc-tơ" class="section level3 hasAnchor" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Lấy véc-tơ con từ một véc-tơ<a href="biến-trong-r.html#lấy-véc-tơ-con-từ-một-véc-tơ" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Khi làm việc với véc-tơ, chúng ta thường phải lấy các phần tử của véc-tơ ra theo một thứ tự hoặc thỏa mãn điều kiện nào đó và lưu kết quả vào một véc-tơ mới. Kỹ thuật này sẽ được thảo luận dưới đây.</p>
<div id="hai-cách-lấy-véc-tơ-con" class="section level4 hasAnchor" number="3.1.3.1">
<h4><span class="header-section-number">3.1.3.1</span> Hai cách lấy véc-tơ con<a href="biến-trong-r.html#hai-cách-lấy-véc-tơ-con" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Để lấy một phần tử con của một phần tử của một véc-tơ <span class="math inline">\(x\)</span> chúng ta sử dụng dấu ngoặc vuông <span class="math inline">\([]\)</span>. Chẳng hạn như để lấy ra phần tử thứ <span class="math inline">\(1\)</span>, chúng ta sử dụng ký hiệu <span class="math inline">\(x[1]\)</span>. Số 1 trong trường hợp này được gọi là chỉ số. Xin được nhắc lại rằng chỉ số của các phần tử trong véc-tơ của R là bắt đầu từ <span class="math inline">\(1\)</span> và phần tử cuối cùng trong véc-tơ có chỉ số bằng với độ dài của véc-tơ đó. Nếu chúng ta sử dụng chỉ số lớn hơn độ dài của véc-tơ, R sẽ trả lại giá trị là <span class="math inline">\(NA\)</span>.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="biến-trong-r.html#cb99-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">13</span>,<span class="dv">21</span>) <span class="co"># véc-tơ x kiểu số</span></span>
<span id="cb99-2"><a href="biến-trong-r.html#cb99-2" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">1</span>] <span class="co"># lấy ra phần tử thứ nhất trong x</span></span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="biến-trong-r.html#cb101-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">11</span>] <span class="co"># độ dài của x là 10 nên giá trị trả lại sẽ là NA</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>Những bạn đọc đã làm quen với Python có thể sẽ đặt câu hỏi là điều gì sẽ xảy ra nều sử dụng chỉ số 0 hoặc chỉ số là số âm. Hãy nói về chỉ số <span class="math inline">\(0\)</span> trước. Khi gọi phần tử ở vị trí thứ 0 trong một véc-tơ bạn đọc sẽ nhận được một phần tử rỗng. Khái niệm rỗng có thể hiểu giống như khái niệm rỗng khi nói về một tập hợp không có phần tử. Tùy theo kiểu giá trị của véc-tơ ta sẽ có một phần tử rỗng với kiểu giá trị tương ứng</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-31">Table 3.9: </span>Giá trị tại chỉ số 0 của các kiểu véc-tơ
</caption>
<thead>
<tr>
<th style="text-align:left;">
Kiểu véc-tơ
</th>
<th style="text-align:left;">
Giá trị tại chỉ số 0
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Kiểu số nguyên
</td>
<td style="text-align:left;">
integer(0)
</td>
</tr>
<tr>
<td style="text-align:left;">
Kiểu số thực
</td>
<td style="text-align:left;">
numeric(0)
</td>
</tr>
<tr>
<td style="text-align:left;">
Kiểu logical
</td>
<td style="text-align:left;">
logical(0)
</td>
</tr>
<tr>
<td style="text-align:left;">
Kiểu chuỗi ký tự
</td>
<td style="text-align:left;">
character(0)
</td>
</tr>
<tr>
<td style="text-align:left;">
Kiểu ngày tháng
</td>
<td style="text-align:left;">
Date of length 0
</td>
</tr>
<tr>
<td style="text-align:left;">
Kiểu thời gian chính xác
</td>
<td style="text-align:left;">
POSIXct of length 0
</td>
</tr>
</tbody>
</table>
<p>Khi sử dụng chỉ số âm đối với véc-tơ, R hiểu rằng chúng ta đang loại đi các phần tử. Thật vậy, <span class="math inline">\(x[-1]\)</span> sẽ trả lại kết quả là một véc-tơ giống với véc-tơ <span class="math inline">\(x\)</span> sau khi loại đi phần tử thứ nhất. Với số nguyên <span class="math inline">\(k \in \mathcal{N}\)</span>, <span class="math inline">\(x[-k]\)</span> sẽ trả lại kết quả là véc-tơ <span class="math inline">\(x\)</span> sau khi loại đi phần tử thứ <span class="math inline">\(k\)</span>. Nếu <span class="math inline">\(k\)</span> lớn hơn độ dài của véc-tơ <span class="math inline">\(x\)</span>, véc-tơ nhận được sẽ đúng bằng <span class="math inline">\(x\)</span>. Sử dụng chỉ số âm cũng có thể hiểu là một cách để lấy một véc-tơ con từ một véc-tơ ban đầu. Cách lấy véc-tơ con này là cách lầy véc-tơ con bằng cách sử dụng chỉ số kiểu số nguyên.</p>
<p>Có hai cách để lấy véc-tơ con từ một véc-tơ ban đầu, đó là</p>
<ol style="list-style-type: decimal">
<li>Sử dụng một véc-tơ chỉ số kiểu số; và</li>
<li>Sử dụng một véc-tơ chỉ số kiểu logic.</li>
</ol>
<p>Từ véc-tơ <span class="math inline">\(x\)</span> ban đầu, để lấy ra một véc-tơ con, trong trường hợp chúng ta đã biết chính xác các vị trí và thứ tự của các phần tử con mà chúng ta muốn lấy ra, chúng ta có thể lưu vị trí của các phần tử con này vào một véc-tơ khác tạm gọi là véc-tơ chỉ số, tạm gọi là véc-tơ <span class="math inline">\(y\)</span>. Sau đó, chúng ta chỉ cần sử dụng câu lệnh <span class="math inline">\(x[y]\)</span> để lấy ra các phần tử của <span class="math inline">\(x\)</span> tại các vị trí được lưu ở véc-tơ <span class="math inline">\(y\)</span>. Hãy thử quan sát ví dụ sau</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="biến-trong-r.html#cb103-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;cam&quot;</span>,<span class="st">&quot;táo&quot;</span>,<span class="st">&quot;kiwi&quot;</span>,<span class="st">&quot;chuối&quot;</span>,<span class="st">&quot;nho&quot;</span>) <span class="co"># véc-tơ x kiểu chuỗi ký tự</span></span>
<span id="cb103-2"><a href="biến-trong-r.html#cb103-2" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>) <span class="co"># lấy ra véc-tơ con tại chỉ số y</span></span>
<span id="cb103-3"><a href="biến-trong-r.html#cb103-3" aria-hidden="true" tabindex="-1"></a>x[y] <span class="co"># thứ thự trong véc-tơ con là x[3] -&gt; x[5] -&gt; x[2] -&gt; x[3] -&gt; x[1]</span></span></code></pre></div>
<pre><code>## [1] &quot;kiwi&quot; &quot;nho&quot;  &quot;táo&quot;  &quot;kiwi&quot; &quot;cam&quot;</code></pre>
<p>Nếu trong véc-tơ chỉ số có giá trị lớn hơn độ dài của véc-tơ ban đầu, R sẽ trả lại giá trị là <span class="math inline">\(NA\)</span> tại vị trí đó</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="biến-trong-r.html#cb105-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;cam&quot;</span>,<span class="st">&quot;táo&quot;</span>,<span class="st">&quot;kiwi&quot;</span>,<span class="st">&quot;chuối&quot;</span>,<span class="st">&quot;nho&quot;</span>) <span class="co"># véc-tơ x kiểu chuỗi ký tự</span></span>
<span id="cb105-2"><a href="biến-trong-r.html#cb105-2" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">10</span>,<span class="dv">3</span>,<span class="dv">1</span>) <span class="co"># chỉ số 10 lớn hơn độ dài véc-tơ (5)</span></span>
<span id="cb105-3"><a href="biến-trong-r.html#cb105-3" aria-hidden="true" tabindex="-1"></a>x[y] <span class="co"># vị trí thứ tư trong véc-tơ con sẽ là NA</span></span></code></pre></div>
<pre><code>## [1] &quot;kiwi&quot; &quot;nho&quot;  &quot;táo&quot;  NA     &quot;kiwi&quot; &quot;cam&quot;</code></pre>
<p>Nếu chúng ta sử dụng véc-tơ chỉ số là số âm, R sẽ hiểu rằng chúng ta đang muốn loại đi một hay một số phần tử nào đó.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="biến-trong-r.html#cb107-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;cam&quot;</span>,<span class="st">&quot;táo&quot;</span>,<span class="st">&quot;kiwi&quot;</span>,<span class="st">&quot;chuối&quot;</span>,<span class="st">&quot;nho&quot;</span>) <span class="co"># véc-tơ x kiểu chuỗi ký tự</span></span>
<span id="cb107-2"><a href="biến-trong-r.html#cb107-2" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">3</span>,<span class="sc">-</span><span class="dv">5</span>,<span class="sc">-</span><span class="dv">2</span>,<span class="sc">-</span><span class="dv">3</span>) <span class="co"># véc-tơ chỉ số toàn số âm</span></span>
<span id="cb107-3"><a href="biến-trong-r.html#cb107-3" aria-hidden="true" tabindex="-1"></a>x[y] <span class="co"># nhận được véc-tơ con sau khi loại đi các chỉ số trong y (x[1] -&gt; x[4])</span></span></code></pre></div>
<pre><code>## [1] &quot;cam&quot;   &quot;chuối&quot;</code></pre>
<p>R sẽ báo lỗi nếu véc-tơ chỉ số <span class="math inline">\(y\)</span> chứa cả số âm và số dương. Bạn đọc cần lưu ý vấn đề này. Trong các bài toán thực tế, hiếm khi chúng ta biết chính xác vị trí mà chúng ta muốn lấy ra, hay nói cách khác chúng ta không thể trực tiếp gán giá trị cho véc-tơ chỉ số <span class="math inline">\(y\)</span>. Hàm <span class="math inline">\(which\)</span> và hàm <span class="math inline">\(match()\)</span> được thảo luận ở phần tiếp theo của cuốn sách là một phương pháp tuyệt vời để tạo ra các véc-tơ chỉ số kiểu số. Chúng ta sẽ quay lại vấn đề này khi giới thiệu các hàm liên quan đến chỉ số của véc-tơ.</p>
<p>Phương pháp thứ hai để lấy một véc-tơ con từ véc-tơ <span class="math inline">\(x\)</span> đó là sử dụng véc-tơ chỉ số kiểu logical. Cách lấy này sẽ rất thuận tiện khi bạn đọc muốn lấy ra một véc-tơ con của <span class="math inline">\(x\)</span> bao gồm các phần tử thỏa mãn một điều kiện nào đó. Véc-tơ chỉ số, tạm gọi là véc-tơ <span class="math inline">\(y\)</span> được tạo ra từ một phép so sánh, sau đó câu lệnh <span class="math inline">\(x[y]\)</span> sẽ trả lại giá trị là một véc-tơ con của <span class="math inline">\(x\)</span> bao gôm các phần tử mà vị trí tương ứng của nó trong véc-tơ <span class="math inline">\(y\)</span> là <span class="math inline">\(TRUE\)</span>. Lấy véc-tơ con bằng cách này, bạn đọc hãy luôn để độ dài của véc-tơ <span class="math inline">\(y\)</span> bằng độ dài của véc-tơ <span class="math inline">\(x\)</span>. Khi độ dài của <span class="math inline">\(y\)</span> không bằng độ dài của <span class="math inline">\(x\)</span>, câu lệnh <span class="math inline">\(x[y]\)</span> vẫn trả lại kết quả, tuy nhiên hiểu được kết quả trả lại là khá phức tạp giống như khi chúng ta tương tác hai véc-tơ không có cùng độ dài. Do đó chúng tôi khuyên bạn đọc hãy luôn đảm bảo rằng véc-tơ chỉ số kiểu logical và véc-tơ bam đầu luôn có cùng độ dài. Giả sử với véc-tơ <span class="math inline">\(x\)</span> chứa tên các loại quả, chúng ta muốn lấy ra tên các loại quả có tên dài hơn 3 ký tự, chúng ta sẽ tạo một véc-tơ chỉ số <span class="math inline">\(y\)</span> như sau</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="biến-trong-r.html#cb109-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;cam&quot;</span>,<span class="st">&quot;táo&quot;</span>,<span class="st">&quot;kiwi&quot;</span>,<span class="st">&quot;chuối&quot;</span>,<span class="st">&quot;nho&quot;</span>) <span class="co"># véc-tơ x kiểu chuỗi ký tự</span></span>
<span id="cb109-2"><a href="biến-trong-r.html#cb109-2" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span>(<span class="fu">nchar</span>(x)<span class="sc">&gt;</span><span class="dv">3</span>) <span class="co"># y có độ dài bằng x, giá trị TRUE tại vị trí có độ dài &gt; 3</span></span>
<span id="cb109-3"><a href="biến-trong-r.html#cb109-3" aria-hidden="true" tabindex="-1"></a>y <span class="co"># hiển thị giá trị của y</span></span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="biến-trong-r.html#cb111-1" aria-hidden="true" tabindex="-1"></a>x[y] <span class="co"># trả lại giá trị trong x mà vị trí tương ứng trong y là TRUE</span></span></code></pre></div>
<pre><code>## [1] &quot;kiwi&quot;  &quot;chuối&quot;</code></pre>
<p>Đây là cách lấy ra các véc-tơ con rất hiệu quả khi làm việc với dữ liệu dạng bảng. Các cột dữ liệu là các véc-tơ có cùng độ dài, do đó chỉ số <span class="math inline">\(y\)</span> có thể được tạo thành từ phép so sánh một cột dữ liệu và véc-tơ <span class="math inline">\(x\)</span> lại là một cột dữ liệu khác. Chẳng hạn như chúng ta muốn lấy ra các câu tweet của cựu tổng thống Donald Trump được like nhiều hơn 10.000 lần và lưu vào một véc-tơ, chúng ta chỉ cần thực hiện như sau:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="biến-trong-r.html#cb113-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span>trump_tweets<span class="sc">$</span>text <span class="co"># véc-tơ x chứa tất cả các câu tweet</span></span>
<span id="cb113-2"><a href="biến-trong-r.html#cb113-2" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span>trump_tweets<span class="sc">$</span>favorite_count <span class="sc">&gt;</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">4</span> <span class="co"># y là chỉ số, nhận giá trị TRUE tại các câu nhiều hơn 10.000 like</span></span>
<span id="cb113-3"><a href="biến-trong-r.html#cb113-3" aria-hidden="true" tabindex="-1"></a>z<span class="ot">&lt;-</span>x[y] <span class="co"># z chỉ chứa các câu tweet nhiều hơn 10.000 like</span></span></code></pre></div>
<p>Hãy thảo luận về điều gì xảy ra nếu độ dài của <span class="math inline">\(y\)</span> không giống như độ dài của <span class="math inline">\(x\)</span>. Trong trường hợp <span class="math inline">\(y\)</span> có độ dài nhỏ hơn độ dài của <span class="math inline">\(x\)</span>, R sẽ tạo ra một véc-tơ <span class="math inline">\(y1\)</span> có độ dài bằng với độ dài của <span class="math inline">\(y\)</span> bằng cách lặp lại giá trị của <span class="math inline">\(y\)</span> bắt đầu từ <span class="math inline">\(y[1]\)</span> cho đến khi véc-tơ thu được có độ dài bằng <span class="math inline">\(x\)</span>. Hãy quan sát ví dụ sau</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="biến-trong-r.html#cb114-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;cam&quot;</span>,<span class="st">&quot;táo&quot;</span>,<span class="st">&quot;kiwi&quot;</span>,<span class="st">&quot;chuối&quot;</span>,<span class="st">&quot;nho&quot;</span>) <span class="co"># véc-tơ x kiểu chuỗi ký tự độ dài 5</span></span>
<span id="cb114-2"><a href="biến-trong-r.html#cb114-2" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>) <span class="co"># y có độ dài là 2, nhỏ hơn 5</span></span>
<span id="cb114-3"><a href="biến-trong-r.html#cb114-3" aria-hidden="true" tabindex="-1"></a>x[y]</span></code></pre></div>
<pre><code>## [1] &quot;cam&quot;  &quot;kiwi&quot; &quot;nho&quot;</code></pre>
<p>Kết quả thu được tương tự như khi chúng ta thực hiện phép lấy véc-tơ con thông qua một véc-tơ chỉ số <span class="math inline">\(y1\)</span> như sau</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="biến-trong-r.html#cb116-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;cam&quot;</span>,<span class="st">&quot;táo&quot;</span>,<span class="st">&quot;kiwi&quot;</span>,<span class="st">&quot;chuối&quot;</span>,<span class="st">&quot;nho&quot;</span>) <span class="co"># véc-tơ x kiểu chuỗi ký tự độ dài 5</span></span>
<span id="cb116-2"><a href="biến-trong-r.html#cb116-2" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>) <span class="co"># y có độ dài là 2, nhỏ hơn 5</span></span>
<span id="cb116-3"><a href="biến-trong-r.html#cb116-3" aria-hidden="true" tabindex="-1"></a>y1<span class="ot">&lt;-</span><span class="fu">rep</span>(y,<span class="dv">3</span>) <span class="co"># lặp lại y cho đến khi có độ dài lớn hơn x (độ dài của y1 là 6 &gt; 5)</span></span>
<span id="cb116-4"><a href="biến-trong-r.html#cb116-4" aria-hidden="true" tabindex="-1"></a>y1<span class="ot">&lt;-</span>y1[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x)] <span class="co"># chỉ số y1 là chỉ lấy đến đúng độ dài của x</span></span>
<span id="cb116-5"><a href="biến-trong-r.html#cb116-5" aria-hidden="true" tabindex="-1"></a>x[y1] <span class="co"># cho kết quả giống như khi viết x[y]</span></span></code></pre></div>
<pre><code>## [1] &quot;cam&quot;  &quot;kiwi&quot; &quot;nho&quot;</code></pre>
<p>Nếu độ dài của véc-tơ chỉ số <span class="math inline">\(y\)</span> lớn hơn độ dài của <span class="math inline">\(x\)</span>, tại các vị trí của <span class="math inline">\(y\)</span> mà chỉ số vẫn nhỏ hơn hoặc bằng chiều dài của <span class="math inline">\(x\)</span>, việc lấy ra phần tử con vẫn theo quy tắc thông thường, nghĩa là lấy ra các phần tử tương ứng với giá trị <span class="math inline">\(TRUE\)</span> và bỏ qua các phần tử tương ứng với giá trị <span class="math inline">\(FALSE\)</span>. Tại các vị trí của <span class="math inline">\(y\)</span> mà chỉ số lớn hơn chiều dài của <span class="math inline">\(x\)</span>, R vẫn sẽ bỏ qua các phần tử có giá trị là <span class="math inline">\(FALSE\)</span> và sẽ trả lại giá trị là <span class="math inline">\(NA\)</span> mỗi khi gặp giá trị <span class="math inline">\(TRUE\)</span>. Bạn đọc có thể quan sát ví dụ sau</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="biến-trong-r.html#cb118-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;cam&quot;</span>,<span class="st">&quot;táo&quot;</span>,<span class="st">&quot;kiwi&quot;</span>,<span class="st">&quot;chuối&quot;</span>,<span class="st">&quot;nho&quot;</span>) <span class="co"># véc-tơ x kiểu chuỗi ký tự độ dài 5</span></span>
<span id="cb118-2"><a href="biến-trong-r.html#cb118-2" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="fu">nchar</span>(x)<span class="sc">&gt;</span><span class="dv">3</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span>) <span class="co"># y có độ dài là 7, vị trí thứ 6 là FALSE, thứ 7 là TRUE\</span></span>
<span id="cb118-3"><a href="biến-trong-r.html#cb118-3" aria-hidden="true" tabindex="-1"></a>x[y] <span class="co"># x sẽ là các loại quả có tên dài hơn 3 ký tự, theo sau là NA do y[7] là TRUE</span></span></code></pre></div>
<pre><code>## [1] &quot;kiwi&quot;  &quot;chuối&quot; NA</code></pre>
<p>Do sự phức tạp khi tương tác giữa các véc-tơ có không cùng độ dài nên chúng tôi khuyên bạn đọc hãy luôn luôn thực hiện các phép tính toán với các véc-tơ có cùng độ dài để kiểm soát được kết quả khi làm việc với R.</p>
<p>Trong phần tiếp theo chúng ta sẽ thảo luận về các hàm số để tạo ra véc-tơ chỉ số.</p>
</div>
</div>
<div id="các-hàm-chỉ-số-trong-véc-tơ" class="section level3 hasAnchor" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> Các hàm chỉ số trong véc-tơ<a href="biến-trong-r.html#các-hàm-chỉ-số-trong-véc-tơ" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Có một nhóm các hàm số thường được sử dụng khi làm việc với chỉ số của các phần tử trong véc-tơ. Các hàm số này có thể được phỏng theo bằng cách kết hợp một vài kỹ thuật chỉ số đã đề cập đến ở chương trước. Tuy nhiên chúng tôi khuyên bạn đọc nên sử dụng các hàm có sẵn hơn bởi sự tiện lợi và sự dễ hiểu của các dòng lệnh. Các hàm số liên quan đến chỉ số của véc-tơ được liệt kê trong bảng sau</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-41">Table 3.10: </span>Các hàm số liên quan đến chỉ số của véc-tơ
</caption>
<thead>
<tr>
<th style="text-align:left;">
Hàm số
</th>
<th style="text-align:left;">
Ý nghĩa
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
which()
</td>
<td style="text-align:left;">
Chỉ số của các phần tử nhận giá trị là TRUE của một véc-tơ kiểu logical
</td>
</tr>
<tr>
<td style="text-align:left;">
match()
</td>
<td style="text-align:left;">
Cho biết chỉ số của một phần tử nằm trong một véc-tơ khác
</td>
</tr>
<tr>
<td style="text-align:left;">
%in%
</td>
<td style="text-align:left;">
Trả lại giá trị là TRUE nếu một phần tử của một véc-tơ có nằm trong một véc-tơ khác
</td>
</tr>
<tr>
<td style="text-align:left;">
rank
</td>
<td style="text-align:left;">
Trả lại giá trị là thứ tự của phần tử khi xếp véc-tơ theo thứ tự TĂNG dần
</td>
</tr>
<tr>
<td style="text-align:left;">
order()
</td>
<td style="text-align:left;">
Trả lại giá trị là chỉ số của các phần tử sau khi xếp theo thứ tự TĂNG dần
</td>
</tr>
</tbody>
</table>
<p>Chúng ta sẽ thảo luận về cách sử dụng các hàm liên quan đến chỉ số của véc-tơ trong các phần tiếp theo</p>
<div id="hàm-which" class="section level4 hasAnchor" number="3.1.4.1">
<h4><span class="header-section-number">3.1.4.1</span> Hàm <span class="math inline">\(which()\)</span><a href="biến-trong-r.html#hàm-which" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Hàm <span class="math inline">\(which()\)</span> áp dụng trên một véc-tơ dạng logical và cho biết các vị trí nào trong véc-tơ logical có giá trị là <span class="math inline">\(TRUE\)</span>. Có hai biến thể của hàm <span class="math inline">\(which\)</span> thường được sử dụng là <span class="math inline">\(which.min()\)</span> và <span class="math inline">\(which.max()\)</span> cho biết chỉ số của giá trị lớn nhất và chỉ số của giá trị nhỏ nhất. Trong trường hợp <span class="math inline">\(x\)</span> có nhiều giá trị bằng với giá trị lớn nhất hoặc nhiều giá trị bằng với giá trị nhỏ nhất, các hàm <span class="math inline">\(which.min()\)</span> và <span class="math inline">\(which.max()\)</span> luôn luôn trả lại giá trị là chỉ số nhỏ hơn.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="biến-trong-r.html#cb120-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">40</span>,<span class="dv">60</span>,<span class="dv">50</span>,<span class="dv">30</span>,<span class="dv">10</span>) <span class="co"># Véc-tơ kiểu số</span></span>
<span id="cb120-2"><a href="biến-trong-r.html#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(x<span class="sc">&gt;</span><span class="dv">40</span>) <span class="co"># Các chỉ số (vị trí) nào trong véc-tơ x có giá trị &gt; 40</span></span></code></pre></div>
<pre><code>## [1] 3 4</code></pre>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="biến-trong-r.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which.min</span>(x) <span class="co"># Số nhỏ nhất trong x (số 60) nằm ở vị trí nào</span></span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="biến-trong-r.html#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which.max</span>(x) <span class="co"># Số lớn nhất trong x (số 10) nằm ở vị trí nào </span></span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Có thể thấy rằng có thể sử dụng hàm <span class="math inline">\(which()\)</span> để tạo ra véc-tơ chỉ số khi muốn lấy ra các phần tử của một véc-tơ thỏa mãn một điều kiện nào đó. Ví dụ như chúng ta muốn lấy ra các các câu tweet của Donald Trum có nhiểu hơn 10.000 lượt like bằng một véc-tơ chỉ số:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="biến-trong-r.html#cb126-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span>trump_tweets<span class="sc">$</span>text <span class="co"># Véc-tơ chứa tất cả các câu tweet</span></span>
<span id="cb126-2"><a href="biến-trong-r.html#cb126-2" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span><span class="fu">which</span>(trump_tweets<span class="sc">$</span>favorite_count<span class="sc">&gt;</span><span class="dv">10</span><span class="sc">^</span><span class="dv">4</span>) <span class="co"># Véc-tơ kiểu số cho biết các chỉ số (vị trí) nào có nhiều hơn 10.000 like</span></span>
<span id="cb126-3"><a href="biến-trong-r.html#cb126-3" aria-hidden="true" tabindex="-1"></a>z<span class="ot">&lt;-</span>x[y] <span class="co"># z chứa tất cả các câu tweet có nhiều hơn 10.000 like</span></span></code></pre></div>
</div>
<div id="hàm-match-và-toán-tử-in" class="section level4 hasAnchor" number="3.1.4.2">
<h4><span class="header-section-number">3.1.4.2</span> Hàm <span class="math inline">\(match()\)</span> và toán tử <span class="math inline">\(\%in\%\)</span><a href="biến-trong-r.html#hàm-match-và-toán-tử-in" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Hàm <span class="math inline">\(match()\)</span> là hàm số cho phép tương tác giữa hai véc-tơ có độ dài khác nhau. Câu lệnh <span class="math inline">\(match(y,x)\)</span> sẽ trả lại giá trị là một véc-tơ, tạm gọi là <span class="math inline">\(z\)</span>, có độ dài bằng với độ dài của véc-tơ <span class="math inline">\(y\)</span> đồng thời <span class="math inline">\(z[1]\)</span> cho biết <span class="math inline">\(y[1]\)</span> có chỉ số (nằm ở vị trí) nào trong véc-tơ <span class="math inline">\(x\)</span>; <span class="math inline">\(z[2]\)</span> cho biết <span class="math inline">\(y[2]\)</span> có chỉ số (nằm ở vị trí) nào trong véc-tơ <span class="math inline">\(x\)</span>, … Các phần tử của <span class="math inline">\(y\)</span> không xuất hiện trong <span class="math inline">\(x\)</span> sẽ trả lại giá trị tương ứng trong <span class="math inline">\(z\)</span> là <span class="math inline">\(NA\)</span>.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="biến-trong-r.html#cb127-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">40</span>,<span class="dv">60</span>,<span class="dv">50</span>,<span class="dv">30</span>,<span class="dv">10</span>) <span class="co"># Véc-tơ x kiểu số</span></span>
<span id="cb127-2"><a href="biến-trong-r.html#cb127-2" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">60</span>,<span class="dv">10</span>,<span class="dv">70</span>) <span class="co"># véc-tơ y kiểu số</span></span>
<span id="cb127-3"><a href="biến-trong-r.html#cb127-3" aria-hidden="true" tabindex="-1"></a><span class="fu">match</span>(y,x) <span class="co"># cho biết từng phần tử của y nằm ở vị trí thứ bao nhiêu trong x</span></span></code></pre></div>
<pre><code>## [1]  3  6 NA</code></pre>
<p>Chúng ta có thể thấy rằng số 70 không xuất hiện trong <span class="math inline">\(x\)</span> nên giá trị tương ứng trong kết quả sẽ là <span class="math inline">\(NA\)</span>. Lưu ý răng hàm <span class="math inline">\(match()\)</span> luôn luôn tìm đến chỉ số đầu tiên trong véc-tơ <span class="math inline">\(x\)</span> khớp với giá trị của véc-tơ <span class="math inline">\(y\)</span>, hay nói cách khác nếu trong <span class="math inline">\(x\)</span> có nhiều hơn một giá trị khớp với giá trị của <span class="math inline">\(y\)</span>, hàm <span class="math inline">\(match()\)</span> trả lại chỉ số nhỏ hơn:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="biến-trong-r.html#cb129-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">40</span>,<span class="dv">60</span>,<span class="dv">50</span>,<span class="dv">30</span>,<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">10</span>) <span class="co"># Véc-tơ x kiểu số</span></span>
<span id="cb129-2"><a href="biến-trong-r.html#cb129-2" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">20</span>) <span class="co"># véc-tơ y kiểu số</span></span>
<span id="cb129-3"><a href="biến-trong-r.html#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="fu">match</span>(y,x)</span></code></pre></div>
<pre><code>## [1] 6 1</code></pre>
<p>Giá trị 10 và 20 xuất hiện hai lần trong <span class="math inline">\(x\)</span>, tuy nhiên hàm <span class="math inline">\(match()\)</span> sẽ trả lại giá trị là 6 và 1 bởi vì số 10 lần đầu tiên xuất hiện ở vị trí thứ 6 (trong <span class="math inline">\(x\)</span>) và số 20 xuất hiện lần đầu ở vị trí thứ 1.</p>
<p>Toán tử <span class="math inline">\(%in%\)</span> được sử dụng để cho biết mỗi phần tử của một véc-tơ có nằm trong một véc-tơ khác hay không. Câu lệnh <span class="math inline">\(y %in% x\)</span> sẽ trả lại giá trị là một véc-tơ kiểu logical, cho biết mỗi phần tử của véc-tơ <span class="math inline">\(y\)</span> có nằm trong véc-tơ <span class="math inline">\(x\)</span> hay không.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="biến-trong-r.html#cb131-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">40</span>,<span class="dv">60</span>,<span class="dv">50</span>,<span class="dv">30</span>,<span class="dv">10</span>) <span class="co"># Véc-tơ x kiểu số</span></span>
<span id="cb131-2"><a href="biến-trong-r.html#cb131-2" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">60</span>,<span class="dv">10</span>,<span class="dv">70</span>) <span class="co"># véc-tơ y kiểu số</span></span>
<span id="cb131-3"><a href="biến-trong-r.html#cb131-3" aria-hidden="true" tabindex="-1"></a>y <span class="sc">%in%</span> x <span class="co"># cho biết từng phần tử của y có nằm trong x hay không</span></span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE FALSE</code></pre>
<p>Hình vẽ dưới đây minh họa kết quả được trả ra của hàm <span class="math inline">\(match()\)</span> và toán tử <span class="math inline">\(\%in\%\)</span></p>
<p><embed src="Image/match%20and%20in.pdf" /><!-- --></p>
<p>Hàm <span class="math inline">\(match()\)</span> và toán tử <span class="math inline">\(\%in\%\)</span> cho phép tương tác giữa các véc-tơ có độ dài khác nhau nên sẽ rất hiệu quả khi bạn đọc muốn kết nối nhiều dữ liệu khác nhau. Bạn đọc có thể quan sát ví dụ sau để hình dung cách sử dụng hàm <span class="math inline">\(match()\)</span> trong kết nối dữ liệu. Giả sử chúng ta có danh sách điểm học ở trường đại học của lớp Actuary K60 gồm ba sinh viên có mã sinh viên “MSV001”, “MSV002”, “MSV003” khi học các môn học “Xác suất”, “Toán tài chính”, và “Đầu tư và thị trường tài chính” được lưu trong một dữ liệu tên là “diem_hoc_DH”. Sinh viên ngoài ra có thể thi các môn học này hoặc một vài môn học khác tại các hiệp hội Actuary để lấy chứng chỉ và điểm thi được lưu tại một dữ liệu có tên là “diem_chung_chi_Actuary”. Khi xét bằng tốt nghiệp, sinh viên có quyền lấy điểm thi chứng chỉ tại các hiệp hội để thay thế cho điểm học tại trường đại học nếu điểm thi chứng chỉ cao hơn.</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-49">Table 3.11: </span>Điểm thi tại trường đại học (diem_hoc_DH)
</caption>
<thead>
<tr>
<th style="text-align:left;">
Mã sinh viên
</th>
<th style="text-align:left;">
Môn học
</th>
<th style="text-align:right;">
Điểm thi
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
MSV001
</td>
<td style="text-align:left;">
Xác suất
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV002
</td>
<td style="text-align:left;">
Xác suất
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV003
</td>
<td style="text-align:left;">
Xác suất
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV001
</td>
<td style="text-align:left;">
Toán tài chính
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV002
</td>
<td style="text-align:left;">
Toán tài chính
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV003
</td>
<td style="text-align:left;">
Toán tài chính
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV001
</td>
<td style="text-align:left;">
Đầu tư và thị trường tài chính
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV002
</td>
<td style="text-align:left;">
Đầu tư và thị trường tài chính
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV003
</td>
<td style="text-align:left;">
Đầu tư và thị trường tài chính
</td>
<td style="text-align:right;">
10
</td>
</tr>
</tbody>
</table>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-51">Table 3.12: </span>Điểm thi chứng chỉ (diem_chung_chi_Actuary)
</caption>
<thead>
<tr>
<th style="text-align:left;">
Mã sinh viên
</th>
<th style="text-align:left;">
Môn học
</th>
<th style="text-align:right;">
Điểm thi
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
MSV005
</td>
<td style="text-align:left;">
Xác suất
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV002
</td>
<td style="text-align:left;">
Xác suất
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV004
</td>
<td style="text-align:left;">
Xác suất
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV003
</td>
<td style="text-align:left;">
Toán tài chính
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV002
</td>
<td style="text-align:left;">
Toán tài chính
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV001
</td>
<td style="text-align:left;">
Đầu tư và thị trường tài chính
</td>
<td style="text-align:right;">
8
</td>
</tr>
</tbody>
</table>
<p>Để tìm được điểm thi chứng chỉ của mỗi sinh viên trong bảng “diem_hoc_DH” chúng ta phải <span class="math inline">\(match()\)</span> bảng này với bảng “diem_chung_chi_Actuary” thông qua mã sinh viên và tên môn học. Việc kết nối sẽ được thực hiện bằng cách tạo ra 2 véc-tơ tạm gọi tên là <span class="math inline">\(key\)</span>. Trước hết bạn đọc có thể tạo hai dữ liệu trên thông qua đoạn các câu lệnh sau</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="biến-trong-r.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co"># du lieu diem_hoc_DH</span></span>
<span id="cb133-2"><a href="biến-trong-r.html#cb133-2" aria-hidden="true" tabindex="-1"></a>MSV <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>( <span class="st">&quot;MSV001&quot;</span>, <span class="st">&quot;MSV002&quot;</span>, <span class="st">&quot;MSV003&quot;</span>),<span class="dv">3</span>)</span>
<span id="cb133-3"><a href="biến-trong-r.html#cb133-3" aria-hidden="true" tabindex="-1"></a>Mon_hoc <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&quot;Xác suất&quot;</span>,<span class="dv">3</span>),<span class="fu">rep</span>(<span class="st">&quot;Toán tài chính&quot;</span>,<span class="dv">3</span>),<span class="fu">rep</span>(<span class="st">&quot;Đầu tư và thị trường tài chính&quot;</span>,<span class="dv">3</span>))</span>
<span id="cb133-4"><a href="biến-trong-r.html#cb133-4" aria-hidden="true" tabindex="-1"></a>Diem <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">9</span>,<span class="dv">10</span>,<span class="dv">6</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">5</span>,<span class="dv">10</span>)</span>
<span id="cb133-5"><a href="biến-trong-r.html#cb133-5" aria-hidden="true" tabindex="-1"></a>diem_hoc_DH <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(MSV, Mon_hoc, Diem)</span>
<span id="cb133-6"><a href="biến-trong-r.html#cb133-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-7"><a href="biến-trong-r.html#cb133-7" aria-hidden="true" tabindex="-1"></a><span class="co"># du lieu diem_chung_chi_Actuary</span></span>
<span id="cb133-8"><a href="biến-trong-r.html#cb133-8" aria-hidden="true" tabindex="-1"></a>MSV <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;MSV005&quot;</span>, <span class="st">&quot;MSV002&quot;</span>, <span class="st">&quot;MSV004&quot;</span>, <span class="st">&quot;MSV003&quot;</span>, <span class="st">&quot;MSV002&quot;</span>, <span class="st">&quot;MSV001&quot;</span>)</span>
<span id="cb133-9"><a href="biến-trong-r.html#cb133-9" aria-hidden="true" tabindex="-1"></a>Mon_hoc <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Xác suất&quot;</span>, <span class="st">&quot;Xác suất&quot;</span>, <span class="st">&quot;Xác suất&quot;</span>, <span class="st">&quot;Toán tài chính&quot;</span>, <span class="st">&quot;Toán tài chính&quot;</span>, <span class="st">&quot;Đầu tư và thị trường tài chính&quot;</span>)</span>
<span id="cb133-10"><a href="biến-trong-r.html#cb133-10" aria-hidden="true" tabindex="-1"></a>Diem <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>,<span class="dv">10</span>,<span class="dv">9</span>,<span class="dv">8</span>)</span>
<span id="cb133-11"><a href="biến-trong-r.html#cb133-11" aria-hidden="true" tabindex="-1"></a>diem_chung_chi_Actuary <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(MSV, Mon_hoc, Diem)</span></code></pre></div>
<p>Chúng ta tạo ra hai véc-tơ để kết nối hai bảng, véc-tơ được kết hợp từ véc-tơ chứa mã sinh viên và véc-tơ tên môn học</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="biến-trong-r.html#cb134-1" aria-hidden="true" tabindex="-1"></a>diem_hoc_DH_key<span class="ot">&lt;-</span> <span class="fu">paste</span>(diem_hoc_DH<span class="sc">$</span>MSV, diem_hoc_DH<span class="sc">$</span>Mon_hoc)</span>
<span id="cb134-2"><a href="biến-trong-r.html#cb134-2" aria-hidden="true" tabindex="-1"></a>diem_chung_chi_Actuary_key<span class="ot">&lt;-</span><span class="fu">paste</span>(diem_chung_chi_Actuary<span class="sc">$</span>MSV, diem_chung_chi_Actuary<span class="sc">$</span>Mon_hoc)</span></code></pre></div>
<p>Toán tử <span class="math inline">\(\%in\%\)</span> sẽ cho chúng ta biết những phần tử nào trong <span class="math inline">\(diem\_hoc\_DH\_key\)</span> nằm trong <span class="math inline">\(diem\_chung\_chi\_Actuary\_key\)</span>.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="biến-trong-r.html#cb135-1" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span>diem_hoc_DH_key <span class="sc">%in%</span> diem_chung_chi_Actuary_key</span></code></pre></div>
<p>Chỉ số <span class="math inline">\(y\)</span> là kết quả của toán tử <span class="math inline">\(\%in\%\)</span> nên sẽ có dạng logical. <span class="math inline">\(y\)</span> có độ dài là 9 bằng với số dòng của dữ liệu <span class="math inline">\(diem\_hoc\_DH\)</span> và cho biết tương ứng mỗi sinh viên có thi chứng chỉ môn học tương ứng hay không. Chẳng hạn như muốn tạo ra danh sách thi chứng chỉ của sinh viên lớp Actuary 60:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="biến-trong-r.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">MSV =</span> diem_hoc_DH<span class="sc">$</span>MSV[y], <span class="co"># Lọc véc-tơ cột MSV bằng véc-tơ kiểu logic y </span></span>
<span id="cb136-2"><a href="biến-trong-r.html#cb136-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">Diem =</span> diem_hoc_DH<span class="sc">$</span>Mon_hoc[y]) <span class="co"># Lọc véc-tơ cột tên môn học bằng véc-tơ kiểu logic y </span></span></code></pre></div>
<pre><code>##      MSV                           Diem
## 1 MSV002                       Xác suất
## 2 MSV002                 Toán tài chính
## 3 MSV003                 Toán tài chính
## 4 MSV001 Đầu tư và thị trường tài chính</code></pre>
<p>Để tìm được điểm thi chứng chỉ của các sinh viên lớp Actuary 60 chúng ta cần biết kết nối mã sinh viên và môn học từ bảng <span class="math inline">\(diem\_hoc\_DH\)</span> đến bảng <span class="math inline">\(diem\_chung\_chi\_Actuary\)</span> bằng cách sử dụng hàm <span class="math inline">\(match()\)</span></p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="biến-trong-r.html#cb138-1" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span><span class="fu">match</span>(diem_hoc_DH_key,diem_chung_chi_Actuary_key)</span></code></pre></div>
<p>Véc-tơ <span class="math inline">\(y\)</span> có độ dài bằng 9, cho biết mỗi dòng của dữ liệu <span class="math inline">\(diem\_hoc\_DH\)</span> tương ứng với dòng thứ bao nhiêu (chỉ số) của dữ liệu <span class="math inline">\(diem\_chung\_chi\_Actuary\)</span>. Giá trị <span class="math inline">\(NA\)</span> trong <span class="math inline">\(y\)</span> có ý nghĩa là dòng tương ứng của dữ liệu <span class="math inline">\(diem\_hoc\_DH\)</span> không xuất hiện trong <span class="math inline">\(diem\_chung\_chi\_Actuary\)</span> (sinh viên không thi chứng chỉ môn học tương ứng). Chúng ta có thể thêm một cột (véc-tơ) gọi là <span class="math inline">\(diem\_CT\)</span> cho <span class="math inline">\(diem\_hoc\_DH\)</span></p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="biến-trong-r.html#cb139-1" aria-hidden="true" tabindex="-1"></a>diem_hoc_DH<span class="sc">$</span>diem_CT<span class="ot">&lt;-</span>diem_chung_chi_Actuary<span class="sc">$</span>Diem[y] <span class="co"># lấy véc-tơ con bẳng chỉ số kiểu số</span></span></code></pre></div>
<p>Như vậy chúng ta đã có một dữ liệu với điểm học trên lớp và điểm thi chứng chỉ của các sinh viên</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-58">Table 3.13: </span>Điểm thi và điêm chứng chỉ
</caption>
<thead>
<tr>
<th style="text-align:left;">
Mã sinh viên
</th>
<th style="text-align:left;">
Môn học
</th>
<th style="text-align:right;">
Điểm thi
</th>
<th style="text-align:right;">
Điểm chứng chỉ
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
MSV001
</td>
<td style="text-align:left;">
Xác suất
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV002
</td>
<td style="text-align:left;">
Xác suất
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV003
</td>
<td style="text-align:left;">
Xác suất
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV001
</td>
<td style="text-align:left;">
Toán tài chính
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV002
</td>
<td style="text-align:left;">
Toán tài chính
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV003
</td>
<td style="text-align:left;">
Toán tài chính
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV001
</td>
<td style="text-align:left;">
Đầu tư và thị trường tài chính
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV002
</td>
<td style="text-align:left;">
Đầu tư và thị trường tài chính
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
MSV003
</td>
<td style="text-align:left;">
Đầu tư và thị trường tài chính
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
NA
</td>
</tr>
</tbody>
</table>
</div>
<div id="hàm-rank-và-hàm-order" class="section level4 hasAnchor" number="3.1.4.3">
<h4><span class="header-section-number">3.1.4.3</span> Hàm <span class="math inline">\(rank()\)</span> và hàm <span class="math inline">\(order()\)</span><a href="biến-trong-r.html#hàm-rank-và-hàm-order" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Hàm <span class="math inline">\(rank(x)\)</span> trả lại giá trị là thứ tự (rank) của một phần tử trong véc-tơ <span class="math inline">\(x\)</span> khi sắp xếp <span class="math inline">\(x\)</span> theo thứ tự tăng dần. Thứ tự tăng dần ở đây được hiểu theo cả đối với các véc-tơ kiểu chuỗi ký tự.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="biến-trong-r.html#cb140-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">40</span>,<span class="dv">60</span>,<span class="dv">50</span>,<span class="dv">30</span>,<span class="dv">10</span>) <span class="co"># Véc-tơ x kiểu số</span></span>
<span id="cb140-2"><a href="biến-trong-r.html#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rank</span>(x) <span class="co"># tương ứng với số lớn nhất (60) là chỉ số 6, tương ứng với 10 là chỉ số 1</span></span></code></pre></div>
<pre><code>## [1] 2 4 6 5 3 1</code></pre>
<p>Lưu ý rằng hàm <span class="math inline">\(rank()\)</span> có một tùy chọn là <span class="math inline">\(ties.method\)</span>. Khi bạn đọc không sử dụng tùy chọn này, giá trị mặc định là <span class="math inline">\(&quot;average&quot;\)</span>. Tùy chọn <span class="math inline">\(ties.method\)</span> chỉ có ý nghĩa khi <span class="math inline">\(x\)</span> có các giá trị giống nhau. Trong trường hợp tất cả các phần tử trong <span class="math inline">\(x\)</span> là đôi một khác nhau, bất kỳ tùy chọn nào đối với <span class="math inline">\(ties.method\)</span> cũng trả lại một kết quả duy nhất. Bạn đọc hãy quan sát ví dụ sau để thấy sự khác biệt khi sử dụng tùy chọn <span class="math inline">\(ties.method\)</span></p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="biến-trong-r.html#cb142-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">10</span>,<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">20</span>) <span class="co"># Véc-tơ x kiểu số</span></span>
<span id="cb142-2"><a href="biến-trong-r.html#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rank</span>(x,<span class="at">ties.method =</span> <span class="st">&quot;first&quot;</span>) <span class="co"># Trong các giá trị bằng nhau, giá trị xuất hiện TRƯỚC có rank nhỏ hơn</span></span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="biến-trong-r.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rank</span>(x,<span class="at">ties.method =</span> <span class="st">&quot;last&quot;</span>) <span class="co"># Trong các giá trị bằng nhau, giá trị xuất hiện SAU có rank nhỏ hơn</span></span></code></pre></div>
<pre><code>## [1] 3 2 1 5 4</code></pre>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="biến-trong-r.html#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rank</span>(x,<span class="at">ties.method =</span> <span class="st">&quot;min&quot;</span>) <span class="co"># Các giá trị bằng nhau có rank giống nhau và bằng rank nhỏ nhất</span></span></code></pre></div>
<pre><code>## [1] 1 1 1 4 4</code></pre>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="biến-trong-r.html#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rank</span>(x,<span class="at">ties.method =</span> <span class="st">&quot;max&quot;</span>) <span class="co"># Các giá trị bằng nhau có rank giống nhau và bằng rank lớn nhất</span></span></code></pre></div>
<pre><code>## [1] 3 3 3 5 5</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="biến-trong-r.html#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rank</span>(x,<span class="at">ties.method =</span> <span class="st">&quot;average&quot;</span>) <span class="co"># Các giá trị bằng nhau có rank bằng nhau và bằng rank trung bình</span></span></code></pre></div>
<pre><code>## [1] 2.0 2.0 2.0 4.5 4.5</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="biến-trong-r.html#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rank</span>(x,<span class="at">ties.method =</span> <span class="st">&quot;random&quot;</span>) <span class="co"># Các giá trị bằng nhau có rank bằng nhau và bằng rank trung bình</span></span></code></pre></div>
<pre><code>## [1] 3 2 1 5 4</code></pre>
<ul>
<li><p>Khi <span class="math inline">\(ties.method\)</span> nhận giá trị là <span class="math inline">\(&quot;first&quot;\)</span>, giá trị trả lại là <span class="math inline">\(1, 2, 3, 4, 5\)</span>. Ba số 10 liền nhau ở phần đầu của véc-tơ <span class="math inline">\(x\)</span> được xếp thứ tự theo nguyên tắc số nào xuất hiện trước là có thứ tự NHỎ hơn, do đó thứ tự của ba số 10 này trong véc-tơ <span class="math inline">\(x\)</span> khi xếp <span class="math inline">\(x\)</span> theo thứ tự tăng dần là <span class="math inline">\(1 \rightarrow 2 \rightarrow 3\)</span>. Tương tự với hai số 20 ở cuối vec-tớ <span class="math inline">\(x\)</span>, số 20 xuất hiện trước được hiểu là có thứ tự trước số 20 xuất hiện sau, do đó thứ tự của hai số 20 sẽ là <span class="math inline">\(4 \rightarrow 5\)</span></p></li>
<li><p>Khi <span class="math inline">\(ties.method\)</span> nhận giá trị là <span class="math inline">\(&quot;last&quot;\)</span>, giá trị trả lại là <span class="math inline">\(3, 2, 1, 5, 4\)</span>. Ba số 10 liền nhau ở phần đầu của véc-tơ <span class="math inline">\(x\)</span> được xếp thứ tự theo nguyên tắc số nào xuất hiện trước là có thử tự LỚN hơn, do đó thứ tự của ba số 10 này trong véc-tơ <span class="math inline">\(x\)</span> khi xếp <span class="math inline">\(x\)</span> theo thứ tự tăng dần là <span class="math inline">\(3 \rightarrow 2 \rightarrow 1\)</span>. Tương tự với hai số 20 ở cuối vec-tớ <span class="math inline">\(x\)</span>, số 20 xuất hiện trước được hiểu là có thứ tự LỚN hơn số 20 xuất hiện sau, do đó thứ tự của hai số 20 sẽ là <span class="math inline">\(5 \rightarrow 4\)</span></p></li>
<li><p>Khi <span class="math inline">\(ties.method\)</span> nhận giá trị là <span class="math inline">\(&quot;min&quot;\)</span>, giá trị trả lại là <span class="math inline">\(1, 1, 1, 4, 4\)</span>. Ba số 10 liền nhau ở phần đầu của véc-tơ <span class="math inline">\(x\)</span> có thứ tự bằng nhau là 1. Đây chính là thứ tự nhỏ nhất của ba số khi xếp các số này theo tùy chọn <span class="math inline">\(ties.method = &quot;first&quot;\)</span> (thứ tự của 3 số khi <span class="math inline">\(ties.method = &quot;first&quot;\)</span> là 1, 2, 3). Tương tự ta có thứ tự của hai số 20 tiếp theo bằng nhau và bằng 4 (là giá trị nhỏ nhất trong (4,5)).</p></li>
<li><p>Tùy chọn <span class="math inline">\(&quot;max&quot;\)</span> ngược lại với <span class="math inline">\(&quot;min&quot;\)</span>. Thứ tự của ba số 10 đầu tiên trong <span class="math inline">\(x\)</span> đều bằng 3 - là số lớn nhất trong (1, 2, 3) đồng thời thứ tự của hai số 20 tiếp theo đều là 5 - là số lớn nhất trong (4,5).</p></li>
<li><p>Khi <span class="math inline">\(ties.method\)</span> nhận giá trị là <span class="math inline">\(&quot;average&quot;\)</span>, cũng là giá trị mặc định khi sử dụng hàm <span class="math inline">\(rank()\)</span>, thứ tự của ba số 10 ở đầu véc-tơ <span class="math inline">\(x\)</span> được tính là trung bình của thứ tự khi xếp theo tùy chọn <span class="math inline">\(&quot;first&quot;\)</span>. Thật vậy, thứ tư của ba số khi <span class="math inline">\(ties.method\)</span> nhận giá trị là <span class="math inline">\(&quot;first&quot;\)</span> là <span class="math inline">\(1 \rightarrow 2 \rightarrow 3\)</span>. Thứ tự khi <span class="math inline">\(ties.method\)</span> nhận giá trị là <span class="math inline">\(&quot;average&quot;\)</span> là
<span class="math display">\[
\cfrac{1 + 2 + 3}{3} = 2
\]</span>
và thứ tự của hai số 20 ở cuối véc-tơ là
<span class="math display">\[
\cfrac{4 + 5}{2} = 4.5
\]</span></p></li>
<li><p>Cuối cùng, khi <span class="math inline">\(ties.method\)</span> nhận giá trị là <span class="math inline">\(&quot;random&quot;\)</span>, thứ tự của ba số 10 ở đầu véc-tơ <span class="math inline">\(x\)</span> là một <span class="math inline">\(hoán\)</span> <span class="math inline">\(vị\)</span> <span class="math inline">\(ngẫu\)</span> <span class="math inline">\(nhiên\)</span> của (1,2,3) - thứ tự của ba số khi <span class="math inline">\(ties.method\)</span> nhận giá trị là <span class="math inline">\(&quot;first&quot;\)</span>. Bạn đọc có thể thấy rằng hai lần gọi hàm <span class="math inline">\(rank()\)</span> với tùy chọn <span class="math inline">\(ties.method = &quot;random&quot;\)</span> có thể cho kết quả là khác nhau.</p></li>
</ul>
<p>Một hàm số khác trả lại giá trị là chỉ số của véc-tơ là hàm <span class="math inline">\(order()\)</span>. Nếu <span class="math inline">\(y&lt;-order(x)\)</span> thì <span class="math inline">\(y[1]\)</span> là chỉ số của số nhỏ nhất trong véc-tơ <span class="math inline">\(x\)</span>; <span class="math inline">\(y[2]\)</span> là chỉ số của số nhỏ thứ hai trong véc-tơ <span class="math inline">\(x\)</span>; … và số cuối cùng trong véc-tơ <span class="math inline">\(y\)</span> là chỉ số của số lớn nhất trong véc-tơ <span class="math inline">\(x\)</span>. Khi muốn lấy chỉ số của véc-tơ <span class="math inline">\(x\)</span> nhưng theo thứ tự giảm dần bạn đọc sử dụng tùy biến <span class="math inline">\(decreasing = TRUE\)</span>. Khái niệm tăng dần và giảm dần cũng có thể hiểu cho các véc-tơ kiểu thời gian, kiểu factor hay kiểu chuỗi ký tự.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="biến-trong-r.html#cb154-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">40</span>,<span class="dv">60</span>,<span class="dv">50</span>,<span class="dv">30</span>,<span class="dv">10</span>) <span class="co"># Véc-tơ kiểu số</span></span>
<span id="cb154-2"><a href="biến-trong-r.html#cb154-2" aria-hidden="true" tabindex="-1"></a><span class="fu">order</span>(x) <span class="co"># chỉ số khi xếp x theo thứ tự TĂNG dần</span></span></code></pre></div>
<pre><code>## [1] 6 1 5 2 4 3</code></pre>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="biến-trong-r.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">order</span>(x, <span class="at">decreasing =</span> <span class="cn">TRUE</span>) <span class="co"># chỉ số khi xếp x theo thứ tự GIẢM dần</span></span></code></pre></div>
<pre><code>## [1] 3 4 2 5 1 6</code></pre>
<p>Hàm <span class="math inline">\(order(x)\)</span> cho kết quả là 6 tại vị trí thứ nhất có nghĩa là số nhỏ nhất trong <span class="math inline">\(x\)</span> nằm ở vị trí thứ sáu trong véc-tơ này (số 10). Vị trí thứ hai trong <span class="math inline">\(order(x)\)</span> nhận giá trị là 1 có nghĩa là số nhỏ thứ hai trong <span class="math inline">\(x\)</span> nằm ở vị trí thứ 1 trong véc-tơ này và cứ tiếp tục như thế. Vị trí cuối cùng trong <span class="math inline">\(order(x)\)</span> có giá trị là 3 có nghĩa là số lớn nhất trong véc-tơ <span class="math inline">\(x\)</span> nằm ở vị trí thứ 3 trong véc-tơ này.</p>
<p>Hàm <span class="math inline">\(order(x)\)</span> có thể thu được bằng cách khớp chỉ số của véc-tơ <span class="math inline">\(x\)</span> với <span class="math inline">\(rank(x, ties.method = &quot;first&quot;)\)</span>.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="biến-trong-r.html#cb158-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">20</span>,<span class="dv">10</span>,<span class="dv">10</span>,<span class="dv">10</span>) <span class="co"># véc-tơ kiểu số có các giá trị giống nhau</span></span>
<span id="cb158-2"><a href="biến-trong-r.html#cb158-2" aria-hidden="true" tabindex="-1"></a>chiso<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x) <span class="co"># chỉ số tăng dần từ 1 đến độ dài của x</span></span>
<span id="cb158-3"><a href="biến-trong-r.html#cb158-3" aria-hidden="true" tabindex="-1"></a><span class="fu">match</span>(chiso,<span class="fu">rank</span>(x, <span class="at">ties.method =</span> <span class="st">&quot;first&quot;</span>)) <span class="co"># match chiso với rank</span></span></code></pre></div>
<pre><code>## [1] 3 4 5 1 2</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="biến-trong-r.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">order</span>(x) <span class="co"># cho kết quả giống như ở trên</span></span></code></pre></div>
<pre><code>## [1] 3 4 5 1 2</code></pre>
<p>Với hàm <span class="math inline">\(order()\)</span> bạn đọc có thể dễ dàng lấy ra các giá trị nhỏ (hoặc lớn) thứ <span class="math inline">\(k\)</span> trong một véc-tơ. Chẳng hạn như bạn đọc muốn lấy ra câu tweet được like nhiều thứ 2 của cựu tổng thống Donald Trump từ dữ liệu <span class="math inline">\(trump\_tweet\)</span></p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="biến-trong-r.html#cb162-1" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span><span class="fu">order</span>(trump_tweets<span class="sc">$</span>favorite_count, <span class="at">decreasing =</span> T)[<span class="dv">2</span>] <span class="co"># vị trí của câu tweet được like nhiều thứ 2</span></span>
<span id="cb162-2"><a href="biến-trong-r.html#cb162-2" aria-hidden="true" tabindex="-1"></a>trump_tweets<span class="sc">$</span>text[y] <span class="co"># lấy ra câu tweet được like nhiều thứ hai</span></span></code></pre></div>
<pre><code>## [1] &quot;Why would Kim Jong-un insult me by calling me \&quot;old,\&quot; when I would NEVER call him \&quot;short and fat?\&quot; Oh well, I try so hard to be his friend - and maybe someday that will happen!&quot;</code></pre>
</div>
</div>
</div>
<div id="lập-trình-r" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Lập trình R<a href="biến-trong-r.html#lập-trình-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Để viết các chương trình phức tạp với R có thể lên đến hàng trăm, hàng nghìn dòng lệnh, bạn đọc sẽ cần kiểm soát thứ tự mà các dòng lệnh của mình thực hiện. Một cách cơ bản để làm điều này là làm cho việc thực hiện một số câu lệnh nhất định phụ thuộc vào một hoặc một số điều kiện Một cách kiểm soát cơ bản khác là sử dụng vòng lặp lặp lại một nhóm các câu lệnh một số lần nhất định. Trong phần này, chúng ta sẽ khám phá những kiến thức lập trình cơ bản này trong R bằng cách sử dụng câu lệnh rẽ nhánh hay câu lệnh điều kiện (if-else), vòng lặp (for và while) và một vài cấu trúc khác giúp bạn đọc điều khiển được cách R chạy các dòng lệnh.</p>
<div id="câu-lệnh-điều-kiện" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Câu lệnh điều kiện<a href="biến-trong-r.html#câu-lệnh-điều-kiện" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="câu-lệnh-if-và-if-else" class="section level4 hasAnchor" number="3.2.1.1">
<h4><span class="header-section-number">3.2.1.1</span> Câu lệnh if và if-else<a href="biến-trong-r.html#câu-lệnh-if-và-if-else" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Bạn đọc sử dụng câu lệnh điều kiệu để thông báo cho R biết một câu lệnh, hay một nhóm câu lệnh chỉ thực hiện khi một điều kiện nào đó được thực thi. Dưới đây là cách viết của câu lệnh <span style="color: red;">if</span> trong ngôn ngữ R</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="biến-trong-r.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="st">&quot;Biểu thức điều kiện&quot;</span>){ </span>
<span id="cb164-2"><a href="biến-trong-r.html#cb164-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Nhóm các câu lệnh thực hiện khi biểu thức điều kiện là ĐÚNG&quot;</span></span>
<span id="cb164-3"><a href="biến-trong-r.html#cb164-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Bạn đọc có thể thực hiện một đoạn lệnh có biểu thức điều kiện cụ thể như sau</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="biến-trong-r.html#cb165-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="dv">1</span>; y<span class="ot">&lt;-</span><span class="dv">2</span> <span class="co"># Dòng lệnh 1: tạo biến x có giá trị là 1 và biến y có giá trị là 2</span></span>
<span id="cb165-2"><a href="biến-trong-r.html#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (x<span class="sc">&lt;</span><span class="dv">10</span>){ <span class="co"># Dòng lệnh 2: Nếu x nhỏ hơn 10 thì thực hiện các câu lệnh nằm trong {}</span></span>
<span id="cb165-3"><a href="biến-trong-r.html#cb165-3" aria-hidden="true" tabindex="-1"></a>  y<span class="ot">&lt;-</span><span class="dv">4</span> <span class="co"># Dòng lệnh 3: Thay đổi, gán giá trị y bằng 4</span></span>
<span id="cb165-4"><a href="biến-trong-r.html#cb165-4" aria-hidden="true" tabindex="-1"></a>} <span class="co"># Dòng lệnh 4: kết thúc câu lệnh if</span></span></code></pre></div>
<p>Khi thực hiện nhóm các câu lệnh ở trên, dòng lệnh thứ 3 chỉ được thực hiện nếu biểu thức điều kiện được viết trong dấu ngoặc () ở dòng lệnh thứ 2 nhận giá trị là TRUE. Nếu biểu thức điều kiện đó nhận giá trị là FALSE, R sẽ không thực hiện các dòng lệnh số 3. Trong đoạn lệnh ở trên, sau khi thực thi dòng lệnh 1, biến <span class="math inline">\(x\)</span> nhận giá trị là 1 nên phép so sánh <span class="math inline">\(x&lt;10\)</span> sẽ cho kết quả là <span class="math inline">\(TRUE\)</span>. Do đó, dòng lệnh 3 gán giá trị mới bằng 4 cho biến <span class="math inline">\(y\)</span> sẽ được thực hiện. Bạn đọc có thể kiểm tra được rằng sau khi thực hiện đoạn lệnh ở trên, giá trị của biến <span class="math inline">\(y\)</span> sẽ bằng 4.</p>
<p>Khi sử dụng câu lệnh điều kiện chỉ có <span style="color: red;">if</span>, sẽ không có câu lệnh nào được thực hiện trong trường hợp biểu thức điều kiện nhận giá trị là sai. Trong thực tế, đa phần các đoạn lệnh có rẽ nhánh sẽ có các câu lệnh phải thực thi khi biểu thức điều kiện nhận giá trị là sai. Để thực hiện được việc này, bạn đọc sử dụng câu lệnh <span style="color: red;">if-else</span></p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="biến-trong-r.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="st">&quot;Biểu thức điều kiện&quot;</span>){ </span>
<span id="cb166-2"><a href="biến-trong-r.html#cb166-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Nhóm các câu lệnh thực hiện khi biểu thức điều kiện là ĐÚNG&quot;</span></span>
<span id="cb166-3"><a href="biến-trong-r.html#cb166-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb166-4"><a href="biến-trong-r.html#cb166-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Nhóm các câu lệnh thực hiện khi biểu thức điều kiện là SAI&quot;</span></span>
<span id="cb166-5"><a href="biến-trong-r.html#cb166-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Bạn đọc có thể quan sát sự thay đổi giá trị của biến <span class="math inline">\(y\)</span> sau khi thực hiện đoạn lệnh như sau</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="biến-trong-r.html#cb167-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="dv">1</span>; y<span class="ot">&lt;-</span><span class="dv">2</span> <span class="co"># Dòng lệnh 1: tạo biến x có giá trị là 1 và biến y có giá trị là 2</span></span>
<span id="cb167-2"><a href="biến-trong-r.html#cb167-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (x<span class="sc">==</span><span class="dv">10</span>){ <span class="co"># Dòng lệnh 2: Nếu x bằng 10 thì thực hiện các câu lệnh nằm trong {} của if</span></span>
<span id="cb167-3"><a href="biến-trong-r.html#cb167-3" aria-hidden="true" tabindex="-1"></a>  y<span class="ot">&lt;-</span><span class="dv">4</span> <span class="co"># Dòng lệnh 3: Thay đổi, gán giá trị y bằng 4</span></span>
<span id="cb167-4"><a href="biến-trong-r.html#cb167-4" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> { <span class="co"># Dòng lệnh 4: Nếu x KHÁC 10 thì thực hiện các câu lệnh nằm trong {} của else</span></span>
<span id="cb167-5"><a href="biến-trong-r.html#cb167-5" aria-hidden="true" tabindex="-1"></a>  y<span class="ot">&lt;-</span><span class="dv">8</span> <span class="co"># Dòng lệnh 5: Thay đổi, gán giá trị y bằng 4</span></span>
<span id="cb167-6"><a href="biến-trong-r.html#cb167-6" aria-hidden="true" tabindex="-1"></a>} <span class="co"># Dòng lệnh 6: kết thúc câu lệnh if-else</span></span></code></pre></div>
<p>Do biểu thức điều kiện <span class="math inline">\(x==10\)</span> nhận giá trị là FALSE nên R sẽ không thực hiện dòng lệnh số 3 mà chuyển qua thực hiện dòng lệnh số 5. Giá trị của <span class="math inline">\(y\)</span> sau khi thực hiện đoạn lệnh ở trên sẽ là 8. Nếu trong dòng lệnh 1, bạn đọc sửa giá trị của <span class="math inline">\(x\)</span> thành 10 thay vì 1, dòng lệnh 3 sẽ được thực hiện và dòng lệnh số 5 không được thực hiện do đó giá trị của <span class="math inline">\(y\)</span> sau khi thực hiện đoạn lệnh lúc này sẽ là 4.</p>
<p>Biểu thức điều kiện trong câu lệnh if-else phải là một biến dạng logic. Nếu do sơ ý, biểu thức điều kiện là một vector của các biến dạng logic, câu lệnh if-else sẽ chỉ tính đến giá trị đầu tiên trong vector. Do bạn đọc chưa làm quen với khái niệm vector nên chúng tôi sẽ thảo luận về vấn đề này ở phần sau của cuốn sách. Bạn đọc cũng sẽ thường gặp câu lệnh ifelse trong các đoạn câu lệnh của R. Tuy nhiên đây không phải là cách viết của câu lệnh rẽ nhánh và sẽ được thảo luận khi làm việc với đối tượng kiểu Vector.</p>
<p>Trong các bài toán phức tạp, bạn đọc thường phải sử dụng các câu lệnh if-else lồng vào nhau để có được kết quả. Để viết một đoạn câu lệnh để trả ra màn hình giá vé vào rạp chiếu phim của một khách hàng dựa trên độ tuổi và việc có thẻ thành viên hay không như bảng ở dưới đây, bạn đọc không thể chỉ dùng một câu lệnh điều kiện duy nhất.</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-64">Table 3.14: </span>Ví dụ về câu lệnh điều kiện
</caption>
<thead>
<tr>
<th style="text-align:left;">
Độ tuổi
</th>
<th style="text-align:left;">
Có phải thành viên
</th>
<th style="text-align:left;">
Giá vé
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Trẻ em (dưới 6 tuổi)
</td>
<td style="text-align:left;">
Thành viên
</td>
<td style="text-align:left;">
70.000 đồng
</td>
</tr>
<tr>
<td style="text-align:left;">
Người lớn
</td>
<td style="text-align:left;">
Thành vien
</td>
<td style="text-align:left;">
120.000 đồng
</td>
</tr>
<tr>
<td style="text-align:left;">
Trẻ em (dưới 6 tuổi)
</td>
<td style="text-align:left;">
Không phải thành viên
</td>
<td style="text-align:left;">
100.000 đồng
</td>
</tr>
<tr>
<td style="text-align:left;">
Người lớn
</td>
<td style="text-align:left;">
Không phải thành viên
</td>
<td style="text-align:left;">
150.000 đồng
</td>
</tr>
</tbody>
</table>
<p>Giả sử biến <span class="math inline">\(Age\)</span> là biến dạng số cho biết độ tuổi của khách hàng và biến <span class="math inline">\(Member\)</span> là biến dạng logic nhận giá trị <span class="math inline">\(TRUE\)</span> nếu khách hàng là thành viên và <span class="math inline">\(FALSE\)</span> nếu khách hàng không phải là thành viên. Bạn đọc có thể sử dụng câu lệnh điều kiện để in ra màn hình giá vé của khách hàng đó bằng một trong hai cách như sau</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="biến-trong-r.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cách thứ nhất: sử dụng bốn câu lệnh if</span></span>
<span id="cb168-2"><a href="biến-trong-r.html#cb168-2" aria-hidden="true" tabindex="-1"></a>Age<span class="ot">&lt;-</span><span class="dv">50</span>; Member<span class="ot">&lt;-</span><span class="cn">TRUE</span> <span class="co"># tạo giá trị cho các biến Age, Member</span></span>
<span id="cb168-3"><a href="biến-trong-r.html#cb168-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> ((Age <span class="sc">&lt;</span> <span class="dv">6</span>) <span class="sc">&amp;</span> Member){ <span class="co"># nếu khách hàng dưới 6 tuổi và là thành viên</span></span>
<span id="cb168-4"><a href="biến-trong-r.html#cb168-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;70.000 đồng&quot;</span>)</span>
<span id="cb168-5"><a href="biến-trong-r.html#cb168-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb168-6"><a href="biến-trong-r.html#cb168-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> ((Age <span class="sc">&lt;</span> <span class="dv">6</span>) <span class="sc">&amp;</span> Member){ <span class="co"># nếu khách hàng trên 6 tuổi và là thành viên</span></span>
<span id="cb168-7"><a href="biến-trong-r.html#cb168-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;100.000 đồng&quot;</span>)</span>
<span id="cb168-8"><a href="biến-trong-r.html#cb168-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb168-9"><a href="biến-trong-r.html#cb168-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> ((Age <span class="sc">&lt;</span> <span class="dv">6</span>) <span class="sc">&amp;</span> Member){ <span class="co"># nếu khách hàng dưới 6 tuổi và không phải thành viên</span></span>
<span id="cb168-10"><a href="biến-trong-r.html#cb168-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;120.000 đồng&quot;</span>)</span>
<span id="cb168-11"><a href="biến-trong-r.html#cb168-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb168-12"><a href="biến-trong-r.html#cb168-12" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> ((Age <span class="sc">&lt;</span> <span class="dv">6</span>) <span class="sc">&amp;</span> Member){ <span class="co"># nếu khách hàng trên 6 tuổi và không phải thành viên</span></span>
<span id="cb168-13"><a href="biến-trong-r.html#cb168-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;150.000 đồng&quot;</span>)</span>
<span id="cb168-14"><a href="biến-trong-r.html#cb168-14" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="biến-trong-r.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cách thứ hai: câu lệnh if-else</span></span>
<span id="cb169-2"><a href="biến-trong-r.html#cb169-2" aria-hidden="true" tabindex="-1"></a>Age<span class="ot">&lt;-</span><span class="dv">50</span>; Member<span class="ot">&lt;-</span><span class="cn">TRUE</span> <span class="co"># tạo giá trị cho các biến Age, Member</span></span>
<span id="cb169-3"><a href="biến-trong-r.html#cb169-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (Age<span class="sc">&lt;</span><span class="dv">6</span>){</span>
<span id="cb169-4"><a href="biến-trong-r.html#cb169-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(Member){</span>
<span id="cb169-5"><a href="biến-trong-r.html#cb169-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">&quot;70.000 đồng&quot;</span>)</span>
<span id="cb169-6"><a href="biến-trong-r.html#cb169-6" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb169-7"><a href="biến-trong-r.html#cb169-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">&quot;100.000 đồng&quot;</span>)</span>
<span id="cb169-8"><a href="biến-trong-r.html#cb169-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb169-9"><a href="biến-trong-r.html#cb169-9" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb169-10"><a href="biến-trong-r.html#cb169-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(Member){</span>
<span id="cb169-11"><a href="biến-trong-r.html#cb169-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">&quot;120.000 đồng&quot;</span>)</span>
<span id="cb169-12"><a href="biến-trong-r.html#cb169-12" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb169-13"><a href="biến-trong-r.html#cb169-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">&quot;150.000 đồng&quot;</span>)</span>
<span id="cb169-14"><a href="biến-trong-r.html#cb169-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb169-15"><a href="biến-trong-r.html#cb169-15" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
<div id="vòng-lặp" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Vòng lặp<a href="biến-trong-r.html#vòng-lặp" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Vòng lặp là một cơ chế lập trình cơ bản với mục đích để R lặp đi lặp lại việc chạy một dòng lệnh hay một đoạn lệnh cụ thể. Có hai kiểu viết lặp đó là vòng lặp for hoạt động theo cách cho một phần tử nhận lần lượt từng giá trị trong một vector và vòng lặp while hoạt động theo cách lặp lại một đoạn mã cho đến khi một điều kiện cụ thể nhận giá trị là FALSE. Cách thức hoạt động kiểu vòng lặp cũng có thể được áp dụng khi sử dụng nhóm các hàm <span class="math inline">\(apply\)</span> trong R và sẽ được thảo luận ở một phần riêng của cuốn sách.</p>
<div id="vòng-lặp-for" class="section level4 hasAnchor" number="3.2.2.1">
<h4><span class="header-section-number">3.2.2.1</span> Vòng lặp for<a href="biến-trong-r.html#vòng-lặp-for" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Những câu lệnh sau dùng để in ra màn hình tất cả các giá trị nằm trong véc-tơ <span class="math inline">\(qua\)</span></p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="biến-trong-r.html#cb170-1" aria-hidden="true" tabindex="-1"></a>qua <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;chuối&quot;</span>, <span class="st">&quot;táo&quot;</span>, <span class="st">&quot;cam&quot;</span>, <span class="st">&quot;chanh&quot;</span>) <span class="co"># Vec-tơ chứa tên các loại quả</span></span>
<span id="cb170-2"><a href="biến-trong-r.html#cb170-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (ten <span class="cf">in</span> qua){ <span class="co"># cho biến ten nhận lần lượt các giá trị trong vec-tơ qua</span></span>
<span id="cb170-3"><a href="biến-trong-r.html#cb170-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(ten) <span class="co"># in ten ra màn hình</span></span>
<span id="cb170-4"><a href="biến-trong-r.html#cb170-4" aria-hidden="true" tabindex="-1"></a>} <span class="co"># kết thúc vòng lặp for</span></span></code></pre></div>
<pre><code>## [1] &quot;chuối&quot;
## [1] &quot;táo&quot;
## [1] &quot;cam&quot;
## [1] &quot;chanh&quot;</code></pre>
<p>Các dòng lệnh ở trên bắt đầu từ <span class="math inline">\(for\)</span> đến kết thúc dấu ngoặc nhọn của <span class="math inline">\(for\)</span> có nghĩa là cho một biến <span class="math inline">\(ten\)</span> nhận lần lượt các giá trị trong véc-tơ <span class="math inline">\(qua\)</span> từ giá trị ở vị trí thứ nhất đến giá trị ở vị trí cuối cùng. Với mỗi giá trị mà biến <span class="math inline">\(ten\)</span> nhận được, đoạn lệnh thực hiện nhóm các câu lệnh nằm trong dấu ngoặc nhọn của vòng lặp <span class="math inline">\(for\)</span> một lần. Trong đoạn lệnh ở trên các câu lệnh được lặp lại là câu lệnh <span class="math inline">\(print\)</span> với tham số là biến <span class="math inline">\(ten\)</span>.</p>
<p>Bạn đọc hãy thử một ví dụ khó hơn một chút, chẳng hạn như bạn đọc muốn tính tổng các số trong một véc-tơ và không sử dụng hàm <span class="math inline">\(sum()\)</span> có sẵn trong R. Bạn đọc có thể thực hiện việc này bẳng một vòng lặp <span class="math inline">\(for\)</span> như sau:</p>
<ol style="list-style-type: decimal">
<li><p>Cho biến tên <span class="math inline">\(tong\)</span> nhận giá trị bằng 0. <span class="math inline">\(tong\)</span> sẽ là giá trị của tổng sau khi kết thúc vòng lặp</p></li>
<li><p>Cho một biến tên <span class="math inline">\(gia_tri\)</span> nhận lần lượt các giá trị trong véc-tơ bắt đầu từ vị trí thứ nhất, tại mỗi lần lặp tăng giá trị biến <span class="math inline">\(tong\)</span> lên đúng bằng giá trị của <span class="math inline">\(gia_tri\)</span></p></li>
<li><p>Sau khi vòng lặp <span class="math inline">\(for\)</span> chạy qua tất cả các giá trị trong véc-tơ cần tính tổng, biến <span class="math inline">\(tong\)</span> sẽ chứa giá trị của tổng các số trong véc-tơ.</p></li>
</ol>
<p>Giả sử chúng ta muốn tính tổng các số trong véc-tơ <span class="math inline">\(Airpassengers\)</span></p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="biến-trong-r.html#cb172-1" aria-hidden="true" tabindex="-1"></a>tong<span class="ot">&lt;-</span><span class="dv">0</span> <span class="co"># Tạo biến tên tong nhận giá trị 0</span></span>
<span id="cb172-2"><a href="biến-trong-r.html#cb172-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (gia_tri <span class="cf">in</span> AirPassengers){ <span class="co"># cho biến gia_tri nhận lần lượt các giá trị trong Airpassengers</span></span>
<span id="cb172-3"><a href="biến-trong-r.html#cb172-3" aria-hidden="true" tabindex="-1"></a>  tong<span class="ot">&lt;-</span>tong <span class="sc">+</span> gia_tri <span class="co"># tăng tong thêm giá trị bằng gia_tri</span></span>
<span id="cb172-4"><a href="biến-trong-r.html#cb172-4" aria-hidden="true" tabindex="-1"></a>} <span class="co"># kết thúc vòng lặp</span></span>
<span id="cb172-5"><a href="biến-trong-r.html#cb172-5" aria-hidden="true" tabindex="-1"></a>tong <span class="co"># in tong ra màn hình</span></span></code></pre></div>
<pre><code>## [1] 40363</code></pre>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="biến-trong-r.html#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(AirPassengers) <span class="co"># hàm sum() có sẵn cũng cho kết quả tương tự</span></span></code></pre></div>
<pre><code>## [1] 40363</code></pre>
<p>TIP: Hãy luôn viết được dưới dạng đối tượng vec-tơ nếu có thể. Trong trường hợp trên, viết vòng lặp <span class="math inline">\(for\)</span> cho những véc-tơ có độ dài lớn sẽ làm cho thời gian tính toán lâu hơn rất nhiều so với tính toán theo vec-tơ. Hãy thử kiểm tra thời gian chạy để tính tổng của một véc-tơ số có độ dài <span class="math inline">\(10^9\)</span> theo hai cách</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="biến-trong-r.html#cb176-1" aria-hidden="true" tabindex="-1"></a>my_vector<span class="ot">&lt;-</span><span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">10</span><span class="sc">^</span><span class="dv">9</span>)</span>
<span id="cb176-2"><a href="biến-trong-r.html#cb176-2" aria-hidden="true" tabindex="-1"></a>start<span class="ot">&lt;-</span><span class="fu">proc.time</span>()</span>
<span id="cb176-3"><a href="biến-trong-r.html#cb176-3" aria-hidden="true" tabindex="-1"></a>tong<span class="ot">&lt;-</span><span class="dv">0</span></span>
<span id="cb176-4"><a href="biến-trong-r.html#cb176-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (value <span class="cf">in</span> my_vector){</span>
<span id="cb176-5"><a href="biến-trong-r.html#cb176-5" aria-hidden="true" tabindex="-1"></a>  tong<span class="ot">&lt;-</span>tong<span class="sc">+</span>value</span>
<span id="cb176-6"><a href="biến-trong-r.html#cb176-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-7"><a href="biến-trong-r.html#cb176-7" aria-hidden="true" tabindex="-1"></a><span class="fu">proc.time</span>()<span class="sc">-</span>start</span></code></pre></div>
<pre><code>##    user  system elapsed 
##   13.31    1.05   22.33</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="biến-trong-r.html#cb178-1" aria-hidden="true" tabindex="-1"></a>start<span class="ot">&lt;-</span><span class="fu">proc.time</span>()</span>
<span id="cb178-2"><a href="biến-trong-r.html#cb178-2" aria-hidden="true" tabindex="-1"></a>tong<span class="ot">&lt;-</span><span class="fu">sum</span>(my_vector)</span>
<span id="cb178-3"><a href="biến-trong-r.html#cb178-3" aria-hidden="true" tabindex="-1"></a><span class="fu">proc.time</span>()<span class="sc">-</span>start</span></code></pre></div>
<pre><code>##    user  system elapsed 
##    1.03    0.05    1.19</code></pre>
<p>Bạn đọc có thể thấy rằng trên máy tính của chúng tôi, thực hiện vòng lặp <span class="math inline">\(for\)</span> để tính tổng các số trong véc-tơ có độ dài <span class="math inline">\(10^9\)</span> mất khoảng 25 giây trong khi dùng hàm <span class="math inline">\(sum()\)</span> trực tiếp trên véc-tơ chỉ mất hơn 1 giây.</p>
<p>Trong các ví dụ ở trên chúng tôi sử dụng trực tiếp giá trị trong véc-tơ để thực hiện vòng lặp. Bạn đọc cũng có thể sử dụng vòng lặp theo chỉ số của véc-tơ và cho kết quả tương tự. Chẳng hạn như đối với véc-tơ <span class="math inline">\(qua\)</span>, bạn đọc có thể cho một chỉ số nhận giá trị lần lượt từ 1 đến giá trị bằng độ dài của véc-tơ <span class="math inline">\(qua\)</span> để lấy từng phần tử của véc-tơ <span class="math inline">\(qua\)</span> như sau</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="biến-trong-r.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(qua)){ <span class="co"># i sẽ nhận giá trị lần lượt 1,2,3,4</span></span>
<span id="cb180-2"><a href="biến-trong-r.html#cb180-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(qua[i]) <span class="co"># in ra giá trị thứ i trong véc-tơ qua</span></span>
<span id="cb180-3"><a href="biến-trong-r.html#cb180-3" aria-hidden="true" tabindex="-1"></a>} <span class="co"># kết thúc vòng lặp</span></span></code></pre></div>
<pre><code>## [1] &quot;chuối&quot;
## [1] &quot;táo&quot;
## [1] &quot;cam&quot;
## [1] &quot;chanh&quot;</code></pre>
<p>Trong nhiều trường hợp, bạn đọc cần phải sử dụng một vòng lặp <span class="math inline">\(for\)</span> nằm trong một vòng lặp <span class="math inline">\(for\)</span> khác để giải quyết được vấn đề của mình. Giả sử bạn đọc cần in ra tất cả các cách kết hợp giữa các cách pha chế là “Nước ép” và “Sinh tố” với bốn loại quả ở trên. Bạn đọc cần sử dụng 2 vòng lặp <span class="math inline">\(for\)</span> lồng nhau để làm được việc này</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="biến-trong-r.html#cb182-1" aria-hidden="true" tabindex="-1"></a>pha_che<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;Nước ép&quot;</span>, <span class="st">&quot;Sinh tố&quot;</span>)</span>
<span id="cb182-2"><a href="biến-trong-r.html#cb182-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(pha_che)){ <span class="co"># i sẽ nhận giá trị lần lượt 1,2</span></span>
<span id="cb182-3"><a href="biến-trong-r.html#cb182-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(qua)){ <span class="co"># VỚI MỐI i, j sẽ nhận giá trị lần lượt 1,2,3,4</span></span>
<span id="cb182-4"><a href="biến-trong-r.html#cb182-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(pha_che[i],qua[j],<span class="at">sep=</span><span class="st">&quot; &quot;</span>)) <span class="co"># in ra màn hình pha chế và quả</span></span>
<span id="cb182-5"><a href="biến-trong-r.html#cb182-5" aria-hidden="true" tabindex="-1"></a>  } <span class="co"># kết thúc vòng lặp của j với mỗi i</span></span>
<span id="cb182-6"><a href="biến-trong-r.html#cb182-6" aria-hidden="true" tabindex="-1"></a>} <span class="co"># kết thúc vòng lặp của i</span></span></code></pre></div>
<pre><code>## [1] &quot;Nước ép chuối&quot;
## [1] &quot;Nước ép táo&quot;
## [1] &quot;Nước ép cam&quot;
## [1] &quot;Nước ép chanh&quot;
## [1] &quot;Sinh tố chuối&quot;
## [1] &quot;Sinh tố táo&quot;
## [1] &quot;Sinh tố cam&quot;
## [1] &quot;Sinh tố chanh&quot;</code></pre>
<p>Trong ví dụ ở trên, tổng số lần câu lệnh <span class="math inline">\(print\)</span> được lặp là <span class="math inline">\(4 \times 2 = 8 (\text{lần})\)</span>. Mỗi khi viết vòng lặp <span class="math inline">\(for\)</span>, đặc biệt là khi viết các vòng lặp <span class="math inline">\(for\)</span> lồng nhau, bạn đọc hãy luôn cân nhắc thời gian R chạy vòng lặp. Một cách đơn giản để kiểm tra thời gian vòng lặp chạy là thay vì cho chỉ số chạy qua độ dài của cả véc-tơ thì hãy cho vòng lặp thực hiện với một số lượng nhỏ chỉ số ban đầu để ước tính ra tổng thời gian. Nói một cách đơn giản, vòng lặp <span class="math inline">\(for\)</span> chạy qua 100 giá trị ban đầu của véc-tơ sẽ mất thời gian bằng <span class="math inline">\(1/100\)</span> thời gian để chạy vòng lặp qua 10.000 giá trị của toàn bộ véc-tơ. Thời gian để thực hiện các vòng lặp <span class="math inline">\(for\)</span> lồng nhau sẽ tăng lên theo cấp số nhân.</p>
</div>
<div id="vòng-lặp-while" class="section level4 hasAnchor" number="3.2.2.2">
<h4><span class="header-section-number">3.2.2.2</span> Vòng lặp while<a href="biến-trong-r.html#vòng-lặp-while" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Vòng lặp <span class="math inline">\(for\)</span> được gọi là vòng lặp xác định vì nếu không có thêm các câu lệnh đặc biệt, người viết câu lệnh sẽ biết trước được số lần vòng lặp thực hiện. Một cách khác để thực hiện vòng lặp là sử dụng vòng lặp <span class="math inline">\(while\)</span>. Đây là kiểu vòng lặp không xác định, nghĩa là trong nhiều trường hợp người viết câu lệnh sẽ không biết trước được sẽ vòng lặp sẽ được thực hiện bao nhiêu lần. Trước khi nói kỹ hơn về khái niệm không xác định, bạn đọc hãy làm quen với cấu trúc của vòng lặp <span class="math inline">\(while\)</span> trước</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="biến-trong-r.html#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (y){ <span class="co"># là một biến kiểu logical</span></span>
<span id="cb184-2"><a href="biến-trong-r.html#cb184-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Đoạn câu lệnh&quot;</span></span>
<span id="cb184-3"><a href="biến-trong-r.html#cb184-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Nguyên tắc hoạt động của vòng lặp <span class="math inline">\(while\)</span> là sẽ thực hiện “Đoạn câu lệnh” nằm giữa dấu <span class="math inline">\({}\)</span> nếu giá trị của <span class="math inline">\(y\)</span> là <span class="math inline">\(TRUE\)</span> và bỏ qua vòng lặp nếu giá trị của <span class="math inline">\(y\)</span> là <span class="math inline">\(FALSE\)</span>. Nếu <span class="math inline">\(y\)</span> nhận giá trị là <span class="math inline">\(TRUE\)</span> và trong “Đoạn câu lệnh” không có các dòng lệnh tác động ngược lại giá trị của <span class="math inline">\(y\)</span> thì <span class="math inline">\(y\)</span> sẽ luôn luôn nhận giá trị là <span class="math inline">\(TRUE\)</span> và khi đó vòng lặp sẽ lặp vô hạn.</p>
<p>Vòng lặp <span class="math inline">\(while\)</span> dưới đây sẽ in ra tên các phần tử của véc-tơ <span class="math inline">\(qua\)</span> bằng cách sử dụng một chỉ số tăng dần và chỉ thoát ra khỏi vòng lặp nếu chỉ số đó vượt qua độ dài của véc-tơ:</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="biến-trong-r.html#cb185-1" aria-hidden="true" tabindex="-1"></a>qua <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;chuối&quot;</span>, <span class="st">&quot;táo&quot;</span>, <span class="st">&quot;cam&quot;</span>, <span class="st">&quot;chanh&quot;</span>) <span class="co"># Vec-tơ chứa tên các loại quả</span></span>
<span id="cb185-2"><a href="biến-trong-r.html#cb185-2" aria-hidden="true" tabindex="-1"></a>i<span class="ot">&lt;-</span><span class="dv">1</span></span>
<span id="cb185-3"><a href="biến-trong-r.html#cb185-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (i <span class="sc">&lt;=</span> <span class="fu">length</span>(qua)){ <span class="co"># TRUE cho đến khi i = 5</span></span>
<span id="cb185-4"><a href="biến-trong-r.html#cb185-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(qua[i]) <span class="co"># in ra màn hình phần tử thứ i</span></span>
<span id="cb185-5"><a href="biến-trong-r.html#cb185-5" aria-hidden="true" tabindex="-1"></a>  i<span class="ot">&lt;-</span>i<span class="sc">+</span><span class="dv">1</span> <span class="co"># tăng i lên dần để thoát ra khỏi vòng lặp</span></span>
<span id="cb185-6"><a href="biến-trong-r.html#cb185-6" aria-hidden="true" tabindex="-1"></a>} <span class="co"># kết thúc vòng lặp while</span></span></code></pre></div>
<pre><code>## [1] &quot;chuối&quot;
## [1] &quot;táo&quot;
## [1] &quot;cam&quot;
## [1] &quot;chanh&quot;</code></pre>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="biến-trong-r.html#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(i) <span class="co"># kiểm tra giá trị của i khi thoát ra khỏi vòng lặp</span></span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>Trong ví dụ ở trên chúng ta đã biết chính xác khi nào chúng ta sẽ dừng lại vòng lặp nên việc sử dụng vòng lặp <span class="math inline">\(while\)</span> sẽ phức tạp hơn vòng lặp <span class="math inline">\(for\)</span>. Vòng lặp <span class="math inline">\(while\)</span> sẽ phát huy hiệu quả khi bạn đọc không biết chính xác khi nào chúng ta nên dừng việc thực hiện lặp các câu lệnh.</p>
<p>Hãy lấy ví dụ khi bạn đọc muốn kiểm tra xem một số tự nhiên <span class="math inline">\(n\)</span> bất kỳ có phải là số nguyên tố hay không. Xin được nhắc lại rằng số nguyên tố là các số tự nhiên chỉ có hai ước số là số 1 và chính nó. Để kiểm tra xem số <span class="math inline">\(n\)</span> có phải là số nguyên tố hay không, bạn đọc cần kiểm tra xem <span class="math inline">\(n\)</span> có chia hết cho số nguyên dương nào từ 2 đến phần nguyên của <span class="math inline">\(\sqrt{n}\)</span> hay không. Nếu <span class="math inline">\(n\)</span> không chia hết cho bất kỳ số nào, <span class="math inline">\(n\)</span> sẽ không phải là số nguyên tố. Theo nguyên tắc này bạn đọc có viết một vòng lặp <span class="math inline">\(for\)</span> chạy từ <span class="math inline">\(2\)</span> đến <span class="math inline">\([\sqrt{n}]\)</span> và kiểm tra xem <span class="math inline">\(n\)</span> có chia hết cho số nào trong dãy này không. Tuy nhiên vòng lặp <span class="math inline">\(for\)</span> như vậy sẽ luôn luôn phải lặp lại <span class="math inline">\([\sqrt{n}] - 1\)</span> lần. Viết vòng lặp <span class="math inline">\(while\)</span> trong trường hợp này sẽ hiệu quả hơn rất nhiều bởi chỉ cần <span class="math inline">\(n\)</span> chia hết cho 1 số nào đó chúng ta có thể kết thúc ngay vòng lặp và kết luận <span class="math inline">\(n\)</span> không phải là số nguyên tố.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="biến-trong-r.html#cb189-1" aria-hidden="true" tabindex="-1"></a>n<span class="ot">&lt;-</span><span class="dv">123454321</span> <span class="co"># số nguyên dương bất kỳ</span></span>
<span id="cb189-2"><a href="biến-trong-r.html#cb189-2" aria-hidden="true" tabindex="-1"></a>ket_qua<span class="ot">&lt;-</span><span class="cn">TRUE</span> <span class="co"># kết quả sẽ thay đổi nếu n chia hết cho 1 số nào đó</span></span>
<span id="cb189-3"><a href="biến-trong-r.html#cb189-3" aria-hidden="true" tabindex="-1"></a>uoc_so<span class="ot">&lt;-</span><span class="dv">2</span></span>
<span id="cb189-4"><a href="biến-trong-r.html#cb189-4" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span>( ket_qua <span class="sc">&amp;</span> (uoc_so <span class="sc">&lt;</span> n<span class="sc">^</span><span class="fl">0.5</span>) ){ <span class="co"># tiếp tục lặp nếu ket_qua = TRUE và ước số &lt; n^0.5</span></span>
<span id="cb189-5"><a href="biến-trong-r.html#cb189-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(n <span class="sc">%%</span> uoc_so <span class="sc">==</span> <span class="dv">0</span>){</span>
<span id="cb189-6"><a href="biến-trong-r.html#cb189-6" aria-hidden="true" tabindex="-1"></a>    ket_qua<span class="ot">&lt;-</span><span class="cn">FALSE</span> <span class="co"># thay đổi giá trị của ket_qua nếu n chia hết cho uoc_so</span></span>
<span id="cb189-7"><a href="biến-trong-r.html#cb189-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb189-8"><a href="biến-trong-r.html#cb189-8" aria-hidden="true" tabindex="-1"></a>  uoc_so<span class="ot">&lt;-</span>uoc_so <span class="sc">+</span> <span class="dv">1</span> <span class="co"># tăng ước số thêm 1</span></span>
<span id="cb189-9"><a href="biến-trong-r.html#cb189-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb189-10"><a href="biến-trong-r.html#cb189-10" aria-hidden="true" tabindex="-1"></a>ket_qua <span class="co"># TRUE nến n nguyên tố</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Hãy thử một ví dụ khác liên quan đến dữ liệu <span class="math inline">\(trump\_tweet\)</span>. Chẳng hạn như bạn đọc muốn tìm ra thời điểm đầu tiên mà một câu tweet được like nhiều hơn 10.000 lần. Câu hỏi này khá dễ nếu chúng ta tư duy theo tương tác véc-tơ. Tuy nhiên chúng tôi muốn bạn đọc suy nghĩ theo tiếp cận vòng lặp. Chúng ta sẽ sử dụng một chỉ số tăng dần từ 1 và kiểm tra xem câu tweet đó có nhiều hơn 10.000 like hay không và chỉ dừng lại việc kiểm tra nếu gặp câu tweet nhiều hơn 10.000 like. Chúng ta không biết chính xác khi nào sẽ dừng lại, do đó sử dụng vòng lặp <span class="math inline">\(while\)</span> sẽ hợp lý trong trường hợp này</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="biến-trong-r.html#cb191-1" aria-hidden="true" tabindex="-1"></a>kiem_tra<span class="ot">&lt;-</span><span class="cn">TRUE</span></span>
<span id="cb191-2"><a href="biến-trong-r.html#cb191-2" aria-hidden="true" tabindex="-1"></a>i<span class="ot">&lt;-</span><span class="dv">0</span></span>
<span id="cb191-3"><a href="biến-trong-r.html#cb191-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span>(kiem_tra){ <span class="co"># chắc chắn có câu nhiều hơn 10.000 like nên không cần hạn chế i</span></span>
<span id="cb191-4"><a href="biến-trong-r.html#cb191-4" aria-hidden="true" tabindex="-1"></a>  i<span class="ot">&lt;-</span>i<span class="sc">+</span><span class="dv">1</span> <span class="co"># tăng chỉ số i</span></span>
<span id="cb191-5"><a href="biến-trong-r.html#cb191-5" aria-hidden="true" tabindex="-1"></a>  kiem_tra<span class="ot">&lt;-</span>trump_tweets<span class="sc">$</span>favorite_count[i] <span class="sc">&lt;=</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">4</span> <span class="co"># tiếp tục lặp nếu số like &lt;=10^4</span></span>
<span id="cb191-6"><a href="biến-trong-r.html#cb191-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb191-7"><a href="biến-trong-r.html#cb191-7" aria-hidden="true" tabindex="-1"></a>trump_tweets<span class="sc">$</span>favorite_count[i] <span class="co"># chỉ số i là chỉ số nhỏ nhất mà số like nhiều hơn 10.000</span></span></code></pre></div>
<pre><code>## [1] 15457</code></pre>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="biến-trong-r.html#cb193-1" aria-hidden="true" tabindex="-1"></a>trump_tweets<span class="sc">$</span>created_at[i] <span class="co"># thời điểm viết câu tweet đó</span></span></code></pre></div>
<pre><code>## [1] &quot;2011-12-21 15:36:36 EST&quot;</code></pre>
<p>Khi làm việc với vòng lặp <span class="math inline">\(while\)</span> những người mới làm quen với lập trình rất dễ rơi vào trạng thái vòng lặp vô hạn. Dưới đây là một ví dụ về một vòng lặp như vậy. Biến <span class="math inline">\(kiem\_tra\)</span> nhận giá trị ban đầu là <span class="math inline">\(TRUE\)</span> và trong các câu lệnh nằm trong vòng lặp không có câu lệnh nào tác động đến giá trị của biến đó. Bạn đọc sẽ thấy giá trị <span class="math inline">\(i\)</span> được in ra tăng dần và không bao giờ dừng lại. Bạn đọc chỉ có thể dừng chương trình chạy bằng cách nhấn vào biểu tưởng “STOP” phía trên bên phải cửa sổ R console.</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="biến-trong-r.html#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ĐÂY LÀ VÒNG LẶP VÔ HẠN</span></span>
<span id="cb195-2"><a href="biến-trong-r.html#cb195-2" aria-hidden="true" tabindex="-1"></a>kiem_tra<span class="ot">&lt;-</span><span class="cn">TRUE</span></span>
<span id="cb195-3"><a href="biến-trong-r.html#cb195-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (kiem_tra){ <span class="co"># kiem_tra luôn luôn nhận giá trị TRUE</span></span>
<span id="cb195-4"><a href="biến-trong-r.html#cb195-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;Giá trị của i hiện tại: &quot;</span>, i)) <span class="co"># in ra màn hình phần tử thứ i</span></span>
<span id="cb195-5"><a href="biến-trong-r.html#cb195-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Kinh nghiệm của các tác giả khi sử dụng vòng lặp không xác định là trong mọi trường hợp luôn luôn sử dụng một biến <span class="math inline">\(i\)</span> không liên quan đến chương trình chạy và được gán cho giá trị tăng dần trong vòng lặp. Trong biển thức điều kiện luôn luôn kèm thêm một điều kiện là <span class="math inline">\(i\)</span> nhỏ hơn số lần lặp tối đa mà người lập trình quy định. Bạn đọc có thể quan sát đoạn lệnh sau:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="biến-trong-r.html#cb196-1" aria-hidden="true" tabindex="-1"></a>loop_max<span class="ot">&lt;-</span><span class="dv">10</span><span class="sc">^</span><span class="dv">4</span></span>
<span id="cb196-2"><a href="biến-trong-r.html#cb196-2" aria-hidden="true" tabindex="-1"></a>i<span class="ot">&lt;-</span><span class="dv">1</span> <span class="co"># i ban đầu là 1</span></span>
<span id="cb196-3"><a href="biến-trong-r.html#cb196-3" aria-hidden="true" tabindex="-1"></a>kiem_tra<span class="ot">&lt;-</span><span class="cn">TRUE</span></span>
<span id="cb196-4"><a href="biến-trong-r.html#cb196-4" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (kiem_tra <span class="sc">&amp;</span> (i<span class="sc">&lt;=</span> loop_max)){</span>
<span id="cb196-5"><a href="biến-trong-r.html#cb196-5" aria-hidden="true" tabindex="-1"></a>  i<span class="ot">&lt;-</span>i<span class="sc">+</span><span class="dv">1</span> <span class="co"># luôn luôn tăng i</span></span>
<span id="cb196-6"><a href="biến-trong-r.html#cb196-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;Giá trị của i hiện tại: &quot;</span>, i)) <span class="co"># in ra màn hình phần tử thứ i</span></span>
<span id="cb196-7"><a href="biến-trong-r.html#cb196-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Các đoạn câu lệnh kiểu trên sẽ lặp tối đa là 10.000 lần do chúng ta sử dụng thêm điều kiện <span class="math inline">\((i&lt;= loop\_max)\)</span></p>
</div>
<div id="điều-khiển-vòng-lặp" class="section level4 hasAnchor" number="3.2.2.3">
<h4><span class="header-section-number">3.2.2.3</span> Điều khiển vòng lặp<a href="biến-trong-r.html#điều-khiển-vòng-lặp" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Khi bạn đọc viết các vòng lặp <span class="math inline">\(for\)</span> hoặc <span class="math inline">\(while\)</span>, R cung cấp các từ khóa để bạn đọc có thể điều khiển vòng lặp. Các từ khóa đó bao gồm <span class="math inline">\(break\)</span> và <span class="math inline">\(next\)</span>. Ý nghĩa của các từ khóa này như sau</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-76">Table 3.15: </span>Các từ khóa điều khiển vòng lặp
</caption>
<thead>
<tr>
<th style="text-align:left;">
Từ khóa
</th>
<th style="text-align:left;">
Ý nghĩa
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
next
</td>
<td style="text-align:left;">
Chuyển tới bước lặp tiếp theo, bỏ qua các câu lệnh còn lại trong vòng lặp hiện tại
</td>
</tr>
<tr>
<td style="text-align:left;">
break
</td>
<td style="text-align:left;">
Dừng vòng lặp ngay lập tức
</td>
</tr>
</tbody>
</table>
<p>Bạn đọc thử quan sát giá trị trả ra màn hình của đoạn câu lệnh sau đề hiểu cách <span class="math inline">\(next\)</span> vận hành:</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="biến-trong-r.html#cb197-1" aria-hidden="true" tabindex="-1"></a>qua <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;chuối&quot;</span>, <span class="st">&quot;táo&quot;</span>, <span class="st">&quot;cam&quot;</span>, <span class="st">&quot;chanh&quot;</span>) <span class="co"># Vec-tơ chứa tên các loại quả</span></span>
<span id="cb197-2"><a href="biến-trong-r.html#cb197-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (ten <span class="cf">in</span> qua){ <span class="co"># cho biến ten nhận lần lượt các giá trị trong vec-tơ qua</span></span>
<span id="cb197-3"><a href="biến-trong-r.html#cb197-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (ten <span class="sc">==</span> <span class="st">&quot;cam&quot;</span>){</span>
<span id="cb197-4"><a href="biến-trong-r.html#cb197-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">next</span> <span class="co"># nếu ten là &quot;cam&quot; thì chuyển qua vòng lặp tiếp theo</span></span>
<span id="cb197-5"><a href="biến-trong-r.html#cb197-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb197-6"><a href="biến-trong-r.html#cb197-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(ten) <span class="co"># in ten ra màn hình</span></span>
<span id="cb197-7"><a href="biến-trong-r.html#cb197-7" aria-hidden="true" tabindex="-1"></a>} <span class="co"># kết thúc vòng lặp for</span></span></code></pre></div>
<pre><code>## [1] &quot;chuối&quot;
## [1] &quot;táo&quot;
## [1] &quot;chanh&quot;</code></pre>
<p>Bạn đọc có thể thấy rằng trong các loại quả được in ra màn hình không có giá trị <span class="math inline">\(&quot;cam&quot;\)</span> bởi vì khi gặp giá trị này từ khóa <span class="math inline">\(&quot;next&quot;\)</span> đã kết thúc vòng lặp hiện tại, bỏ qua dòng lệnh <span class="math inline">\(print\)</span> và đi đến vòng lặp tiếp theo. Vẫn các câu lệnh như trên nhưng thay <span class="math inline">\(next\)</span> bằng <span class="math inline">\(break\)</span>, chúng ta có thể quan sát R trả ra kết quả:</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="biến-trong-r.html#cb199-1" aria-hidden="true" tabindex="-1"></a>qua <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;chuối&quot;</span>, <span class="st">&quot;táo&quot;</span>, <span class="st">&quot;cam&quot;</span>, <span class="st">&quot;chanh&quot;</span>) <span class="co"># Vec-tơ chứa tên các loại quả</span></span>
<span id="cb199-2"><a href="biến-trong-r.html#cb199-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (ten <span class="cf">in</span> qua){ <span class="co"># cho biến ten nhận lần lượt các giá trị trong vec-tơ qua</span></span>
<span id="cb199-3"><a href="biến-trong-r.html#cb199-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (ten <span class="sc">==</span> <span class="st">&quot;cam&quot;</span>){</span>
<span id="cb199-4"><a href="biến-trong-r.html#cb199-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span> <span class="co"># nếu ten là &quot;cam&quot; thì kết thúc vòng lặp ngay lập tức</span></span>
<span id="cb199-5"><a href="biến-trong-r.html#cb199-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb199-6"><a href="biến-trong-r.html#cb199-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(ten) <span class="co"># in ten ra màn hình</span></span>
<span id="cb199-7"><a href="biến-trong-r.html#cb199-7" aria-hidden="true" tabindex="-1"></a>} <span class="co"># kết thúc vòng lặp for</span></span></code></pre></div>
<pre><code>## [1] &quot;chuối&quot;
## [1] &quot;táo&quot;</code></pre>
<p>Bạn đọc có thể thấy rằng R chỉ trả ra tên hai loại quả là <span class="math inline">\(&quot;chuối&quot;\)</span> và <span class="math inline">\(&quot;táo&quot;\)</span> bởi vì khi gặp giá trị <span class="math inline">\(&quot;cam&quot;\)</span> từ khóa <span class="math inline">\(break\)</span> đã kết thúc vòng lặp <span class="math inline">\(for\)</span>.</p>
<p>Trong R còn có một kiểu viết vòng lặp không xác định khác với vòng lặp <span class="math inline">\(while\)</span>, đó là viết vòng lặp sử dụng câu lệnh <span class="math inline">\(repeat\)</span>. Khi sử dụng vòng lặp <span class="math inline">\(repeat\)</span> bạn đọc luôn luôn phải sử dụng từ khóa <span class="math inline">\(break\)</span> để kết thúc vòng lặp để tránh bị lặp vô hạn. Cách sử dụng <span class="math inline">\(repeat\)</span> trong R như sau</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="biến-trong-r.html#cb201-1" aria-hidden="true" tabindex="-1"></a>qua <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;chuối&quot;</span>, <span class="st">&quot;táo&quot;</span>, <span class="st">&quot;cam&quot;</span>, <span class="st">&quot;chanh&quot;</span>) <span class="co"># Vec-tơ chứa tên các loại quả</span></span>
<span id="cb201-2"><a href="biến-trong-r.html#cb201-2" aria-hidden="true" tabindex="-1"></a>i<span class="ot">&lt;-</span><span class="dv">0</span></span>
<span id="cb201-3"><a href="biến-trong-r.html#cb201-3" aria-hidden="true" tabindex="-1"></a><span class="cf">repeat</span>{</span>
<span id="cb201-4"><a href="biến-trong-r.html#cb201-4" aria-hidden="true" tabindex="-1"></a>  i<span class="ot">&lt;-</span>i<span class="sc">+</span><span class="dv">1</span> <span class="co"># luôn luôn tăng i</span></span>
<span id="cb201-5"><a href="biến-trong-r.html#cb201-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(qua[i]) <span class="co"># in tên ra màn hình</span></span>
<span id="cb201-6"><a href="biến-trong-r.html#cb201-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (i<span class="sc">==</span> <span class="fu">length</span>(qua)){<span class="cf">break</span>}</span>
<span id="cb201-7"><a href="biến-trong-r.html#cb201-7" aria-hidden="true" tabindex="-1"></a>} <span class="co"># kết thúc vòng lặp repeat</span></span></code></pre></div>
<pre><code>## [1] &quot;chuối&quot;
## [1] &quot;táo&quot;
## [1] &quot;cam&quot;
## [1] &quot;chanh&quot;</code></pre>
<p>Trong vòng lặp <span class="math inline">\(repeat\)</span> ở trên, chúng tôi đã sử dụng điều kiện là <span class="math inline">\(i\)</span> bằng độ dài của véc-tơ để kết thúc vòng lặp. Những bạn đọc mới làm quen với lập trình sẽ dễ bị nhầm lẫn về cách kết thúc vòng lặp của <span class="math inline">\(while\)</span> và <span class="math inline">\(repeat\)</span>. Cách hoạt động của hai vòng lặp này là tương đương nhau nên chúng tôi cho rằng những bạn đọc chưa quen với lập trình nên chỉ chọn một trong hai cách viết trong quá trình làm việc</p>
</div>
</div>
<div id="viết-hàm-số" class="section level3 hasAnchor" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Viết hàm số<a href="biến-trong-r.html#viết-hàm-số" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Hàm số có vai trò quan trọng trong R hoặc trong bất kỳ ngôn ngữ lập trình nào khác. Hàm số đảm bảo sự chính xác và tiện lợi khi viết chương trình và hàm số là phương pháp chuyển giao kiến thức và kinh nghiệm từ người dùng này đến người dùng khác.</p>
<ol style="list-style-type: decimal">
<li><p>Hàm số đặc biệt có ý nghĩa khi bạn phải thực hiện một đoạn câu lệnh một cách lặp đi lặp lại và do sự thay đổi của một số yếu tố đầu vào. Hãy lấy ví dụ đơn giản là bạn nhận được dữ liệu hàng ngày</p></li>
<li><p>Chuyển giao kiến thức</p></li>
</ol>
<div id="hàm-số-do-người-dùng-tự-định-nghĩa." class="section level4 hasAnchor" number="3.2.3.1">
<h4><span class="header-section-number">3.2.3.1</span> Hàm số do người dùng tự định nghĩa.<a href="biến-trong-r.html#hàm-số-do-người-dùng-tự-định-nghĩa." class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Từ khóa để khai báo một hàm số là <span class="math inline">\(function\)</span>. Để tự tạo một hàm số tên là <span class="math inline">\(f\)</span> nhận giá trị là <span class="math inline">\(x^2\)</span> thì bạn đọc sử dụng đoạn câu lệnh như sau:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="biến-trong-r.html#cb203-1" aria-hidden="true" tabindex="-1"></a>f<span class="ot">&lt;-</span><span class="cf">function</span>(x){ <span class="co"># là một hàm số của biến x</span></span>
<span id="cb203-2"><a href="biến-trong-r.html#cb203-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x<span class="sc">^</span><span class="dv">2</span>) <span class="co"># trả lại giá trị của hàm số là x^2</span></span>
<span id="cb203-3"><a href="biến-trong-r.html#cb203-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Hoặc thay vì sử dụng từ khóa <span class="math inline">\(return\)</span>, bạn đọc cũng có thể sử dụng tên hàm số đển gán cho giá trị trả lại:</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="biến-trong-r.html#cb204-1" aria-hidden="true" tabindex="-1"></a>f<span class="ot">&lt;-</span><span class="cf">function</span>(x){ <span class="co"># là một hàm số của biến x</span></span>
<span id="cb204-2"><a href="biến-trong-r.html#cb204-2" aria-hidden="true" tabindex="-1"></a>  f<span class="ot">&lt;-</span>x<span class="sc">^</span><span class="dv">2</span> <span class="co"># trả lại giá trị của hàm số là x^2</span></span>
<span id="cb204-3"><a href="biến-trong-r.html#cb204-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Đôi khi bạn đọc sẽ gặp các đoạn lệnh khai báo hàm số không có câu lệnh <span class="math inline">\(return\)</span> hay không có phần gán giá trị cho hàm số. R sẽ luôn luôn lấy giá trị được trả ra cuối cùng để gán giá trị cho hàm số đó.</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="biến-trong-r.html#cb205-1" aria-hidden="true" tabindex="-1"></a>f<span class="ot">&lt;-</span><span class="cf">function</span>(x) x<span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<p>Cách viết này chỉ phù hợp cho các hàm số ngắn gọn và chúng tôi khuyên bạn đọc hãy luôn sử dụng một trong hai cách ở trên khi trả lại giá trị cho hàm số.</p>
<p>Sau khi đã chạy các đoạn lệnh khai báo hàm số <span class="math inline">\(f(x) = x^2\)</span> R sẽ lưu đối tượng có tên là <span class="math inline">\(f\)</span> là kiểu hàm số lên môi trường làm việc chung. Để gọi hàm số và thực hiện tính toán, bạn đọc cần viết đúng tên hàm và cho tham số <span class="math inline">\(x\)</span> giá trị phù hợp.</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="biến-trong-r.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(f)</span></code></pre></div>
<pre><code>## [1] &quot;function&quot;</code></pre>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="biến-trong-r.html#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(<span class="dv">10</span>) <span class="co"># cho tham số x giá trị bằng 10</span></span></code></pre></div>
<pre><code>## [1] 100</code></pre>
<p>Hàm số <span class="math inline">\(return()\)</span> được sử dụng để trả lại giá trị cho hàm số và R sẽ trả lại giá trị cho hàm số ngay lập tức khi gặp hàm câu lệnh <span class="math inline">\(return()\)</span>. Hãy quan sát ví dụ sau</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="biến-trong-r.html#cb210-1" aria-hidden="true" tabindex="-1"></a>f<span class="ot">&lt;-</span><span class="cf">function</span>(x){ <span class="co"># là một hàm số của biến x</span></span>
<span id="cb210-2"><a href="biến-trong-r.html#cb210-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x<span class="sc">^</span><span class="dv">2</span>) <span class="co"># trả lại giá trị của hàm số là x^2 khi gặp return</span></span>
<span id="cb210-3"><a href="biến-trong-r.html#cb210-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x<span class="sc">^</span><span class="dv">3</span>) <span class="co"># R sẽ không chạy câu lệnh này</span></span>
<span id="cb210-4"><a href="biến-trong-r.html#cb210-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb210-5"><a href="biến-trong-r.html#cb210-5" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(<span class="dv">10</span>) <span class="co"># trả lại gái trị là 100</span></span></code></pre></div>
<p>Cách đặt tên hàm số cũng giống như đặt tên biến trong R, bạn đọc cần lựa chọn tên hợp lệ và tránh các từ khóa. Biến <span class="math inline">\(x\)</span> trong phần khai báo hàm số ở trên được gọi là biến, tham số, hoặc tùy biến. Hàm số có thể không có tham số nào hoặc có thể có rất nhiều tham số, mỗi tham số là một kiểu đối tượng khác nhau, việc này hoàn toàn tùy thuộc vào người lập trình. Bên trong dấu <span class="math inline">\(\{\}\)</span> của hàm số được gọi là môi trường cục bộ, R sẽ luôn ưu tiên biến nằm trong môi trường này trước tất cả các môi trường khác. Vấn đề sẽ được thảo luận ở phần tiếp theo. Một điểu cần lưu ý là khi viết hàm số hãy luôn luôn có tài liệu đi kèm rõ ràng để người sử dụng khác, hoặc chính mình khi sử dụng hàm có thể hiểu hay nhớ được hàm số được sử dụng như thế nào, với mục đích gì.</p>
<p>Tham số hay biến số là phần thiết yếu của các hàm trong R. Trong phần tiếp theo, chúng ta sẽ xem xét cách tham số trong hàm số hoạt động như thế nào, chẳng hạn như cách tạo giá trị mặc định cho tham số, cách xử lý các giá trị tham số bị thiếu, cách bổ sung vào tham số bằng cách sử dụng dấu ba chấm <span class="math inline">\(&quot;...&quot;\)</span>.</p>
<p>Để tạo giá trị mặc định cho tham số bạn đọc cần tạo giá trị phù hợp cho tham số khi khai báo hàm số. Tạo giá trị mặc định cho tham số là quan trọng khi bạn đọc viết các hàm số có nhiều tham số bởi vì khi bạn gọi hàm số và quên tạo giá trị cho một vài tham số nào đó, R sẽ sử dụng giá trị mặc định để tính toán. Hãy xem xét ví dụ sau: bạn muốn viết một hàm số để tính giá trị hiện tại (present value) của một dòng tiền được quan sát theo năm được lưu trong một véc-tơ tên là <span class="math inline">\(CF\)</span>. Lãi suất tính theo kiểu lãi gộp là <span class="math inline">\(i\)</span>. Chúng ta sẽ sử dụng giá trị mặc định là <span class="math inline">\(5\%\)</span> để gán cho <span class="math inline">\(i\)</span></p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="biến-trong-r.html#cb211-1" aria-hidden="true" tabindex="-1"></a>PV<span class="ot">&lt;-</span><span class="cf">function</span>(<span class="at">i =</span> <span class="fl">0.05</span>, CF){  <span class="co"># Hàm số tính PV của CF</span></span>
<span id="cb211-2"><a href="biến-trong-r.html#cb211-2" aria-hidden="true" tabindex="-1"></a>  n<span class="ot">&lt;-</span><span class="fu">length</span>(CF)</span>
<span id="cb211-3"><a href="biến-trong-r.html#cb211-3" aria-hidden="true" tabindex="-1"></a>  discount_factor<span class="ot">&lt;-</span>(<span class="dv">1</span><span class="sc">+</span>i)<span class="sc">^</span>(<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span>n))</span>
<span id="cb211-4"><a href="biến-trong-r.html#cb211-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span> (<span class="fu">sum</span>(discount_factor <span class="sc">*</span> CF))</span>
<span id="cb211-5"><a href="biến-trong-r.html#cb211-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Chúng ta có thể tính được giá trị hiện tại của dòng tiền trả tăng dần từ $1.000 đến $10.000 trong vòng 10 năm tại mức lãi suất gộp <span class="math inline">\(i = 10\%\)</span> như sau</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="biến-trong-r.html#cb212-1" aria-hidden="true" tabindex="-1"></a>MyCF<span class="ot">&lt;-</span><span class="fu">seq</span>(<span class="dv">1000</span>,<span class="dv">10000</span>,<span class="at">length=</span><span class="dv">10</span>)</span>
<span id="cb212-2"><a href="biến-trong-r.html#cb212-2" aria-hidden="true" tabindex="-1"></a><span class="fu">PV</span>(<span class="at">i =</span> <span class="fl">0.1</span>, MyCF) <span class="co"># Giá trị hiện tại của dòng tiền MyCF tại lãi suất 10%/năm</span></span></code></pre></div>
<pre><code>## [1] 29035.91</code></pre>
<p>Khi chúng ta quên không gán giá trị cho tham số <span class="math inline">\(i\)</span> khi gọi hàm <span class="math inline">\(PV\)</span>, R sẽ cho <span class="math inline">\(i\)</span> nhận giá trị mặc định là <span class="math inline">\(5\%\)</span></p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="biến-trong-r.html#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PV</span>(<span class="at">CF =</span> MyCF) <span class="co"># Giá trị hiện tại của dòng tiền MyCF tại lãi suất 10%/năm</span></span></code></pre></div>
<pre><code>## [1] 39373.78</code></pre>
<p>Dấu ba chấm <span class="math inline">\(&quot;...&quot;\)</span> trong khai báo tham số của một hàm số là phương pháp để người lập trình sử dụng tham số có sẵn của một hàm số khác. Nguyên tắc hoạt động của cách khai báo tham số này thể hiện qua ví dụ sau: Hàm <span class="math inline">\(PV\)</span> được xây dựng ở trên chỉ tính cho dòng tiền tại các thời điểm cuối các năm; bạn đọc muốn hàm <span class="math inline">\(PV\)</span> có thể tính được giá trị hiện tại của dòng tiền bắt đầu từ thời điểm đầu năm hoặc cuối năm bằng cách thêm vào một tham số <span class="math inline">\(bat\_dau\)</span>; khi <span class="math inline">\(bat\_dau = 0\)</span> thì thời điểm bắt đầu là đầu năm thứ nhất và khi <span class="math inline">\(bat\_dau = 1\)</span> thì thời điểm bắt đầu là cuối năm thứ nhất. Thay vì sửa lại làm <span class="math inline">\(PV\)</span> chúng ta có thể viết một hàm mới, tạm gọi là <span class="math inline">\(PV1\)</span> và sử dụng tham số của hàm <span class="math inline">\(PV\)</span></p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="biến-trong-r.html#cb216-1" aria-hidden="true" tabindex="-1"></a>PV1<span class="ot">&lt;-</span><span class="cf">function</span>(bat_dau,i,...){ <span class="co"># chúng ta chỉ sử dụng tham số i của PV, các tham số khác khai báo bằng ...</span></span>
<span id="cb216-2"><a href="biến-trong-r.html#cb216-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (bat_dau<span class="sc">==</span><span class="dv">1</span>) {</span>
<span id="cb216-3"><a href="biến-trong-r.html#cb216-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span> (<span class="fu">PV</span>(i,...)) <span class="co"># PV1 sử dụng các tham số còn lại của PV</span></span>
<span id="cb216-4"><a href="biến-trong-r.html#cb216-4" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb216-5"><a href="biến-trong-r.html#cb216-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span> ( (<span class="dv">1</span><span class="sc">+</span>i)<span class="sc">*</span><span class="fu">PV</span>(i,...) ) <span class="co"># PV1 sử dụng các tham số còn lại của PV</span></span>
<span id="cb216-6"><a href="biến-trong-r.html#cb216-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb216-7"><a href="biến-trong-r.html#cb216-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Khi gọi hàm <span class="math inline">\(PV1\)</span> chúng ta cần gọi đầy đủ tham số:</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="biến-trong-r.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PV1</span>(<span class="at">bat_dau =</span> <span class="dv">0</span>,<span class="at">i =</span> <span class="fl">0.1</span>, <span class="at">CF =</span> MyCF) <span class="co"># dòng tiền bắt đầu từ đầu năm thứ 1</span></span></code></pre></div>
<pre><code>## [1] 31939.5</code></pre>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="biến-trong-r.html#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PV1</span>(<span class="at">bat_dau =</span> <span class="dv">1</span>,<span class="at">i =</span> <span class="fl">0.1</span>, <span class="at">CF =</span> MyCF) <span class="co"># dòng tiền bắt đầu từ cuối năm thứ 1</span></span></code></pre></div>
<pre><code>## [1] 29035.91</code></pre>
<p>Bạn đọc cũng có thể viết các hàm số sử dụng tham số của các hàm số có sẵn trong R. Trong ví dụ dưới đây, chúng tôi tự xây dựng một hàm có tên là <span class="math inline">\(myplot()\)</span> để vẽ đồ thị rải điểm của một véc-tơ kiểu số <span class="math inline">\(x\)</span> theo chỉ số của véc-tơ đó đồng thời và mượn các tùy biến <span class="math inline">\(main\)</span>, <span class="math inline">\(xlab\)</span>, <span class="math inline">\(ylab\)</span> của hàm <span class="math inline">\(plot\)</span> có sẵn:</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="biến-trong-r.html#cb221-1" aria-hidden="true" tabindex="-1"></a>myplot<span class="ot">&lt;-</span><span class="cf">function</span>(x,...){ <span class="co"># hàm myplot vẽ đồ thị rải điểm</span></span>
<span id="cb221-2"><a href="biến-trong-r.html#cb221-2" aria-hidden="true" tabindex="-1"></a>  n<span class="ot">&lt;-</span><span class="fu">length</span>(x) <span class="co"># độ dài của véc-tơ x</span></span>
<span id="cb221-3"><a href="biến-trong-r.html#cb221-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(<span class="dv">1</span><span class="sc">:</span>n,x,...)</span>
<span id="cb221-4"><a href="biến-trong-r.html#cb221-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Chúng ta sẽ sử dụng hàm <span class="math inline">\(myplot\)</span> để vẽ đồ thị rải điểm của véc-tơ <span class="math inline">\(x\)</span> nhận giá trị bằng véc-tơ kiểu chuỗi thời gian <span class="math inline">\(AirPassengers\)</span>.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="biến-trong-r.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="fu">myplot</span>(AirPassengers,<span class="at">main=</span><span class="st">&quot;Số lượng hành khách các tháng&quot;</span>, </span>
<span id="cb222-2"><a href="biến-trong-r.html#cb222-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">ylab =</span> <span class="st">&quot;Số lượng hành khách&quot;</span>, <span class="co"># tùy biến ylab của hàm plot()</span></span>
<span id="cb222-3"><a href="biến-trong-r.html#cb222-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">xlab =</span> <span class="st">&quot;&quot;</span>, <span class="co"># tùy biến xlab của hàm plot()</span></span>
<span id="cb222-4"><a href="biến-trong-r.html#cb222-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="co"># tùy biến type và color của hàm plot</span></span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-91-1.png" width="672" />
Hàm <span class="math inline">\(plot()\)</span> là một hàm số vẽ đồ thị rải điểm cơ bản trong R. Cách gọi các hàm số có sẵn trong R hoạc trong các thư viện được cài đặt thêm sẽ được thảo luận trong phần tiếp theo của cuốn sách.</p>
</div>
<div id="hàm-số-được-xây-dựng-sẵn" class="section level4 hasAnchor" number="3.2.3.2">
<h4><span class="header-section-number">3.2.3.2</span> Hàm số được xây dựng sẵn<a href="biến-trong-r.html#hàm-số-được-xây-dựng-sẵn" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Hàm số được xây dựng sẵn là các hàm số được phát triển trong các thư viện có sẵn trong R và các hàm số trong các thư viện mà bạn đọc cài đặt thêm cho R. Để biết R hiện đang có các thư viện nào đang sẵn sàng để sử dụng, bạn đọc chỉ cần sử dụng câu lệnh</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="biến-trong-r.html#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="fu">search</span>() <span class="co"># liệt kê danh sách các đối tượng, thư viện đang sẵn có theo thứ tự ưu tiên</span></span></code></pre></div>
<pre><code>##  [1] &quot;.GlobalEnv&quot;         &quot;package:dslabs&quot;     &quot;package:pryr&quot;      
##  [4] &quot;package:gridExtra&quot;  &quot;package:grid&quot;       &quot;package:forcats&quot;   
##  [7] &quot;package:ggplot2&quot;    &quot;package:kableExtra&quot; &quot;package:knitr&quot;     
## [10] &quot;package:dplyr&quot;      &quot;package:readxl&quot;     &quot;package:stats&quot;     
## [13] &quot;package:graphics&quot;   &quot;package:grDevices&quot;  &quot;package:utils&quot;     
## [16] &quot;package:datasets&quot;   &quot;package:methods&quot;    &quot;Autoloads&quot;         
## [19] &quot;package:base&quot;</code></pre>
<p>Đa số các phiên bản R đều có sẵn các thư viện như <span class="math inline">\(stats\)</span>, <span class="math inline">\(graphics\)</span>, <span class="math inline">\(utils\)</span>,… Để biết cụ thể hơn trong một thư viện có những đối tượng (hàm số, nhóm các hàm số) nào khác, chúng ta sử dụng câu lệnh</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="biến-trong-r.html#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="at">help =</span> <span class="st">&quot;stats&quot;</span>) <span class="co"># liệt kê các đối tượng trong thư viện stats</span></span></code></pre></div>
<p>Bạn đọc sẽ thấy cửa sổ script liệt kê ra danh sách các hàm số hoặc tên các đối tượng lưu chứa nhóm các hàm số đã được phát triển sẵn trong thư viện <span class="math inline">\(stats\)</span>. Một vài đối tượng được liệt kê ra trong danh sách là các hàm số: hàm <span class="math inline">\(AIC\)</span>, hàm <span class="math inline">\(ARMAacf\)</span>… Một số đối tượng là nhóm các hàm số, chẳng hạn như <span class="math inline">\(Beta\)</span> hay <span class="math inline">\(Binomal\)</span>. Khi bạn đọc thử chạy <span class="math inline">\(Beta\)</span> trên cửa sổ Console sẽ gặp lỗi vì đó không phải là tên chính xác của hàm số. Thay vì thế hãy chạy câu lệnh <span class="math inline">\(? Beta\)</span> để thấy rằng trong đối tượng <span class="math inline">\(Beta\)</span> của thư viện <span class="math inline">\(stats\)</span> có một nhóm các hàm số liên quan đến phân phối xác suất <span class="math inline">\(Beta\)</span>: hàm <span class="math inline">\(dbeta()\)</span>, hàm <span class="math inline">\(pbeta()\)</span>, hàm <span class="math inline">\(qbeta()\)</span>, và hàm <span class="math inline">\(rbeta()\)</span>.</p>
<p>Chúng tôi không bàn đến việc làm thế nào để biết sử dụng hàm số nào trong một trường hợp cụ thể bởi vì đương nhiên không có câu trả lời chung cho câu hỏi này. Việc này tùy thuộc vào chuyên môn, hiểu biết, khả năng tìm kiếm của bạn đọc. Chúng tôi muốn tập trung vào việc đảm bảo bạn đọc gọi đúng hàm số mà bạn mong muốn. Sẽ không có vấn đề lớn nếu tên hàm số bạn cần gọi là duy nhất trên cửa số R bạn đang làm việc. Tuy nhiên khi có một vài đối tượng khác có tên giống như tên hàm số bạn đang sử dụng, bạn sẽ gặp vấn đề.</p>
<p>Để làm được việc này bạn đọc nên hiểu một chút về môi trường làm việc và thứ tự ưu tiên khi gọi tên một đối tượng trong R. Khi bạn làm việc trên R, có ba môi trường mà R sử dụng để lưu trữ các đối tượng. Môi trường thứ nhất tạm gọi là môi trường chung (thuật ngữ CNTT gọi là toàn cục), thứ hai là môi trường các thư viện, và cuối cùng là môi trường trong một hàm số cụ thể (thuật ngữ CNTT gọi là cục bộ). Khi bạn gọi tên bất kỳ một đối hay một hàm số, R sẽ luôn luôn ưu tiên theo thứ tự là: môi trường cục bộ <span class="math inline">\(\rightarrow\)</span> môi trường chung (toàn cục) <span class="math inline">\(\rightarrow\)</span> môi trường các thư viện. Thứ tự ưu tiên của các thư viện xuất hiện theo thứ tự trong hàm <span class="math inline">\(search()\)</span>.</p>
<p>Các thư viện cài đặt thêm sẽ thường được ưu tiên hơn các thư viện có sẵn. Nếu một hàm trong thư viện cài đặt thêm trùng tên với một hàm trong thư viện có sẵn, R ưu tiên thư viện cài đặt thêm. Thật vậy, hàm số tên <span class="math inline">\(filter()\)</span> là một hàm được xây dựng sẵn trong thư viện <span class="math inline">\(stats\)</span>. Tuy nhiên trong thư viện <span class="math inline">\(dplyr\)</span> cũng có một hàm tên là <span class="math inline">\(filter\)</span>. Trước khi gọi thư viện <span class="math inline">\(dplyr\)</span>, mỗi khi bạn đọc gọi hàm <span class="math inline">\(filter\)</span> R sẽ luôn hiểu đây là hàm filter của thư viện <span class="math inline">\(stats\)</span>.</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="biến-trong-r.html#cb226-1" aria-hidden="true" tabindex="-1"></a>? filter <span class="co"># nếu chưa gọi thư viện dplyr, filter là hàm của thư viện stats</span></span></code></pre></div>
<p>Sau khi chúng ta gọi thư viện <span class="math inline">\(dplyr\)</span>, chúng ta sẽ thấy thư viện <span class="math inline">\(dplyr\)</span> xuất hiện trước thư viện <span class="math inline">\(stats\)</span> theo thứ tụ ưu tiên.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="biến-trong-r.html#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co"># gọi thư viện dplyr </span></span>
<span id="cb227-2"><a href="biến-trong-r.html#cb227-2" aria-hidden="true" tabindex="-1"></a><span class="fu">search</span>() <span class="co"># sau khi gọi thư viện dplyr, thư viện này được ưu tiên trước stats</span></span></code></pre></div>
<p>Trong thư viện <span class="math inline">\(dplyr\)</span> cũng có một hàm tên là <span class="math inline">\(filter\)</span>. Theo thứ tự ưu tiên nếu bạn đọc gọi hàm <span class="math inline">\(filter\)</span> thì R sẽ hiểu đây là hàm filter của thư viện <span class="math inline">\(dplyr\)</span>. Lúc này muốn sử dụng hàm <span class="math inline">\(filter\)</span> của thư viện <span class="math inline">\(stats\)</span> bạn đọc cần phải sử dụng tên thư viện viết trước hàm này <span class="math inline">\(stats::filter\)</span>.</p>
<p>Như đã nói ở phần trước, môi trường chung cũng là môi trường được ưu tiên trước môi trường các thư viện. Bạn đọc có thể thấy từ kết quả hàm <span class="math inline">\(search()\)</span>, môi trường chung, ký hiệu <span class="math inline">\(.GlobalEnv\)</span>, luôn xuất hiện trước tiên. Môi trường chung chính là nơi lưu trữ tất cả các hàm số hay đối tượng mà bạn đọc tự định nghĩa. Môi trường chung luôn được ưu tiên trước môi trường thư viện. Điều này có nghĩa là nếu bạn đọc khai báo một biến, một véc-tơ, hay hàm số có tên là <span class="math inline">\(filter\)</span>, R sẽ ưu tiên tên <span class="math inline">\(filter\)</span> cho đối tượng mà bạn đọc tự định nghĩa. Nếu bạn đọc sử dụng tên <span class="math inline">\(filter\)</span> cho hàm tự định nghĩa, bạn đọc sẽ cần phải sử dụng thêm tên thư viện để gọi hàm <span class="math inline">\(filter\)</span> từ các thư viện <span class="math inline">\(dplyr\)</span> hoặc <span class="math inline">\(stats\)</span>.</p>
<p>Còn một môi trường khác, tạm gọi là môi trường cục bộ, sẽ được ưu tiên hơn môi trường chung. Môi trường cục bộ mô tả môi trường bên trong một hàm số mà bạn đọc tự định nghĩa. Nếu bạn đọc tự định nghĩa một hàm <span class="math inline">\(filter\)</span> trên môi trường chung và tự định nghĩa một hàm số <span class="math inline">\(f\)</span> có sử dụng một tham số (có thể là biến hoặc hàm số) có tên là <span class="math inline">\(filter\)</span> thì mỗi khi bạn đọc gọi hàm số <span class="math inline">\(f\)</span>, đối tượng tên <span class="math inline">\(filter\)</span> sẽ luôn được hiểu là tham số của hàm số <span class="math inline">\(f\)</span>. Môi trường bên trong hàm <span class="math inline">\(f\)</span> được gọi là môi trường cục bộ. Bạn đọc hãy quan sát ví dụ dưới đây để hiểu hơn về môi trường chung và môi trường cục bộ</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="biến-trong-r.html#cb228-1" aria-hidden="true" tabindex="-1"></a>filter<span class="ot">&lt;-</span><span class="cf">function</span>(){<span class="fu">return</span>(pi)} <span class="co">#Tự định nghĩa hàm filter trong môi trường chung</span></span>
<span id="cb228-2"><a href="biến-trong-r.html#cb228-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>() <span class="co"># hàm filter trong .GlobalEnv luôn bằng pi </span></span></code></pre></div>
<pre><code>## [1] 3.141593</code></pre>
<p>Trước hết chúng ta định nghĩa một hàm tên là <span class="math inline">\(filter()\)</span> trong môi trường chung bằng hằng số <span class="math inline">\(pi\)</span>. Lúc này khi gọi <span class="math inline">\(filter()\)</span> R sẽ hiểu rằng đây là hàm <span class="math inline">\(filter\)</span> do chúng ta tự định nghĩa. Sau đó chúng ta định nghĩa một hàm số tên là <span class="math inline">\(f\)</span> và bên trong hàm <span class="math inline">\(f\)</span> chúng ta định nghĩa một hàm <span class="math inline">\(filter\)</span> khác nhận giá trị là 10. Hàm <span class="math inline">\(filter\)</span> bên trong hàm <span class="math inline">\(f\)</span> được gọi là hàm số trong môi trường cục bộ.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="biến-trong-r.html#cb230-1" aria-hidden="true" tabindex="-1"></a>f<span class="ot">&lt;-</span><span class="cf">function</span>(){</span>
<span id="cb230-2"><a href="biến-trong-r.html#cb230-2" aria-hidden="true" tabindex="-1"></a>  filter<span class="ot">&lt;-</span><span class="cf">function</span>(){<span class="fu">return</span>(<span class="dv">10</span>)}  <span class="co"># bên trong hàm f, định nghĩa lại hàm filter bằng 10</span></span>
<span id="cb230-3"><a href="biến-trong-r.html#cb230-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">filter</span>())</span>
<span id="cb230-4"><a href="biến-trong-r.html#cb230-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Khi chúng ta gọi hàm số <span class="math inline">\(f\)</span>, hàm <span class="math inline">\(f\)</span> lại gọi một hàm số tên là <span class="math inline">\(filter\)</span> được định nghĩa bên trong hàm số này bởi vì R ưu tiên môi trường cục bộ trước môi trường chung. Sau khi gọi hàm <span class="math inline">\(f\)</span>, chúng ta lại gọi hàm <span class="math inline">\(filter\)</span>, lúc này hàm <span class="math inline">\(filter\)</span> lại là hàm trong môi trường chung</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="biến-trong-r.html#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>() <span class="co"># trả lại giá trị là 10 vì hàm filter bên trong f nhận giá trị 10</span></span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="biến-trong-r.html#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>() <span class="co"># trả lại giá trị pi</span></span></code></pre></div>
<pre><code>## [1] 3.141593</code></pre>
</div>
</div>
</div>
<div id="ma-trận-mảng-nhiều-chiều-và-list" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Ma trận, mảng nhiều chiều và <span class="math inline">\(list\)</span><a href="biến-trong-r.html#ma-trận-mảng-nhiều-chiều-và-list" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Trong cuốn sách này chúng tôi cố gắng tránh nhắc đến các khái niệm toán học phức tạp bởi đối tượng chúng tôi hướng đến là những người làm việc với dữ liệu nhưng không cần một nền tảng quá cao về toán. Tuy nhiên để làm việc được với dữ liệu thì các kiến thức về ma trận nói riêng hay kiến thức về đại số tuyến tính nói chung là bắt buộc phải nắm vững. Điều đáng tiếc là tại thời điểm chúng tôi viết cuốn sách này, đa số các chương trình đào tạo dành cho sinh viên các ngành kinh tế đang cắt giảm dần kiến thức về toán học và đặc biệt là kiến thức đại số tuyến tính.</p>
<div id="ma-trận" class="section level3 hasAnchor" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Ma trận<a href="biến-trong-r.html#ma-trận" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Ma trận có ý nghĩa đặc biệt quan trọng trong phân tích dữ liệu bởi đa số các dữ liệu sau khi được số hóa đều được chuyển thành kiểu ma trận để dễ dàng phân tích và tính toán. Cũng giống như véc-tơ, ma trận là một đối tượng dùng để lưu các biến có cùng kiểu. Khác với véc-tơ, ma trận lưu phần tử theo hàng và cột, nghĩa là trong không gian hai chiều trong khi véc-tơ lưu phần tử trong không gian 1 chiều. Bạn đọc cũng có thể hiểu véc-tơ là một cột trong khi ma trận là tập hợp của các cột có cùng độ dài. Kích thước của một véc-tơ là chiều dài của véc-tơ đó trong khi kích thước của một ma trận là số hàng và số cột của ma trận đó.</p>
<div id="khời-tạo-ma-trận" class="section level4 hasAnchor" number="3.3.1.1">
<h4><span class="header-section-number">3.3.1.1</span> Khời tạo ma trận<a href="biến-trong-r.html#khời-tạo-ma-trận" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Hàm số dùng để tạo ra ma trận trong R là <span class="math inline">\(matrix()\)</span>. Tạo ma trận, bạn đọc sẽ luôn luôn phải khởi tạo giá trị cho ma trận đó. Đoạn lệnh sau sẽ khởi tạo một ma trận có tên là <span class="math inline">\(M\)</span>, có 3 hàng, 4 cột và giá trị trong ma trận là các số tự nhiên từ 1 đến 12 được sắp xếp theo thứ tự</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="biến-trong-r.html#cb235-1" aria-hidden="true" tabindex="-1"></a>M<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">4</span>) <span class="co"># nrow: số hàng, ncol: số cột</span></span>
<span id="cb235-2"><a href="biến-trong-r.html#cb235-2" aria-hidden="true" tabindex="-1"></a>M <span class="co"># in M ra của sổ console</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    4    7   10
## [2,]    2    5    8   11
## [3,]    3    6    9   12</code></pre>
<p>Các giá trị dùng để khởi tạo cho ma trận là các số từ 1 đến 12 và được điền vào theo nguyên tắc từ trên xuống dưới và từ trái sang phải, nghĩa là cột thứ nhất sẽ được ưu tiên cho giá trị trước, phần tử hàng thứ nhất của cột thứ nhất sẽ được điền giá trị trước, sau đó đến phần tử ở hàng thứ hai của cột thứ nhất, …, sau khi hết cột thứ nhất R sẽ quay trở lại điền vào giá trị ở hàng thứ nhất của cột thứ hai, và cứ tiếp tục như thế sau khi tất cả các phần tử trong ma trận được điền. Véc-tơ dùng đề khởi tạo giá trị cho ma trận có độ dài 12 vừa đúng với số phần tử trong ma trận nên câu lệnh tạo ma trận <span class="math inline">\(M\)</span> ở trên hoạt động bình thường. Trong trường hợp do nhầm lẫn bạn đọc sử dụng véc-tơ có độ dài khác 12 để khởi tạo giá trị cho ma trận, câu lệnh vẫn sẽ chạy nhưng có kèm theo cảnh báo:</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="biến-trong-r.html#cb237-1" aria-hidden="true" tabindex="-1"></a>M<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">13</span>, <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">4</span>) <span class="co"># Code chạy kèm theo cảnh báo; </span></span>
<span id="cb237-2"><a href="biến-trong-r.html#cb237-2" aria-hidden="true" tabindex="-1"></a>M<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">4</span>) <span class="co"># Code chạy kèm theo cảnh báo; </span></span></code></pre></div>
<p>Bạn đọc có thể thấy rằng:</p>
<ul>
<li><p>Nếu véc-tơ dùng để khởi tạo giá trị cho ma trận có độ dài lớn hơn 12, R sẽ dùng 12 giá trị đầu tiên để khởi tạo giá trị cho ma trận.</p></li>
<li><p>Nếu véc-tơ dùng để khởi tạo giá trị cho ma trận có độ dài nhỏ hơn 12, R sẽ lặp lại véc-tơ đó cho đến khi có độ dài lớn hơn hoặc bằng 12 rồi sau đó dùng 12 giá trị đầu tiên để khởi tạo giá trị cho ma trận.</p></li>
</ul>
<p>Khi khởi tạo ma trận, bạn đọc có thể yêu cầu giá trị được khởi tạo theo hàng thay vì theo cột bằng tùy biến <span class="math inline">\(byrow = TRUE\)</span> trong hàm <span class="math inline">\(matrix()\)</span>.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="biến-trong-r.html#cb238-1" aria-hidden="true" tabindex="-1"></a>M<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">4</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>) <span class="co"># nrow: số hàng, ncol: số cột</span></span>
<span id="cb238-2"><a href="biến-trong-r.html#cb238-2" aria-hidden="true" tabindex="-1"></a>M <span class="co"># in M ra của sổ console</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    2    3    4
## [2,]    5    6    7    8
## [3,]    9   10   11   12</code></pre>
<p>Để biết kích cỡ của ma trận, chúng ta sử dụng hàm <span class="math inline">\(dim()\)</span>. Hàm <span class="math inline">\(dim()\)</span> trên ma trận sẽ trả lại giá trị là một véc-tơ kiểu số có độ dài là hai, phần tử thứ nhất là số hàng, phần tử thứ hai là số cột của ma trận</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="biến-trong-r.html#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(M) <span class="co"># ma trận 3 hàng 4 cột</span></span></code></pre></div>
<pre><code>## [1] 3 4</code></pre>
<p>Ma trận cũng có thể được khởi tạo bằng cách ghép các véc-tơ hoặc các ma trận khác theo hàng hay theo cột bằng các hàm <span class="math inline">\(cbind()\)</span> hoặc <span class="math inline">\(rbind()\)</span>.</p>
<p>-Hàm <span class="math inline">\(cbind()\)</span> nối các ma trận có cùng số hàng hoặc ma trận với véc-tơ có độ dài bằng số hàng của ma trận.</p>
<p>-Tương tự, <span class="math inline">\(rbind()\)</span> nối các ma trận có cùng số cột hoặc ma trận với véc-tơ có độ dài bằng số cột của ma trận.</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="biến-trong-r.html#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(M,<span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">3</span>)) <span class="co"># ghép THEO CỘT, ma trận M (3 hàng, 4 cột) với véc-tơ độ dài 3</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    2    3    4    1
## [2,]    5    6    7    8    1
## [3,]    9   10   11   12    1</code></pre>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="biến-trong-r.html#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(M,<span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">4</span>)) <span class="co"># ghép THEO HÀNG, ma trận M (3 hàng, 4 cột) với véc-tơ độ dài 4</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    2    3    4
## [2,]    5    6    7    8
## [3,]    9   10   11   12
## [4,]    1    1    1    1</code></pre>
</div>
<div id="cách-lấy-phần-tử-con---ma-trận-con." class="section level4 hasAnchor" number="3.3.1.2">
<h4><span class="header-section-number">3.3.1.2</span> Cách lấy phần tử con - ma trận con.<a href="biến-trong-r.html#cách-lấy-phần-tử-con---ma-trận-con." class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Tương tự như với véc-tơ, chúng ta sử dụng <span class="math inline">\([]\)</span> để lấy phần tử con trong ma trận. Khác với véc-tơ là ma trận có chỉ số hàng và chỉ số cột nên chúng ta cần cho biết lấy phần tử ở hàng thứ bao nhiêu và cột thứ bao nhiêu.</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="biến-trong-r.html#cb246-1" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">3</span>] <span class="co"># phần tử ở hàng thứ hai, cột thứ ba của ma trận M</span></span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<p>Chúng ta cũng có thể lấy ra véc-tơ hàng hoặc véc-tơ cột của ma trận bằng cách sau</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="biến-trong-r.html#cb248-1" aria-hidden="true" tabindex="-1"></a>M[,<span class="dv">3</span>] <span class="co"># lấy ra véc-tơ cột thứ 3 của ma trận M</span></span></code></pre></div>
<pre><code>## [1]  3  7 11</code></pre>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="biến-trong-r.html#cb250-1" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,] <span class="co"># lấy ra véc-tơ hàng thứ 2 của ma trận M</span></span></code></pre></div>
<pre><code>## [1] 5 6 7 8</code></pre>
<p>Để lấy ra một ma trận con của một ma trận, chúng ta cũng tạo véc-tơ chỉ số giống như cách tạo chỉ số với véc-tơ. Thay vì chỉ tạo một véc-tơ chỉ số, chúng ta cần tạo một véc-tơ chỉ số theo hàng và một véc-tơ chỉ số theo cột. Bạn đọc có thể tạo chỉ số bằng một véc-tơ kiểu số hoặc véc-tơ kiểu logical hoặc kết hợp cả hai.</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="biến-trong-r.html#cb252-1" aria-hidden="true" tabindex="-1"></a>chi_so_hang<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span>) <span class="co"># Chỉ số theo hàng kiểu logical</span></span>
<span id="cb252-2"><a href="biến-trong-r.html#cb252-2" aria-hidden="true" tabindex="-1"></a>chi_so_cot<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>) <span class="co"># chỉ số cột theo kiểu số</span></span>
<span id="cb252-3"><a href="biến-trong-r.html#cb252-3" aria-hidden="true" tabindex="-1"></a>M[chi_so_hang,chi_so_cot] <span class="co"># ma trận con của ma trận M</span></span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    2    4
## [2,]   10   12</code></pre>
</div>
<div id="các-phép-toán-trên-ma-trận" class="section level4 hasAnchor" number="3.3.1.3">
<h4><span class="header-section-number">3.3.1.3</span> Các phép toán trên ma trận<a href="biến-trong-r.html#các-phép-toán-trên-ma-trận" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
</div>
<div id="mảng-nhiều-chiều" class="section level3 hasAnchor" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Mảng nhiều chiều<a href="biến-trong-r.html#mảng-nhiều-chiều" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="list" class="section level3 hasAnchor" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> <span class="math inline">\(List\)</span><a href="biến-trong-r.html#list" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
</div>
<div id="các-hàm-họ-apply" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Các hàm họ <span class="math inline">\(apply()\)</span><a href="biến-trong-r.html#các-hàm-họ-apply" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!-- # REFERENCE -->
<!-- ### Source from thesis -->
<!-- **1.** Chen, Chun-houh, Wolfgang Karl Härdle, and Antony Unwin, eds (2007). *Handbook of data visualization.* \ -->
<!-- **2.** Aparicio, Manuela, and Carlos J. Costa. (2015). *Data visualization - Communication design quarterly review.* \ -->
<!-- **3.** Hadley Wickham. (2010). *A Layered Grammar of Graphics.* \ -->
<!-- ### Souce from website -->
<!-- **4.** [https://www.tableau.com/learn/articles/data-visualization](https://www.tableau.com/learn/articles/data-visualization) \ -->
<!-- **5.** [https://www.r-graph-gallery.com/ggplot2-package.html](https://www.r-graph-gallery.com/ggplot2-package.html) \ -->
<!-- **6.** [http://r-statistics.co/ggplot2-Tutorial-With-R.html](http://r-statistics.co/ggplot2-Tutorial-With-R.html) \ -->
<!-- **7.** [https://www.maths.usyd.edu.au/u/UG/SM/STAT3022/r/current/Misc/data-visualization-2.1.pdf](https://www.maths.usyd.edu.au/u/UG/SM/STAT3022/r/current/Misc/data-visualization-2.1.pdf) \ -->
<!-- **8.** [https://www.kaggle.com/](https://www.kaggle.com/) \ -->

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="kiến-thức-r-cơ-bản.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="phân-tích-dữ-liệu-bằng-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
